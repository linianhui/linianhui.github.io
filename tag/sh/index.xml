<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Sh on Timetombs</title><link>https://linianhui.github.io/tag/sh/</link><description>Recent content in Sh on Timetombs</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Sat, 21 Dec 2024 12:19:11 +0800</lastBuildDate><atom:link href="https://linianhui.github.io/tag/sh/index.xml" rel="self" type="application/rss+xml"/><item><title>[Git] config</title><link>https://linianhui.github.io/git/config/</link><pubDate>Wed, 15 Jan 2020 20:52:01 +0800</pubDate><guid>https://linianhui.github.io/git/config/</guid><description>&lt;h1 id="config">
&lt;i id="locator-config" class="header-locator">&lt;/i>
&lt;a href="#config" class="article-h-a">1 配置&lt;/a>
&lt;/h1>
&lt;div class="highlight-file highlight-file_opened" id="hf-3932f9879703d2671327ccdcb48db08e">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hf-3932f9879703d2671327ccdcb48db08e','highlight-file_opened')">config.sh&lt;/a>&lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/git/config/config.sh" title="下载 config.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/git/config/config.sh" title="源码 config.sh">&lt;/a>&lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>set -eux
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># checkout&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.co checkout
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># commit&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.ci commit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.alc &lt;span style="color:#a31515">&amp;#39;commit --amend --no-edit&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># status&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.st &lt;span style="color:#a31515">&amp;#39;status --short --branch&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># branch&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.br branch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># pull&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.pr &lt;span style="color:#a31515">&amp;#39;pull --rebase&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># merge&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.mnf &lt;span style="color:#a31515">&amp;#39;merge --no-ff&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># diff&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.d diff
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.dt difftool
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># cherry-pick&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.cp cherry-pick
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># log&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.last &lt;span style="color:#a31515">&amp;#39;log -1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.lg &lt;span style="color:#a31515">&amp;#34;log --color --graph --pretty=format:&amp;#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&amp;lt;%an&amp;gt;%Creset&amp;#39; --abbrev-commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># count-objects&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.size &lt;span style="color:#a31515">&amp;#39;count-objects -v -H&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># reflog&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.rl &lt;span style="color:#a31515">&amp;#34;reflog --format=&amp;#39;%cd %h %gs&amp;#39; --date=format:&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># gc&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.warn-expire-reflog &lt;span style="color:#a31515">&amp;#34;reflog expire --expire=now --all&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.warn-gc-now &lt;span style="color:#a31515">&amp;#34;gc --prune=now --aggressive&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># chmod +/- x&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.chmod644 &lt;span style="color:#a31515">&amp;#34;update-index --chmod=-x&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.chmod755 &lt;span style="color:#a31515">&amp;#34;update-index --chmod=+x&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># head&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global alias.head &lt;span style="color:#a31515">&amp;#39;symbolic-ref HEAD&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># default branch&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global init.defaultBranch main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># gui&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global gui.encoding &lt;span style="color:#a31515">&amp;#39;utf-8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># i18n&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global i18n.commitencoding &lt;span style="color:#a31515">&amp;#39;utf-8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.quotepath false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># editor&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.editor &lt;span style="color:#a31515">&amp;#34;code -w&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.autocrlf false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.safecrlf true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.filemode false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># color&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global color.ui true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># branch pager&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global pager.branch false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/microsoft/Git-Credential-Manager-Core&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global credential.helper manager-core&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>

&lt;h1 id="reference">
&lt;i id="locator-reference" class="header-locator">&lt;/i>
&lt;a href="#reference" class="article-h-a">2 参考&lt;/a>
&lt;/h1>
&lt;p>&lt;a href="https://git-scm.com/docs/git-config"

 target="_blank" rel="noopener norefferrer">https://git-scm.com/docs/git-config&lt;/a>&lt;/p></description></item><item><title>[Linux] Script</title><link>https://linianhui.github.io/linux/script/</link><pubDate>Sun, 01 Jan 2017 09:42:01 +0800</pubDate><guid>https://linianhui.github.io/linux/script/</guid><description>&lt;h1 id="script-highlight-files">
&lt;i id="locator-script-highlight-files" class="header-locator">&lt;/i>
&lt;a href="#script-highlight-files" class="article-h-a">1 Script File List&lt;/a>
&lt;/h1>
&lt;div class="highlight-files">
 &lt;div class="highlight-files-header">sh文件列表&lt;/div>
 &lt;div class="highlight-files-list">&lt;div class="highlight-file" id="hfs-673b4bcc142c03a1c8bdf16062db655f">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-673b4bcc142c03a1c8bdf16062db655f','highlight-file_opened')">a.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/a.sh" title="下载 a.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/a.sh" title="源码 a.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># .zshrc(z shell run commands)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/env.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function-byte.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function-string.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function-directory.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function-git.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function-proc.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/function-date.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/git-prompt.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/zsh-prompt.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/vscode.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/idea.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/zsh-compdef.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/alias.sh&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-ea916535a94ec9aace802401c3435d1a">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-ea916535a94ec9aace802401c3435d1a','highlight-file_opened')">alias.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/alias.sh" title="下载 alias.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/alias.sh" title="源码 alias.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># alias&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias ..=&lt;span style="color:#a31515">&amp;#39;cd ..&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias ...=&lt;span style="color:#a31515">&amp;#39;cd ../..&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias b=&lt;span style="color:#a31515">&amp;#39;__byte_unit&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias d=&lt;span style="color:#a31515">&amp;#39;__directory_to&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias c=&lt;span style="color:#a31515">&amp;#39;__vscode_open&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias i=&lt;span style="color:#a31515">&amp;#39;__idea_open&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias t=&lt;span style="color:#a31515">&amp;#39;__timestamp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias dr=&lt;span style="color:#a31515">&amp;#39;docker run --rm --tty --interactive&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias dre=&lt;span style="color:#a31515">&amp;#39;dr --entrypoint&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias drs=&lt;span style="color:#a31515">&amp;#39;dre sh&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias drb=&lt;span style="color:#a31515">&amp;#39;dre bash&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias dh=&lt;span style="color:#a31515">&amp;#39;docker history --human --no-trunc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias dc=&lt;span style="color:#a31515">&amp;#39;docker-compose&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias dm=&lt;span style="color:#a31515">&amp;#39;docker-machine&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias mk=&lt;span style="color:#a31515">&amp;#39;minikube&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias h=&lt;span style="color:#a31515">&amp;#39;history | grep&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias md=&lt;span style="color:#a31515">&amp;#39;mkdir -p&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias bak=&lt;span style="color:#a31515">&amp;#39;backup_file&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias cls=&lt;span style="color:#a31515">&amp;#39;clear&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias grep=&lt;span style="color:#a31515">&amp;#39;grep --color=auto&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias untar=&lt;span style="color:#a31515">&amp;#39;tar -z -x -v -f&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias wget=&lt;span style="color:#a31515">&amp;#39;wget --continue --show-progress&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias sha=&lt;span style="color:#a31515">&amp;#39;shasum --algorithm 1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias sha256=&lt;span style="color:#a31515">&amp;#39;shasum --algorithm 256&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias ping=&lt;span style="color:#a31515">&amp;#39;ping -c 5&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias ipe=&lt;span style="color:#a31515">&amp;#39;curl http://ifconfig.me/ip&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias ipl=&lt;span style="color:#a31515">&amp;#39;ipconfig getifaddr en0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias hs=&lt;span style="color:#a31515">&amp;#39;miniserve --color-scheme squirrel --qrcode&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias hsu=&lt;span style="color:#a31515">&amp;#39;hs --upload-files&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias pfd=&lt;span style="color:#a31515">&amp;#39;rinetd --conf-file ${MY_HOME_CODE_BLOG}/src/tool/rinetd/rinetd.conf&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias pf=&lt;span style="color:#a31515">&amp;#39;pfd --foreground&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias env=&lt;span style="color:#a31515">&amp;#39;env | sort&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias penv=&lt;span style="color:#a31515">&amp;#39;proc_env&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias penv2=&lt;span style="color:#a31515">&amp;#39;proc_env2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias path=&lt;span style="color:#a31515">&amp;#39;echo &amp;#34;${PATH//:/\n}&amp;#34;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/jeremyfa/yaml.js&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># cnpm install -yamljs -g&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias yj=&lt;span style="color:#a31515">&amp;#39;yaml2json --pretty --indentation 2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias jy=&lt;span style="color:#a31515">&amp;#39;json2yaml --depth 64 --indentation 2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias shell=&lt;span style="color:#a31515">&amp;#39;echo $SHELL&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias shells=&lt;span style="color:#a31515">&amp;#39;cat /etc/shells&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias i18n=&lt;span style="color:#a31515">&amp;#39;locale&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias hu=&lt;span style="color:#a31515">&amp;#39;hugo --config hugo.yml --buildDrafts --forceSyncStatic --panicOnWarning&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias hus=&lt;span style="color:#a31515">&amp;#39;hu --watch server&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias mvn-wrapper=&lt;span style="color:#a31515">&amp;#39;mvn --non-recursive --debug io.takari:maven:wrapper -Dmaven=3.8.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias gradle-wrapper=&lt;span style="color:#a31515">&amp;#39;gradle wrapper --distribution-type all --gradle-version 6.7&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias mvn-help=&lt;span style="color:#a31515">&amp;#39;./mvnw help:describe -Ddetail&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias java-x=&lt;span style="color:#a31515">&amp;#39;java -X&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias java-xx=&lt;span style="color:#a31515">&amp;#39;java -XX:+UnlockDiagnosticVMOptions -XX:+UnlockExperimentalVMOptions -XX:+PrintFlagsFinal -version&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias java8=&lt;span style="color:#a31515">&amp;#39;export JAVA_HOME=$JAVA_8_HOME &amp;amp;&amp;amp; java -version&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias java11=&lt;span style="color:#a31515">&amp;#39;export JAVA_HOME=$JAVA_11_HOME &amp;amp;&amp;amp; java -version&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias java17=&lt;span style="color:#a31515">&amp;#39;export JAVA_HOME=$JAVA_17_HOME &amp;amp;&amp;amp; java -version&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias java21=&lt;span style="color:#a31515">&amp;#39;export JAVA_HOME=$JAVA_21_HOME &amp;amp;&amp;amp; java -version&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias proxy=&lt;span style="color:#a31515">&amp;#39;export ALL_PROXY=socks5://127.0.0.1:1080&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias unproxy=&lt;span style="color:#a31515">&amp;#39;unset ALL_PROXY&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias redis-server=&lt;span style="color:#a31515">&amp;#39;redis-server ${MY_HOME_CODE_BLOG}/src/redis/install/redis.conf&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias ja=&lt;span style="color:#a31515">&amp;#39;java -jar $JAVA_HOME/arthas-boot.jar --repo-mirror aliyun --use-http&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias master=&lt;span style="color:#a31515">&amp;#39;git co master&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias main=&lt;span style="color:#a31515">&amp;#39;git co main&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias g=&lt;span style="color:#a31515">&amp;#39;git&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias gti=&lt;span style="color:#a31515">&amp;#39;git&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias gi=&lt;span style="color:#a31515">&amp;#39;git&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># java -cp $JAVA_HOME/lib/sa-jdi.jar sun.jvm.hotspot.HSDB&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias k=&lt;span style="color:#a31515">&amp;#39;kubectl&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias kp=&lt;span style="color:#a31515">&amp;#39;k get pods&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>alias kpt=&lt;span style="color:#a31515">&amp;#39;kp -o custom-columns-file=${MY_HOME_CODE_BLOG}/src/k8s/kubectl/terminated-pod.txt --sort-by=&amp;#34;{.status.containerStatuses[0].lastState.terminated.finishedAt}&amp;#34;&amp;#39;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-3401a71ee0e2261a6c55a568459da176">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-3401a71ee0e2261a6c55a568459da176','highlight-file_opened')">env.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/env.sh" title="下载 env.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/env.sh" title="源码 env.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export MY_HOME=/lnh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MY_HOME_APP=$MY_HOME/_app
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MY_HOME_CACHE=$MY_HOME/_cache
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MY_HOME_CODE=&lt;span style="color:#a31515">${&lt;/span>MY_HOME&lt;span style="color:#a31515">}&lt;/span>/_code
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MY_HOME_CODE_BLOG=&lt;span style="color:#a31515">${&lt;/span>MY_HOME_CODE&lt;span style="color:#a31515">}&lt;/span>/_code/blog
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MY_HOME_CONFIG=$MY_HOME/_config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MY_HOME_DATA=$MY_HOME/_data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># add gnu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PATH=/usr/local/opt/coreutils/libexec/gnubin:$PATH
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export XDG_CACHE_HOME=$MY_HOME_CACHE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export XDG_CONFIG_HOME=$MY_HOME_CONFIG
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export XDG_DATA_HOME=$MY_HOME_DATA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://docs.microsoft.com/en-us/dotnet/core/tools/telemetry&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-tool-install&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export DOTNET_CLI_TELEMETRY_OPTOUT=false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_DOTNET_DIR=$MY_HOME_APP/_dotnet
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DOTNET_TOOLS_DIR=$HOME/.dotnet/tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_DOTNET_DIR:$DOTNET_TOOLS_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://adoptopenjdk.net/releases.html?variant=openjdk11&amp;amp;jvmVariant=hotspot&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># APP_JAVA_DIR=$MY_HOME_APP/_java&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># APP_JAVA_BIN_DIR=$APP_JAVA_DIR/bin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export JAVA_HOME=$APP_JAVA_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export PATH=$PATH:$APP_JAVA_BIN_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://gradle.org/releases/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_GRADLE_DIR=$MY_HOME_APP/_gradle
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_GRADLE_BIN_DIR=$APP_GRADLE_DIR/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CACHE_GRADLE_DIR=$MY_HOME_CACHE/_gradle
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GRADLE_HOME=$APP_GRADLE_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export GRADLE_USER_HOME=$CACHE_GRADLE_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_GRADLE_BIN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://maven.apache.org/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># http://maven.apache.org/configure.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_MAVEN_DIR=$MY_HOME_APP/_maven
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_MAVEN_BIN_DIR=$APP_MAVEN_DIR/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CACHE_MAVEN_DIR=$MY_HOME_CACHE/_maven
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MAVEN_HOME=$APP_MAVEN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export M2_HOME=$MAVEN_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MAVEN_USER_HOME=$MAVEN_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MAVEN_OPTS=&lt;span style="color:#a31515">&amp;#39;-Xms256m -Xmx1024m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_MAVEN_BIN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://projects.spring.io/spring-boot/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># APP_SPRING_BOOT_CLI_DIR=$MY_HOME_APP/_spring-boot-cli&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># APP_SPRING_BOOT_CLI_BIN_DIR=$APP_SPRING_BOOT_CLI_DIR/bin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export PATH=$PATH:$APP_SPRING_BOOT_CLI_BIN_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://www.mono-project.com/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export MONO_HOME=/Library/Frameworks/Mono.framework/Versions/5.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export MONO_HOME_BIN=$MONO_HOME/bin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export PATH=$PATH:$MONO_HOME_BIN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://docs.docker.com/engine/reference/commandline/cli/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-socket-option&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_DOCKER_DIR=$MY_HOME_APP/_docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CONFIG_DOCKER_DIR=$MY_HOME_CONFIG/_docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_DOCKER_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export DOCKER_HOST=&lt;span style="color:#a31515">&amp;#39;tcp://127.0.0.1:2375&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export DOCKER_CONFIG=$CONFIG_DOCKER_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://docs.docker.com/machine/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://docs.docker.com/machine/drivers/virtualbox/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># DATA_DOCKER_DIR=$MY_HOME_DATA/_docker&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export DOCKER_HOME=$APP_DOCKER_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export MACHINE_STORAGE_PATH=$DATA_DOCKER_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export VIRTUALBOX_BOOT2DOCKER_URL=$DOCKER_HOME/boot2docker.iso&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export VIRTUALBOX_UI_TYPE=headless&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export VIRTUALBOX_CPU_COUNT=1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export VIRTUALBOX_MEMORY_SIZE=512&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#export VIRTUALBOX_DISK_SIZE=5120&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://kubernetes.io/docs/tasks/tools/install-kubectl/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_KUBECTL_DIR=$MY_HOME_APP/_kubectl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CONFIG_KUBECTL_DIR=$MY_HOME_CONFIG/_kubectl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CONFIG_KUBECTL_CONFIG_FILE=$CONFIG_KUBECTL_DIR/config.yml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export KUBECONFIG=$CONFIG_KUBECTL_CONFIG_FILE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_KUBECTL_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://kubernetes.io/docs/tasks/tools/install-minikube/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># APP_MINIKUBE_DIR=$MY_HOME_APP/_minikube&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># DATA_MINIKUBE_DIR=$MY_HOME_DATA/_minikube&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export MINIKUBE_HOME=$DATA_MINIKUBE_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export MINIKUBE_WANTUPDATENOTIFICATION=false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export MINIKUBE_WANTREPORTERRORPROMPT=false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export CHANGE_MINIKUBE_NONE_USER=true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export PATH=$PATH:$APP_MINIKUBE_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://helm.sh/docs&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/helm/helm-www&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/helm/helm/releases&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_HELM_DIR=$MY_HOME_APP/_helm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_HELM_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/mholt/caddy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://caddyserver.com/docs/cli&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># APP_CADDY_DIR=$MY_HOME_APP/_caddy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export PATH=$PATH:$APP_CADDY_DIR&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/v2ray/v2ray-core&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_V2RAY_DIR=$MY_HOME_APP/_v2ray
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_V2RAY_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://www.rust-lang.org/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/rust-lang/rustup.rs#environment-variables&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_RUSTUP_DIR=$MY_HOME_APP/_rustup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RUSTUP_HOME=$APP_RUSTUP_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RUSTUP_DIST_SERVER=http://mirrors.ustc.edu.cn/rust-static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export RUSTUP_UPDATE_ROOT=http://mirrors.ustc.edu.cn/rust-static/rustup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/rust-lang/cargo/blob/master/src/doc/src/reference/environment-variables.md&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_CARGO_DIR=$MY_HOME_APP/_cargo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_CARGO_BIN_DIR=$APP_CARGO_DIR/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export CARGO_HOME=$APP_CARGO_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_CARGO_BIN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/gohugoio/hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_HUGO_DIR=$MY_HOME_APP/_hugo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CACHE_HUGO_DIR=$MY_HOME_CACHE/_hugo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_HUGO_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export HUGO_CACHEDIR=$CACHE_HUGO_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://nodejs.org/en/download/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_NODE_DIR=$MY_HOME_APP/_node
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_NODE_BIN_DIR=$APP_NODE_DIR/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_NODE_BIN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://brew.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/Homebrew/brew&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://developer.aliyun.com/mirror/homebrew&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># /bin/bash -c &amp;#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export HOMEBREW_API_DOMAIN=https://mirrors.aliyun.com/homebrew-bottles/api
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export HOMEBREW_BREW_GIT_REMOTE=https://mirrors.aliyun.com/homebrew/brew.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export HOMEBREW_CORE_GIT_REMOTE=https://mirrors.aliyun.com/homebrew/homebrew-core.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://www.db.com/download-center/community&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_MONGO_DIR=$MY_HOME_APP/_mongo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_MONGO_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://linianhui.github.io/redis/00-install&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_REDIS_DIR=$MY_HOME_APP/_redis
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_REDIS_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://dev.mysql.com/downloads/mysql/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://dev.mysql.com/doc/refman/8.0/en/environment-variables.html&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_MYSQL_DIR=$MY_HOME_APP/_mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>CACHE_MYSQL_MY_HOME_CONFIG=$XDG_CACHE_HOME/_mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MYSQL_HOME=$APP_MYSQL_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_MYSQL_BIN_DIR=$MYSQL_HOME/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export MYSQL_HISTFILE=$CACHE_MYSQL_MY_HOME_CONFIG/.history
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_MYSQL_BIN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/svenstaro/miniserve&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_MINISERVE_DIR=$MY_HOME_APP/_miniserve
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_MINISERVE_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># http://www.rinetd.com/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/samhocevar/rinetd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_RINETD_DIR=$MY_HOME_APP/_rinetd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_RINETD_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/wagoodman/dive&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_DIVE_DIR=$MY_HOME_APP/_dive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_DIVE_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://jmeter.apache.org/download_jmeter.cgi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_JMETER_DIR=$MY_HOME_APP/_jmeter
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_JMETER_BIN_DIR=$APP_JMETER_DIR/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_JMETER_BIN_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># iperf2 https://sourceforge.net/projects/iperf2/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># iperf3 https://iperf.fr/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_IPERF_DIR=$MY_HOME_APP/_iperf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_IPERF_DIR
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># 杂项工具&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>APP_OTHER_DIR=$MY_HOME_APP/_other
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export PATH=$PATH:$APP_OTHER_DIR
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-0c94694190878711eb097bc5bbd8d2b4">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-0c94694190878711eb097bc5bbd8d2b4','highlight-file_opened')">function-byte.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function-byte.sh" title="下载 function-byte.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function-byte.sh" title="源码 function-byte.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __byte_unit(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> originNumber=&lt;span style="color:#00f">$(&lt;/span>echo $1 | sed &lt;span style="color:#a31515">&amp;#39;s/[^0-9]//g&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> originUnit=&lt;span style="color:#00f">$(&lt;/span>echo $1 | sed &lt;span style="color:#a31515">&amp;#39;s/[^a-z]//g&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unitIndex=&lt;span style="color:#00f">$(&lt;/span>__byte_1024_index $originUnit&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> byte=&lt;span style="color:#00f">$(&lt;/span>__byte_multiply_1024 $originNumber $unitIndex&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>byte&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515"> byte&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>__byte_divided_1024 $byte 1&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515"> kb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>__byte_divided_1024 $byte 2&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515"> mb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>__byte_divided_1024 $byte 3&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515"> gb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>__byte_divided_1024 $byte 4&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515"> tb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>__byte_divided_1024 $byte 5&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515"> pb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __byte_multiply_1024(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number=&lt;span style="color:#a31515">${&lt;/span>1&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> count=&lt;span style="color:#a31515">${&lt;/span>2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ &lt;span style="color:#a31515">&amp;#34;&lt;/span>$count&lt;span style="color:#a31515">&amp;#34;&lt;/span> == &lt;span style="color:#a31515">&amp;#34;0&amp;#34;&lt;/span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo $number
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> byte1024=&lt;span style="color:#00f">$((&lt;/span>1024**$count&lt;span style="color:#00f">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#00f">$((&lt;/span>$number*byte1024&lt;span style="color:#00f">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __byte_divided_1024(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number=&lt;span style="color:#a31515">${&lt;/span>1&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> count=&lt;span style="color:#a31515">${&lt;/span>2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ &lt;span style="color:#a31515">&amp;#34;&lt;/span>$count&lt;span style="color:#a31515">&amp;#34;&lt;/span> == &lt;span style="color:#a31515">&amp;#34;0&amp;#34;&lt;/span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo $number
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> byte1024=&lt;span style="color:#00f">$((&lt;/span>1024**$count&lt;span style="color:#00f">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;scale=2; &lt;/span>$number&lt;span style="color:#a31515"> / &lt;/span>$byte1024&lt;span style="color:#a31515">&amp;#34;&lt;/span> | bc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __byte_1024_index(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fullUnit=&lt;span style="color:#a31515">${&lt;/span>1,,&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unit=&lt;span style="color:#a31515">${&lt;/span>fullUnit:0:1&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> $unit in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;b&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;k&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;m&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;g&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;t&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;p&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;not support&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-55148c33b4d259e140e55fb5a77b6295">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-55148c33b4d259e140e55fb5a77b6295','highlight-file_opened')">function-date.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function-date.sh" title="下载 function-date.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function-date.sh" title="源码 function-date.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __timestamp(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [[ $# == 2 ]]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __iso8601_2_timestamp $1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __timestamp_2_iso8601 $1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __timestamp_2_iso8601(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> timestampSecond=&lt;span style="color:#a31515">${&lt;/span>1:0:10&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> millisecond=&lt;span style="color:#00f">$(&lt;/span>printf &lt;span style="color:#a31515">&amp;#34;.%03d&amp;#34;&lt;/span> &lt;span style="color:#a31515">${&lt;/span>1:10:3&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> date --date=&lt;span style="color:#a31515">&amp;#34;@&lt;/span>$timestampSecond&lt;span style="color:#a31515">&amp;#34;&lt;/span> &lt;span style="color:#a31515">&amp;#34;+%FT%T&lt;/span>&lt;span style="color:#a31515">${&lt;/span>millisecond&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">Z%:z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __iso8601_2_timestamp(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dateTimeString=&lt;span style="color:#00f">$(&lt;/span>echo $1 | sed &lt;span style="color:#a31515">&amp;#39;s/[^0-9]//g&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> year=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:0:4&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> month=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:4:2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> day=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:6:2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hour=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:8:2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> minute=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:10:2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> second=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:12:2&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> millisecond=&lt;span style="color:#a31515">${&lt;/span>dateTimeString:14:3&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> timezone=&lt;span style="color:#a31515">&amp;#34;+08:00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iso8601=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>year&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">-&lt;/span>&lt;span style="color:#a31515">${&lt;/span>month&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">-&lt;/span>&lt;span style="color:#a31515">${&lt;/span>day&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">T&lt;/span>&lt;span style="color:#a31515">${&lt;/span>hour&lt;span style="color:#00f">:-&lt;/span>00&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">:&lt;/span>&lt;span style="color:#a31515">${&lt;/span>minute&lt;span style="color:#00f">:-&lt;/span>00&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">:&lt;/span>&lt;span style="color:#a31515">${&lt;/span>second&lt;span style="color:#00f">:-&lt;/span>00&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">Z&lt;/span>&lt;span style="color:#a31515">${&lt;/span>timezone&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> date --date &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>iso8601&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> &lt;span style="color:#a31515">&amp;#34;+%s&lt;/span>&lt;span style="color:#a31515">${&lt;/span>millisecond&lt;span style="color:#00f">:-&lt;/span>000&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-5c9c6f50e82ee8b2ba20c0390c8f1403">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-5c9c6f50e82ee8b2ba20c0390c8f1403','highlight-file_opened')">function-directory.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function-directory.sh" title="下载 function-directory.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function-directory.sh" title="源码 function-directory.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>declare -a __QUICK_ACCESS_DIRECTORY=()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__DELIMITER=&lt;span style="color:#a31515">&amp;#39;.-_ ()&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_get_dir_name {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> path=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">:t&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo $path
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_get_parent_dir_name {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dir=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __directory_get_dir_name &lt;span style="color:#00f">$(&lt;/span>dirname &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_add_quick_access {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dir=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delimiter=&lt;span style="color:#a31515">&amp;#34;.-_ ()&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515"> is a file.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -d &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> subDir in $dir/*; &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -d &lt;span style="color:#a31515">&amp;#34;&lt;/span>$subDir&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> subDirLowerCase=&lt;span style="color:#a31515">${&lt;/span>subDir:l&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name=&lt;span style="color:#00f">$(&lt;/span>__directory_get_dir_name $subDirLowerCase&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parent=&lt;span style="color:#00f">$(&lt;/span>__directory_get_parent_dir_name $subDirLowerCase&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nameAbbr=&lt;span style="color:#00f">$(&lt;/span>__string_abbr $name $__DELIMITER&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parentAbbr=&lt;span style="color:#00f">$(&lt;/span>__string_abbr $parent $__DELIMITER&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __QUICK_ACCESS_DIRECTORY+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$nameAbbr&lt;span style="color:#a31515"> &lt;/span>$parentAbbr$nameAbbr&lt;span style="color:#a31515"> &lt;/span>$subDirLowerCase&lt;span style="color:#a31515"> &lt;/span>$subDir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515"> is not exist.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_list_quick_access {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print -l $__QUICK_ACCESS_DIRECTORY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_search_quick_access {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __directory_search_quick_access_core &lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span> | sort -k1nr | &lt;span style="color:#00f">while&lt;/span> read line
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$result&lt;span style="color:#a31515">${&lt;/span>line:2&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515"> &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo $result
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_search_quick_access_core {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> search=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> line in $__QUICK_ACCESS_DIRECTORY; &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result=&lt;span style="color:#00f">$(&lt;/span>__directory_search_quick_access_core_line $line $search&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [[ &lt;span style="color:#a31515">&amp;#34;&lt;/span>$result&lt;span style="color:#a31515">&amp;#34;&lt;/span> != &lt;span style="color:#a31515">&amp;#34;&amp;#34;&lt;/span> ]]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$result&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_search_quick_access_core_line {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> line=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> search=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$2&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cols=(&lt;span style="color:#00f">$(&lt;/span>echo $line&lt;span style="color:#00f">)&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contains=&lt;span style="color:#00f">$(&lt;/span>__string_contains $cols[1] $search&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $contains == 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;9 &lt;/span>$cols&lt;span style="color:#a31515">[4]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contains=&lt;span style="color:#00f">$(&lt;/span>__string_contains $cols[2] $search&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $contains == 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;8 &lt;/span>$cols&lt;span style="color:#a31515">[4]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contains=&lt;span style="color:#00f">$(&lt;/span>__string_contains $cols[3] $search&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $contains == 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;7 &lt;/span>$cols&lt;span style="color:#a31515">[4]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contains=&lt;span style="color:#00f">$(&lt;/span>__string_match $cols[3] $search&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $contains == 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;6 &lt;/span>$cols&lt;span style="color:#a31515">[4]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_to {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dir=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$@&lt;span style="color:#a31515">[&lt;/span>$#&lt;span style="color:#a31515">]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;cd &lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cd &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __directory_search_quick_access_complete {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cols=(&lt;span style="color:#00f">$(&lt;/span>__directory_search_quick_access $words[2]&lt;span style="color:#00f">)&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _alternative &lt;span style="color:#a31515">&amp;#34;dir:dir:(&lt;/span>$cols&lt;span style="color:#a31515">)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-56b9e5e7ff3e2f8f4b3853027aa01682">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-56b9e5e7ff3e2f8f4b3853027aa01682','highlight-file_opened')">function-git.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function-git.sh" title="下载 function-git.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function-git.sh" title="源码 function-git.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __git_warn_gc () {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;\033[32mgit reflog expire --expire=now --all \033[0m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git warn-expire-reflog
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;\033[32mgit gc --prune=now --aggressive \033[0m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git warn-gc-now
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;\033[32mgit count-objects -v -H \033[0m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git size
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __git_proxy(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local action=&lt;span style="color:#a31515">${&lt;/span>1&lt;span style="color:#00f">:-&lt;/span>get&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ $action = &lt;span style="color:#a31515">&amp;#39;set&amp;#39;&lt;/span> ] ;&lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git config --global http.proxy &lt;span style="color:#a31515">&amp;#39;socks5://127.0.0.1:1080&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ $action = &lt;span style="color:#a31515">&amp;#39;unset&amp;#39;&lt;/span> ] ;&lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git config --global --unset http.proxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git config --global --get http.proxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-2136b5421b88d2c33d53ceb0af82eead">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-2136b5421b88d2c33d53ceb0af82eead','highlight-file_opened')">function-proc.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function-proc.sh" title="下载 function-proc.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function-proc.sh" title="源码 function-proc.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __proc_env(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cat /proc/$1/environ | tr &lt;span style="color:#a31515">&amp;#39;\0&amp;#39;&lt;/span> &lt;span style="color:#a31515">&amp;#39;\n&amp;#39;&lt;/span> | sort
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __proc_env2(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ps ewww -o command $1 | tr &lt;span style="color:#a31515">&amp;#39; &amp;#39;&lt;/span> &lt;span style="color:#a31515">&amp;#39;\n&amp;#39;&lt;/span> | sort
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-e8f501e7d14952667597cbf3f2f6a6c9">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-e8f501e7d14952667597cbf3f2f6a6c9','highlight-file_opened')">function-string.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function-string.sh" title="下载 function-string.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function-string.sh" title="源码 function-string.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">#!/bin/zsh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># example : __string_contains abc bc&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __string_contains {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [[ &lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span> == *$2* ]]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># example : __string_match abc ac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __string_match {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> subStr=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$2&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> subStrLen=&lt;span style="color:#a31515">${#&lt;/span>subStr&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> i ({1..$subStrLen}) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> char=$subStr[$i]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> strLen=&lt;span style="color:#a31515">${#&lt;/span>str&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> strIndex=1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> strIndex=$str[(i)$char]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $strIndex &amp;gt; $strLen )) &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str=&lt;span style="color:#a31515">${&lt;/span>str:$strIndex&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># example : __string_split &amp;#39;abc-123.456_asd&amp;#39; &amp;#39;-_.&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __string_split {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">${&lt;/span>1//[$2]/ &lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># example : __string_abbr abc-def &amp;#39;-&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __string_abbr {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abbr=&lt;span style="color:#a31515">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> word in &lt;span style="color:#00f">$(&lt;/span>echo &lt;span style="color:#a31515">${&lt;/span>1//[$2]/ &lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#00f">)&lt;/span>; &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abbr=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$abbr&lt;span style="color:#a31515">${&lt;/span>word:0:1&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$abbr&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __string_test {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> actual=&lt;span style="color:#00f">$(&lt;/span>__string_contains abc bc&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expect=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ok=&lt;span style="color:#00f">$(&lt;/span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;test : __string_contains abc bc &lt;/span>$ok&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> actual=&lt;span style="color:#00f">$(&lt;/span>__string_match abc ac&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expect=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ok=&lt;span style="color:#00f">$(&lt;/span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;test : __string_match abc ac &lt;/span>$ok&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> actual=&lt;span style="color:#00f">$(&lt;/span>__string_split abc-123.456_asd -_.&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expect=&lt;span style="color:#a31515">&amp;#39;abc 123 456 asd&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ok=&lt;span style="color:#00f">$(&lt;/span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;test : __string_split abc-123.456_asd -_. &lt;/span>$ok&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> actual=&lt;span style="color:#00f">$(&lt;/span>__string_abbr abc-def -&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expect=ad
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ok=&lt;span style="color:#00f">$(&lt;/span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo -e &lt;span style="color:#a31515">&amp;#34;test : __string_abbr abc-def - &lt;/span>$ok&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-7478f2c0798109441f4091874d2ac254">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-7478f2c0798109441f4091874d2ac254','highlight-file_opened')">function.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/function.sh" title="下载 function.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/function.sh" title="源码 function.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">#!/bin/zsh
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__TEST_OK_STRING=&lt;span style="color:#a31515">&amp;#39;\033[32mok\033[0m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__TEST_FAIL_STRING=&lt;span style="color:#a31515">&amp;#39;\033[31mfail\033[0m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __if_then_else {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [[ &lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span> == &lt;span style="color:#a31515">&amp;#34;&lt;/span>$2&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$3&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$4&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __port(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lsof &lt;span style="color:#a31515">&amp;#34;-i:&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-05c29747c48997d0dd69526a246543b7">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-05c29747c48997d0dd69526a246543b7','highlight-file_opened')">git-prompt.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/git-prompt.sh" title="下载 git-prompt.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/git-prompt.sh" title="源码 git-prompt.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash/zsh git prompt support&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Copyright (C) 2018 David Xu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Based on the earlier work by Shawn O. Pearce &amp;lt;spearce@spearce.org&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Distributed under the GNU General Public License, version 2.0.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># This script allows you to see the current branch in your prompt,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># posh-git style.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># You will most likely want to make use of either `__posh_git_ps1` or&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># `__posh_git_echo`. Refer to the documentation of the functions for additional&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># information.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># CONFIG OPTIONS&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ==============&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># This script should work out of the box. Available options are set through&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># your git configuration files. This allows you to control the prompt display on a&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># per-repository basis.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ```&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.describeStyle&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.enableFileStatus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.enableGitStatus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.showStatusWhenZero&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.showUpstream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ```&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.describeStyle&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># This option controls if you would like to see more information about the&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># identity of commits checked out as a detached `HEAD`. This is also controlled&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># by the legacy environment variable `GIT_PS1_DESCRIBESTYLE`.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># -------- | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># contains | relative to newer annotated tag `(v1.6.3.2~35)`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># branch | relative to newer tag or branch `(master~4)`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># describe | relative to older annotated tag `(v1.6.3.1-13-gdd42c2f)`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># default | exactly matching tag&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.enableFileStatus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ---------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------ | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># true | _Default_. The script will query for all file indicators every time.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># false | No file indicators will be displayed. The script will not query&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># upstream for differences. Branch color-coding information is still&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># displayed.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.enableGitStatus&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># --------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------ | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># true | _Default_. Color coding and indicators will be shown.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># false | The script will not run.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.showStashState&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># -------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------ | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># true | _Default_. An indicator will display if the stash is not empty.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># false | An indicator will not display the stash status.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.showStatusWhenZero&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># -----------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------ | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># true | Indicators will be shown even if there are no updates to the index or&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># working tree.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># false | _Default_. No file change indicators will be shown if there are no&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># changes to the index or working tree.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.showUpstream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># -----------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># By default, `__posh_git_ps1` will compare `HEAD` to your `SVN` upstream if it can&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># find one, or `@{upstream}` otherwise. This is also controlled by the legacy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># environment variable `GIT_PS1_SHOWUPSTREAM`.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------ | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># legacy | Does not use the `--count` option available in recent versions of&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># `git-rev-list`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># git | _Default_. Always compares `HEAD` to `@{upstream}`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># svn | Always compares `HEAD` to `SVN` upstream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># bash.enableStatusSymbol&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># -----------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Option | Description&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># ------ | -----------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># true | _Default_. Status symbols (`≡` `↑` `↓` `↕`) will be shown.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># false | No status symbol will be shown, saving some prompt length.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">###############################################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Convenience function to set PS1 to show git status. Must supply two&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># arguments that specify the prefix and suffix of the git status string.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># This function should be called in PROMPT_COMMAND or similar.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__posh_git_ps1 ()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local ps1pc_prefix=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local ps1pc_suffix=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$#&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ps1pc_prefix=$1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ps1pc_suffix=$2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo __posh_git_ps1: bad number of arguments &amp;gt;&amp;amp;2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local gitstring=&lt;span style="color:#00f">$(&lt;/span>__posh_git_echo&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PS1=$ps1pc_prefix$gitstring$ps1pc_suffix
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__posh_color () {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>$ZSH_VERSION&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo %{$1%}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>$BASH_VERSION&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">\\&lt;/span>[$1&lt;span style="color:#a31515">\\&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># assume Bash anyway&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">\\&lt;/span>[$1&lt;span style="color:#a31515">\\&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Echoes the git status string.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__posh_git_echo () {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git config --bool bash.enableGitStatus&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> = &lt;span style="color:#a31515">&amp;#39;false&amp;#39;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local DefaultForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Default no color&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local DefaultBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BeforeText=&lt;span style="color:#a31515">&amp;#39;[&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BeforeForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;33m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Yellow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BeforeBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local DelimText=&lt;span style="color:#a31515">&amp;#39; |&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local DelimForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;33m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Yellow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local DelimBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local AfterText=&lt;span style="color:#a31515">&amp;#39;]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local AfterForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;33m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Yellow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local AfterBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;36m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Cyan&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchAheadForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;32m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Green&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchAheadBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBehindForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[0;31m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Red&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBehindBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBehindAndAheadForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;33m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Yellow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBehindAndAheadBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BeforeIndexText=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BeforeIndexForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;32m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Dark green&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BeforeIndexBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local IndexForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[1;32m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Dark green&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local IndexBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local WorkingForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[0;31m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Dark red&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local WorkingBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local StashForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[0;34m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># Darker blue&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local StashBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local StashText=&lt;span style="color:#a31515">&amp;#39;$&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local RebaseForegroundColor=&lt;span style="color:#00f">$(&lt;/span>__posh_color &lt;span style="color:#a31515">&amp;#39;\e[0m&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span> &lt;span style="color:#008000"># reset&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local RebaseBackgroundColor=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local EnableFileStatus=&lt;span style="color:#a31515">`&lt;/span>git config --bool bash.enableFileStatus&lt;span style="color:#a31515">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$EnableFileStatus&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> true) EnableFileStatus=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> false) EnableFileStatus=false ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *) EnableFileStatus=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local ShowStatusWhenZero=&lt;span style="color:#a31515">`&lt;/span>git config --bool bash.showStatusWhenZero&lt;span style="color:#a31515">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$ShowStatusWhenZero&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> true) ShowStatusWhenZero=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> false) ShowStatusWhenZero=false ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *) ShowStatusWhenZero=false ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local ShowStashState=&lt;span style="color:#a31515">`&lt;/span>git config --bool bash.showStashState&lt;span style="color:#a31515">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$ShowStashState&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> true) ShowStashState=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> false) ShowStashState=false ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *) ShowStashState=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local EnableStatusSymbol=&lt;span style="color:#a31515">`&lt;/span>git config --bool bash.enableStatusSymbol&lt;span style="color:#a31515">`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$EnableStatusSymbol&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> true) EnableStatusSymbol=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> false) EnableStatusSymbol=false ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> *) EnableStatusSymbol=true ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchIdenticalStatusSymbol=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchAheadStatusSymbol=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBehindStatusSymbol=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchBehindAndAheadStatusSymbol=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local BranchWarningStatusSymbol=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> $EnableStatusSymbol; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BranchIdenticalStatusSymbol=&lt;span style="color:#a31515">$&amp;#39; \xE2\x89\xA1&amp;#39;&lt;/span> &lt;span style="color:#008000"># Three horizontal lines&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BranchAheadStatusSymbol=&lt;span style="color:#a31515">$&amp;#39; \xE2\x86\x91&amp;#39;&lt;/span> &lt;span style="color:#008000"># Up Arrow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BranchBehindStatusSymbol=&lt;span style="color:#a31515">$&amp;#39; \xE2\x86\x93&amp;#39;&lt;/span> &lt;span style="color:#008000"># Down Arrow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BranchBehindAndAheadStatusSymbol=&lt;span style="color:#a31515">$&amp;#39; \xE2\x86\x95&amp;#39;&lt;/span> &lt;span style="color:#008000"># Up and Down Arrow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BranchWarningStatusSymbol=&lt;span style="color:#a31515">&amp;#39; ?&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># these globals are updated by __posh_git_ps1_upstream_divergence&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __POSH_BRANCH_AHEAD_BY=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __POSH_BRANCH_BEHIND_BY=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local is_detached=false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local g=&lt;span style="color:#00f">$(&lt;/span>__posh_gitdir&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -z &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span> &lt;span style="color:#008000"># not a git directory&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local rebase=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local b=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local step=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local total=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -d &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-merge&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#00f">$(&lt;/span>cat &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-merge/head-name&amp;#34;&lt;/span> 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> step=&lt;span style="color:#00f">$(&lt;/span>cat &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-merge/msgnum&amp;#34;&lt;/span> 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total=&lt;span style="color:#00f">$(&lt;/span>cat &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-merge/end&amp;#34;&lt;/span> 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-merge/interactive&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|REBASE-i&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|REBASE-m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -d &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-apply&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> step=&lt;span style="color:#00f">$(&lt;/span>cat &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-apply/next&amp;#34;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> total=&lt;span style="color:#00f">$(&lt;/span>cat &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-apply/last&amp;#34;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-apply/rebasing&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|REBASE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/rebase-apply/applying&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|AM&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|AM/REBASE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/MERGE_HEAD&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|MERGING&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/CHERRY_PICK_HEAD&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|CHERRY-PICKING&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/REVERT_HEAD&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|REVERTING&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/BISECT_LOG&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#39;|BISECTING&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#00f">$(&lt;/span>git symbolic-ref HEAD 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span> || {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is_detached=true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local output=&lt;span style="color:#00f">$(&lt;/span>git config -z --get bash.describeStyle&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>$output&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> GIT_PS1_DESCRIBESTYLE=$output
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#00f">$(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>GIT_PS1_DESCRIBESTYLE-&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (contains&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git describe --contains HEAD ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (branch)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git describe --contains --all HEAD ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (describe)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git describe HEAD ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (* | default)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git describe --tags --exact-match HEAD ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span> 2&amp;gt;/dev/null) ||
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#00f">$(&lt;/span>cut -c1-7 &lt;span style="color:#a31515">&amp;#34;&lt;/span>$g&lt;span style="color:#a31515">/HEAD&amp;#34;&lt;/span> 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>... ||
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#a31515">&amp;#39;unknown&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#a31515">&amp;#34;(&lt;/span>$b&lt;span style="color:#a31515">)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>$step&lt;span style="color:#a31515">&amp;#34;&lt;/span> ] &amp;amp;&amp;amp; [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>$total&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rebase=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$rebase&lt;span style="color:#a31515"> &lt;/span>$step&lt;span style="color:#a31515">/&lt;/span>$total&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local hasStash=false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local isBare=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ &lt;span style="color:#a31515">&amp;#39;true&amp;#39;&lt;/span> = &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git rev-parse --is-inside-git-dir 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ &lt;span style="color:#a31515">&amp;#39;true&amp;#39;&lt;/span> = &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git rev-parse --is-bare-repository 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> isBare=&lt;span style="color:#a31515">&amp;#39;BARE:&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b=&lt;span style="color:#a31515">&amp;#39;GIT_DIR!&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ &lt;span style="color:#a31515">&amp;#39;true&amp;#39;&lt;/span> = &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git rev-parse --is-inside-work-tree 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> $ShowStashState; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git rev-parse --verify refs/stash &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; hasStash=true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __posh_git_ps1_upstream_divergence
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local divergence_return_code=$?
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># show index status and working directory status&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> $EnableFileStatus; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local indexAdded=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local indexModified=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local indexDeleted=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local indexUnmerged=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local filesAdded=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local filesModified=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local filesDeleted=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local filesUnmerged=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">while&lt;/span> IFS=&lt;span style="color:#a31515">&amp;#34;\n&amp;#34;&lt;/span> read -r tag rest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>tag:0:1&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( indexAdded++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> M )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( indexModified++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> R )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( indexModified++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> C )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( indexModified++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( indexDeleted++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> U )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( indexUnmerged++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>tag:1:1&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">\?&lt;/span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( filesAdded++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( filesAdded++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> M )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( filesModified++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( filesDeleted++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> U )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (( filesUnmerged++ ))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span> &amp;lt;&amp;lt;&amp;lt; &lt;span style="color:#a31515">&amp;#34;`git status --porcelain 2&amp;gt;/dev/null`&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local gitstring=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local branchstring=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$isBare&lt;span style="color:#a31515">${&lt;/span>b##refs/heads/&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># before-branch text&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$BeforeBackgroundColor$BeforeForegroundColor$BeforeText&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># branch&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $__POSH_BRANCH_BEHIND_BY &amp;gt; 0 &amp;amp;&amp;amp; $__POSH_BRANCH_AHEAD_BY &amp;gt; 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$BranchBehindAndAheadBackgroundColor$BranchBehindAndAheadForegroundColor$branchstring$BranchBehindAndAheadStatusSymbol&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> (( $__POSH_BRANCH_BEHIND_BY &amp;gt; 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$BranchBehindBackgroundColor$BranchBehindForegroundColor$branchstring$BranchBehindStatusSymbol&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> (( $__POSH_BRANCH_AHEAD_BY &amp;gt; 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$BranchAheadBackgroundColor$BranchAheadForegroundColor$branchstring$BranchAheadStatusSymbol&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> (( $divergence_return_code )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># ahead and behind are both 0, but there was some problem while executing the command.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$BranchBackgroundColor$BranchForegroundColor$branchstring$BranchWarningStatusSymbol&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># ahead and behind are both 0, and the divergence was determined successfully&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$BranchBackgroundColor$BranchForegroundColor$branchstring$BranchIdenticalStatusSymbol&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># index status&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> $EnableFileStatus; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local indexCount=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$((&lt;/span> $indexAdded + $indexModified + $indexDeleted + $indexUnmerged &lt;span style="color:#00f">))&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local workingCount=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$((&lt;/span> $filesAdded + $filesModified + $filesDeleted + $filesUnmerged &lt;span style="color:#00f">))&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $indexCount != 0 )) || $ShowStatusWhenZero; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$IndexBackgroundColor$IndexForegroundColor&lt;span style="color:#a31515"> +&lt;/span>$indexAdded&lt;span style="color:#a31515"> ~&lt;/span>$indexModified&lt;span style="color:#a31515"> -&lt;/span>$indexDeleted&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $indexUnmerged != 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34; &lt;/span>$IndexBackgroundColor$IndexForegroundColor&lt;span style="color:#a31515">!&lt;/span>$indexUnmerged&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $indexCount != 0 &amp;amp;&amp;amp; ($workingCount != 0 || $ShowStatusWhenZero) )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$DelimBackgroundColor$DelimForegroundColor$DelimText&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $workingCount != 0 )) || $ShowStatusWhenZero; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$WorkingBackgroundColor$WorkingForegroundColor&lt;span style="color:#a31515"> +&lt;/span>$filesAdded&lt;span style="color:#a31515"> ~&lt;/span>$filesModified&lt;span style="color:#a31515"> -&lt;/span>$filesDeleted&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( $filesUnmerged != 0 )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34; &lt;/span>$WorkingBackgroundColor$WorkingForegroundColor&lt;span style="color:#a31515">!&lt;/span>$filesUnmerged&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>rebase:+$RebaseForegroundColor$RebaseBackgroundColor$rebase&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># after-branch text&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$AfterBackgroundColor$AfterForegroundColor$AfterText&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> $ShowStashState &amp;amp;&amp;amp; $hasStash; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$StashBackgroundColor$StashForegroundColor&lt;span style="color:#a31515">&amp;#34;&lt;/span>$StashText
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitstring+=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$DefaultBackgroundColor$DefaultForegroundColor&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$gitstring&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Returns the location of the .git/ directory.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__posh_gitdir ()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># Note: this function is duplicated in git-completion.bash&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># When updating it, make sure you update the other one to match.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -z &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>1-&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>__posh_git_dir-&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$__posh_git_dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -n &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>GIT_DIR-&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> test -d &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>GIT_DIR-&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> || &lt;span style="color:#00f">return&lt;/span> 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$GIT_DIR&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -d .git ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo .git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git rev-parse --git-dir 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ -d &lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">/.git&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">/.git&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;&lt;/span>$1&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Updates the global variables `__POSH_BRANCH_AHEAD_BY` and `__POSH_BRANCH_BEHIND_BY`.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__posh_git_ps1_upstream_divergence ()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local key value
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local svn_remote svn_url_pattern
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local upstream=git &lt;span style="color:#008000"># default&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local legacy=&lt;span style="color:#a31515">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn_remote=()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># get some config options from git-config&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local output=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git config -z --get-regexp &lt;span style="color:#a31515">&amp;#39;^(svn-remote\..*\.url|bash\.showUpstream)$&amp;#39;&lt;/span> 2&amp;gt;/dev/null | tr &lt;span style="color:#a31515">&amp;#39;\0\n&amp;#39;&lt;/span> &lt;span style="color:#a31515">&amp;#39;\n &amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">while&lt;/span> read -r key value; &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$key&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bash.showUpstream)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> GIT_PS1_SHOWUPSTREAM=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$value&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -z &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>GIT_PS1_SHOWUPSTREAM&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn-remote.*.url)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn_remote[ &lt;span style="color:#00f">$((&lt;/span>&lt;span style="color:#a31515">${#&lt;/span>svn_remote[@]&lt;span style="color:#a31515">}&lt;/span> + 1&lt;span style="color:#00f">))&lt;/span> ]=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$value&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn_url_pattern+=&lt;span style="color:#a31515">&amp;#34;\\|&lt;/span>$value&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> upstream=svn+git &lt;span style="color:#008000"># default upstream is SVN if available, else git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span> &amp;lt;&amp;lt;&amp;lt; &lt;span style="color:#a31515">&amp;#34;&lt;/span>$output&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># parse configuration values&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> option in &lt;span style="color:#a31515">${&lt;/span>GIT_PS1_SHOWUPSTREAM&lt;span style="color:#a31515">}&lt;/span>; &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$option&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git|svn) upstream=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$option&lt;span style="color:#a31515">&amp;#34;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> legacy) legacy=1 ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># Find our upstream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$upstream&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git) upstream=&lt;span style="color:#a31515">&amp;#39;@{upstream}&amp;#39;&lt;/span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn*)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># get the upstream from the &amp;#34;git-svn-id: ...&amp;#34; in a commit message&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># (git-svn uses essentially the same procedure internally)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local svn_upstream=(&lt;span style="color:#00f">$(&lt;/span>git log --first-parent -1 &lt;span style="color:#a31515">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a31515">&lt;/span> --grep=&lt;span style="color:#a31515">&amp;#34;^git-svn-id: \(&lt;/span>&lt;span style="color:#a31515">${&lt;/span>svn_url_pattern#??&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">\)&amp;#34;&lt;/span> 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> (( 0 != &lt;span style="color:#a31515">${#&lt;/span>svn_upstream[@]&lt;span style="color:#a31515">}&lt;/span> )); &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn_upstream=&lt;span style="color:#a31515">${&lt;/span>svn_upstream[ &lt;span style="color:#a31515">${#&lt;/span>svn_upstream[@]&lt;span style="color:#a31515">}&lt;/span> - 2 ]&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn_upstream=&lt;span style="color:#a31515">${&lt;/span>svn_upstream%@*&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local n_stop=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${#&lt;/span>svn_remote[@]&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local n
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">for&lt;/span> ((n=1; n &amp;lt;= n_stop; n++)); &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> svn_upstream=&lt;span style="color:#a31515">${&lt;/span>svn_upstream#&lt;span style="color:#a31515">${&lt;/span>svn_remote[$n]&lt;span style="color:#a31515">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -z &lt;span style="color:#a31515">&amp;#34;&lt;/span>$svn_upstream&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># default branch name for checkouts with no layout:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> upstream=&lt;span style="color:#a31515">${&lt;/span>GIT_SVN_ID&lt;span style="color:#00f">:-&lt;/span>git-svn&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> upstream=&lt;span style="color:#a31515">${&lt;/span>svn_upstream#/&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">elif&lt;/span> [ &lt;span style="color:#a31515">&amp;#39;svn+git&amp;#39;&lt;/span> = &lt;span style="color:#a31515">&amp;#34;&lt;/span>$upstream&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> upstream=&lt;span style="color:#a31515">&amp;#39;@{upstream}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local return_code=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __POSH_BRANCH_AHEAD_BY=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> __POSH_BRANCH_BEHIND_BY=0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># Find how many commits we are ahead/behind our upstream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> [ -z &lt;span style="color:#a31515">&amp;#34;&lt;/span>$legacy&lt;span style="color:#a31515">&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local output=
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output=&lt;span style="color:#00f">$(&lt;/span>git rev-list --count --left-right $upstream...HEAD 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> return_code=$?
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IFS=&lt;span style="color:#a31515">$&amp;#39; \t\n&amp;#39;&lt;/span> read -r __POSH_BRANCH_BEHIND_BY __POSH_BRANCH_AHEAD_BY &amp;lt;&amp;lt;&amp;lt; $output
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local output
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output=&lt;span style="color:#00f">$(&lt;/span>git rev-list --left-right $upstream...HEAD 2&amp;gt;/dev/null&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> return_code=$?
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000"># produce equivalent output to --count for older versions of git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">while&lt;/span> IFS=&lt;span style="color:#a31515">$&amp;#39; \t\n&amp;#39;&lt;/span> read -r commit; &lt;span style="color:#00f">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">case&lt;/span> &lt;span style="color:#a31515">&amp;#34;&lt;/span>$commit&lt;span style="color:#a31515">&amp;#34;&lt;/span> in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;&amp;lt;*&amp;#34;&lt;/span>) (( __POSH_BRANCH_BEHIND_BY++ )) ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a31515">&amp;#34;&amp;gt;*&amp;#34;&lt;/span>) (( __POSH_BRANCH_AHEAD_BY++ )) ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">done&lt;/span> &amp;lt;&amp;lt;&amp;lt; $output
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> : &lt;span style="color:#a31515">${&lt;/span>__POSH_BRANCH_AHEAD_BY:=0&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> : &lt;span style="color:#a31515">${&lt;/span>__POSH_BRANCH_BEHIND_BY:=0&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">return&lt;/span> $return_code
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-5031ca221e07b7b75505d712cf89d822">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-5031ca221e07b7b75505d712cf89d822','highlight-file_opened')">idea.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/idea.sh" title="下载 idea.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/idea.sh" title="源码 idea.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __idea_open {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dir=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$@&lt;span style="color:#a31515">[&lt;/span>$#&lt;span style="color:#a31515">]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;idea &lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> idea &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-80caa0ff2627a8a7a2c19a5f9997618e">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-80caa0ff2627a8a7a2c19a5f9997618e','highlight-file_opened')">mac.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/mac.sh" title="下载 mac.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/mac.sh" title="源码 mac.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>autoload -Uz compinit &amp;amp;&amp;amp; compinit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source &lt;span style="color:#00f">$(&lt;/span>dirname $0&lt;span style="color:#00f">)&lt;/span>/a.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://adoptium.net/temurin/releases?version=11&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># tar xvf openjdk.tar.gz ${MY_HOME_APP}/_java11&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># /usr/libexec/java_home -v 1.8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export JAVA_8_HOME=&lt;span style="color:#a31515">${&lt;/span>MY_HOME_APP&lt;span style="color:#a31515">}&lt;/span>/_java8/Contents/Home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export JAVA_11_HOME=&lt;span style="color:#a31515">${&lt;/span>MY_HOME_APP&lt;span style="color:#a31515">}&lt;/span>/_java11/Contents/Home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export JAVA_17_HOME=&lt;span style="color:#a31515">${&lt;/span>MY_HOME_APP&lt;span style="color:#a31515">}&lt;/span>/_java17/Contents/Home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export JAVA_21_HOME=&lt;span style="color:#a31515">${&lt;/span>MY_HOME_APP&lt;span style="color:#a31515">}&lt;/span>/_java21/Contents/Home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export JAVA_HOME=$JAVA_8_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>launchctl setenv JAVA_HOME $JAVA_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>launchctl setenv M2_HOME $M2_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>launchctl setenv MAVEN_HOME $MAVEN_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>launchctl setenv MAVEN_OPTS $MAVEN_OPTS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>launchctl setenv GRADLE_HOME $GRADLE_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>launchctl setenv GRADLE_USER_HOME $GRADLE_USER_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># https://github.com/ggreer/lscolors&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export CLICOLOR=1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__directory_add_quick_access &lt;span style="color:#a31515">${&lt;/span>MY_HOME&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__directory_add_quick_access &lt;span style="color:#a31515">${&lt;/span>MY_HOME_CODE&lt;span style="color:#a31515">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>__directory_add_quick_access &lt;span style="color:#a31515">${&lt;/span>MY_HOME&lt;span style="color:#a31515">}&lt;/span>/_github
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">#__directory_add_to_quick_access ${MY_HOME_APP}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">if&lt;/span> [ -f &lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#a31515">${&lt;/span>MY_HOME&lt;span style="color:#a31515">}&lt;/span>&lt;span style="color:#a31515">/_shell/a.sh&amp;#34;&lt;/span> ]; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> source &lt;span style="color:#a31515">${&lt;/span>MY_HOME&lt;span style="color:#a31515">}&lt;/span>/_shell/a.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">fi&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-df252f72ea205d948fe69db4255debbc">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-df252f72ea205d948fe69db4255debbc','highlight-file_opened')">vscode.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/vscode.sh" title="下载 vscode.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/vscode.sh" title="源码 vscode.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00f">function&lt;/span> __vscode_open {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dir=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$@&lt;span style="color:#a31515">[&lt;/span>$#&lt;span style="color:#a31515">]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#a31515">&amp;#34;code &lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> code &lt;span style="color:#a31515">&amp;#34;&lt;/span>$dir&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-42aadfb32b7778ab48cc4965773f3cd8">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-42aadfb32b7778ab48cc4965773f3cd8','highlight-file_opened')">zsh-compdef.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/zsh-compdef.sh" title="下载 zsh-compdef.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/zsh-compdef.sh" title="源码 zsh-compdef.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>setopt completealiases
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>compdef __directory_search_quick_access_complete c
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>compdef __directory_search_quick_access_complete d
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>compdef __directory_search_quick_access_complete i&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;div class="highlight-file" id="hfs-aa86623e82b21d088605e5c16e506a1b">
 &lt;div class="highlight-file-header">
 &lt;a class="fa fa-plus highlight-file-switch" onclick="blog.toggleClassName('hfs-aa86623e82b21d088605e5c16e506a1b','highlight-file_opened')">zsh-prompt.sh&lt;/a>
 &lt;a class="fa fa-download highlight-file-download" target="_blank" href="https://linianhui.github.io/linux/script/zsh-prompt.sh" title="下载 zsh-prompt.sh" download>&lt;/a>
 &lt;a class="fa fa-github" target="_blank" href="https://github.com/linianhui/blog/blob/main/src/linux/script/zsh-prompt.sh" title="源码 zsh-prompt.sh">&lt;/a>
 &lt;/div>
 &lt;div class="highlight-file-content">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># zsh http://www.zsh.org/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># precmd http://zsh.sourceforge.net/Doc/Release/Functions.html#Hook-Functions&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># Prompt-Expansion http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html#Prompt-Expansion&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># __posh_git_echo https://github.com/lyze/posh-git-sh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unsetopt PROMPT_SP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setopt prompt_subst
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000"># RPROMPT=&amp;#34;[%(?.%F{green}%?%f.%F{red}%?%f)]&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>precmd(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> USER_TYPE=&lt;span style="color:#a31515">&amp;#39;%(!.#.$)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NEW_LINE=&lt;span style="color:#a31515">$&amp;#39;\n&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> LAST_EXIT_CODE=&lt;span style="color:#a31515">&amp;#34;%(?..%F{red}%?%f)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TIME=&lt;span style="color:#00f">$(&lt;/span>gdate +&lt;span style="color:#a31515">&amp;#39;%y-%m-%d %T %:z %s%3N w%u d%-j&amp;#39;&lt;/span>&lt;span style="color:#00f">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> COMMON_PROMPT=&lt;span style="color:#a31515">&amp;#39;$NEW_LINE%F{green}$USER_TYPE%f %d $TIME $LAST_EXIT_CODE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> INPUT_PROMPT=&lt;span style="color:#a31515">&amp;#39;$NEW_LINE&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">if&lt;/span> git rev-parse --git-dir &amp;gt; /dev/null 2&amp;gt;&amp;amp;1; &lt;span style="color:#00f">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> GIT_USER=&lt;span style="color:#a31515">&amp;#34;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git config user.name&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">@&amp;lt;&lt;/span>&lt;span style="color:#00f">$(&lt;/span>git config user.email&lt;span style="color:#00f">)&lt;/span>&lt;span style="color:#a31515">&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> GIT_PROMPT=&lt;span style="color:#a31515">&amp;#39;$NEW_LINE%F{green}$USER_TYPE $GIT_USER%f %F{red}%1d%f $(__posh_git_echo)&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PROMPT=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$COMMON_PROMPT&lt;span style="color:#a31515"> &lt;/span>$GIT_PROMPT&lt;span style="color:#a31515"> &lt;/span>$INPUT_PROMPT&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PROMPT=&lt;span style="color:#a31515">&amp;#34;&lt;/span>$COMMON_PROMPT&lt;span style="color:#a31515"> &lt;/span>$INPUT_PROMPT&lt;span style="color:#a31515">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00f">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
 &lt;/div>&lt;/div>
&lt;/div></description></item></channel></rss>