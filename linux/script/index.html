<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="X6gTMGCy1-_vb5i3aja3ZZyzPY3raiKRJp4VIhOAX24"><meta name=msvalidate.01 content="CDE7502649B75529BD0FCFE89B056E38"><title>[Linux] Script - Timetombs</title>
<link rel=icon type=image/svg href=/favicon.svg><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/normalize/8.0.1/normalize.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href='/asset/blog.css?time=2026-01-25T21%3a48%3a01Z%2b08%3a00' rel=stylesheet type=text/css><script src=https://s4.zstatic.net/npm/currency.js@2.0.4/dist/currency.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://s4.zstatic.net/ajax/libs/moment.js/2.30.1/moment.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src='/asset/blog.js?time=2026-01-25T21%3a48%3a01Z%2b08%3a00' type=application/javascript></script><script type=text/javascript>blog.isMobile()&&document.write('<link href="/asset/blog.mobile.css?time=2026-01-25T21%3A48%3A01Z%2B08%3A00" rel="stylesheet">')</script></head><body><div id=horizontal-progress class=horizontal-progress></div><aside id=toc class=toc><section class=toc-header><a class=toc-page-title href=/linux/ target=_blank>[Linux]</a></section><section class="toc-page selected"><span class=toc-page-title>[Linux] Script</span><nav id=TableOfContents><ul><li><a href=#script-highlight-files>1 Script File List</a></li></ul></nav></section><section class=toc-page><a class=toc-page-title href=/linux/ssh/ target=_blank>[Linux] SSH</a></section><section class=toc-page><a class=toc-page-title href=/linux/systemd/ target=_blank>[Linux] systemd</a></section><section class=toc-page><a class=toc-page-title href=/linux/ubuntu/ target=_blank>[Linux] Ubuntu</a></section><section class=toc-page><a class=toc-page-title href=/linux/centos/ target=_blank>[Linux] CentOS</a></section><section class=toc-page><a class=toc-page-title href=/linux/top/ target=_blank>[Linux] top</a></section><section class=toc-page><a class=toc-page-title href=/linux/debian/ target=_blank>[Linux] Debian</a></section><script type=text/javascript>blog.isPC()&&blog.toggleToc()</script></aside><main class=main><header class=header><hgroup class=header-hgroup><h1 class=header-hgroup-title><a href=/>Timetombs</a></h1><h2 class=header-hgroup-subtitle>泛义的工具是文明的基础，而确指的工具却是愚人的器物</h2></hgroup><nav class=header-nav><a class=header-nav-item href=/topic/ title=专题 target=_self><i class="fa fa-folder"></i>专题</a>
<a class=header-nav-item href=/tag/ title=标签 target=_self><i class="fa fa-tags"></i>标签</a>
<a class=header-nav-item href=/archive/ title=归档 target=_self><i class="fa fa-archive"></i>归档</a>
<a class=header-nav-item href=https://linianhui.cnblogs.com title=博客园 target=_black><img src=/asset/cnblogs.favicon.svg>博客园</a>
<a class=header-nav-item href=https://github.com/linianhui/blog title=GitHub target=_black><i class="fa fa-github"></i>GitHub</a></nav><div class=header-stats><div class=stats><span>共
<i>66<sub>h</sub>
</i>/
<i>118<sub>a</sub>
</i>篇</span><div class=stats-date>，更新于 2026-01-25T21:48:01Z+08:00 by &nbsp;
<a class=git-commit href=https://github.com/linianhui/blog/commit/39b6c03faec1d2881596df2cd2436da10cdf9eef target=_blank><i class="fa fa-code-fork"></i>39b6c03</a></div></div><form class=search method=GET target=_blank action=https://www.bing.com/search><input name=q class=search-input type=search placeholder=search... results=5 onkeypress="search_param.value=search_param_site.value+this.value">
<input id=search_param_site type=hidden value="site:linianhui.github.io ">
<input name=q id=search_param type=hidden></form></div></header><main class=content><article class=article><h1 class=article-title>[Linux] Script</h1><div class=article-copyright><span>版权声明 - </span><a href=/copyright/cc target=_blank>CC BY-NC-SA 4.0</a></div><section class=article-meta><section class=article-date>2017-01-01 09:42，约3259字，阅读约7分钟</section><section class=article-topics><a class=article-topic href=/linux/ title=[Linux] target=_blank><i class="fa fa-folder"></i>[Linux]</a></section><section class=article-tags><a class=article-tag href=/tag/linux target=_blank><i class="fa fa-tag"></i>Linux</a>
<a class=article-tag href=/tag/sh target=_blank><i class="fa fa-tag"></i>sh</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/d9c69b17efc053ed8acfd76b7d992a6fec64dc6d target=_blank><i class="fa fa-code-fork"></i>d9c69b1</a>
<span class=article-git-commit-subject>upgrade homebrew</span>
<span class=article-git-commit-time>2024-12-21 12:19</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/linux/script/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-content><h1 id=script-highlight-files><i id=locator-script-highlight-files class=header-locator></i>
<a href=#script-highlight-files class=article-h-a>1 Script File List</a></h1><div class=highlight-files><div class=highlight-files-header>sh文件列表</div><div class=highlight-files-list><div class=highlight-file id=hfs-673b4bcc142c03a1c8bdf16062db655f><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-673b4bcc142c03a1c8bdf16062db655f","highlight-file_opened")'>a.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/a.sh title="下载 a.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/a.sh title="源码 a.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># .zshrc(z shell run commands)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/env.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function-byte.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function-string.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function-directory.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function-git.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function-proc.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/function-date.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/git-prompt.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/zsh-prompt.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/vscode.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/idea.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/zsh-compdef.sh
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/alias.sh</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-ea916535a94ec9aace802401c3435d1a><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-ea916535a94ec9aace802401c3435d1a","highlight-file_opened")'>alias.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/alias.sh title="下载 alias.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/alias.sh title="源码 alias.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># alias</span>
</span></span><span style=display:flex><span>alias ..=<span style=color:#a31515>&#39;cd ..&#39;</span>
</span></span><span style=display:flex><span>alias ...=<span style=color:#a31515>&#39;cd ../..&#39;</span>
</span></span><span style=display:flex><span>alias b=<span style=color:#a31515>&#39;__byte_unit&#39;</span>
</span></span><span style=display:flex><span>alias d=<span style=color:#a31515>&#39;__directory_to&#39;</span>
</span></span><span style=display:flex><span>alias c=<span style=color:#a31515>&#39;__vscode_open&#39;</span>
</span></span><span style=display:flex><span>alias i=<span style=color:#a31515>&#39;__idea_open&#39;</span>
</span></span><span style=display:flex><span>alias t=<span style=color:#a31515>&#39;__timestamp&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias dr=<span style=color:#a31515>&#39;docker run --rm --tty --interactive&#39;</span>
</span></span><span style=display:flex><span>alias dre=<span style=color:#a31515>&#39;dr --entrypoint&#39;</span>
</span></span><span style=display:flex><span>alias drs=<span style=color:#a31515>&#39;dre sh&#39;</span>
</span></span><span style=display:flex><span>alias drb=<span style=color:#a31515>&#39;dre bash&#39;</span>
</span></span><span style=display:flex><span>alias dh=<span style=color:#a31515>&#39;docker history --human --no-trunc&#39;</span>
</span></span><span style=display:flex><span>alias dc=<span style=color:#a31515>&#39;docker-compose&#39;</span>
</span></span><span style=display:flex><span>alias dm=<span style=color:#a31515>&#39;docker-machine&#39;</span>
</span></span><span style=display:flex><span>alias mk=<span style=color:#a31515>&#39;minikube&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias h=<span style=color:#a31515>&#39;history | grep&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias md=<span style=color:#a31515>&#39;mkdir -p&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias bak=<span style=color:#a31515>&#39;backup_file&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias cls=<span style=color:#a31515>&#39;clear&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias grep=<span style=color:#a31515>&#39;grep --color=auto&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias untar=<span style=color:#a31515>&#39;tar -z -x -v -f&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias wget=<span style=color:#a31515>&#39;wget --continue --show-progress&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias sha=<span style=color:#a31515>&#39;shasum --algorithm 1&#39;</span>
</span></span><span style=display:flex><span>alias sha256=<span style=color:#a31515>&#39;shasum --algorithm 256&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias ping=<span style=color:#a31515>&#39;ping -c 5&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias ipe=<span style=color:#a31515>&#39;curl http://ifconfig.me/ip&#39;</span>
</span></span><span style=display:flex><span>alias ipl=<span style=color:#a31515>&#39;ipconfig getifaddr en0&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias hs=<span style=color:#a31515>&#39;miniserve --color-scheme squirrel --qrcode&#39;</span>
</span></span><span style=display:flex><span>alias hsu=<span style=color:#a31515>&#39;hs --upload-files&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias pfd=<span style=color:#a31515>&#39;rinetd --conf-file ${MY_HOME_CODE_BLOG}/src/tool/rinetd/rinetd.conf&#39;</span>
</span></span><span style=display:flex><span>alias pf=<span style=color:#a31515>&#39;pfd --foreground&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias env=<span style=color:#a31515>&#39;env | sort&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias penv=<span style=color:#a31515>&#39;proc_env&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias penv2=<span style=color:#a31515>&#39;proc_env2&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html</span>
</span></span><span style=display:flex><span>alias path=<span style=color:#a31515>&#39;echo &#34;${PATH//:/\n}&#34;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/jeremyfa/yaml.js</span>
</span></span><span style=display:flex><span><span style=color:green># cnpm install -yamljs -g</span>
</span></span><span style=display:flex><span>alias yj=<span style=color:#a31515>&#39;yaml2json --pretty --indentation 2&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias jy=<span style=color:#a31515>&#39;json2yaml --depth 64 --indentation 2&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias shell=<span style=color:#a31515>&#39;echo $SHELL&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias shells=<span style=color:#a31515>&#39;cat /etc/shells&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias i18n=<span style=color:#a31515>&#39;locale&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias hu=<span style=color:#a31515>&#39;hugo --config hugo.yml --buildDrafts --forceSyncStatic --panicOnWarning&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias hus=<span style=color:#a31515>&#39;hu --watch server&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias mvn-wrapper=<span style=color:#a31515>&#39;mvn --non-recursive --debug io.takari:maven:wrapper -Dmaven=3.8.1&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias gradle-wrapper=<span style=color:#a31515>&#39;gradle wrapper --distribution-type all --gradle-version 6.7&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias mvn-help=<span style=color:#a31515>&#39;./mvnw help:describe -Ddetail&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias java-x=<span style=color:#a31515>&#39;java -X&#39;</span>
</span></span><span style=display:flex><span>alias java-xx=<span style=color:#a31515>&#39;java -XX:+UnlockDiagnosticVMOptions -XX:+UnlockExperimentalVMOptions -XX:+PrintFlagsFinal -version&#39;</span>
</span></span><span style=display:flex><span>alias java8=<span style=color:#a31515>&#39;export JAVA_HOME=$JAVA_8_HOME &amp;&amp; java -version&#39;</span>
</span></span><span style=display:flex><span>alias java11=<span style=color:#a31515>&#39;export JAVA_HOME=$JAVA_11_HOME &amp;&amp; java -version&#39;</span>
</span></span><span style=display:flex><span>alias java17=<span style=color:#a31515>&#39;export JAVA_HOME=$JAVA_17_HOME &amp;&amp; java -version&#39;</span>
</span></span><span style=display:flex><span>alias java21=<span style=color:#a31515>&#39;export JAVA_HOME=$JAVA_21_HOME &amp;&amp; java -version&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias proxy=<span style=color:#a31515>&#39;export ALL_PROXY=socks5://127.0.0.1:1080&#39;</span>
</span></span><span style=display:flex><span>alias unproxy=<span style=color:#a31515>&#39;unset ALL_PROXY&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias redis-server=<span style=color:#a31515>&#39;redis-server ${MY_HOME_CODE_BLOG}/src/redis/install/redis.conf&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias ja=<span style=color:#a31515>&#39;java -jar $JAVA_HOME/arthas-boot.jar --repo-mirror aliyun --use-http&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias master=<span style=color:#a31515>&#39;git co master&#39;</span>
</span></span><span style=display:flex><span>alias main=<span style=color:#a31515>&#39;git co main&#39;</span>
</span></span><span style=display:flex><span>alias g=<span style=color:#a31515>&#39;git&#39;</span>
</span></span><span style=display:flex><span>alias gti=<span style=color:#a31515>&#39;git&#39;</span>
</span></span><span style=display:flex><span>alias gi=<span style=color:#a31515>&#39;git&#39;</span>
</span></span><span style=display:flex><span><span style=color:green># java -cp $JAVA_HOME/lib/sa-jdi.jar sun.jvm.hotspot.HSDB</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>alias k=<span style=color:#a31515>&#39;kubectl&#39;</span>
</span></span><span style=display:flex><span>alias kp=<span style=color:#a31515>&#39;k get pods&#39;</span>
</span></span><span style=display:flex><span>alias kpt=<span style=color:#a31515>&#39;kp -o custom-columns-file=${MY_HOME_CODE_BLOG}/src/k8s/kubectl/terminated-pod.txt --sort-by=&#34;{.status.containerStatuses[0].lastState.terminated.finishedAt}&#34;&#39;</span></span></span></code></pre></div></div></div><div class=highlight-file id=hfs-3401a71ee0e2261a6c55a568459da176><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-3401a71ee0e2261a6c55a568459da176","highlight-file_opened")'>env.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/env.sh title="下载 env.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/env.sh title="源码 env.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>export MY_HOME=/lnh
</span></span><span style=display:flex><span>export MY_HOME_APP=$MY_HOME/_app
</span></span><span style=display:flex><span>export MY_HOME_CACHE=$MY_HOME/_cache
</span></span><span style=display:flex><span>export MY_HOME_CODE=<span style=color:#a31515>${</span>MY_HOME<span style=color:#a31515>}</span>/_code
</span></span><span style=display:flex><span>export MY_HOME_CODE_BLOG=<span style=color:#a31515>${</span>MY_HOME_CODE<span style=color:#a31515>}</span>/_code/blog
</span></span><span style=display:flex><span>export MY_HOME_CONFIG=$MY_HOME/_config
</span></span><span style=display:flex><span>export MY_HOME_DATA=$MY_HOME/_data
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># add gnu</span>
</span></span><span style=display:flex><span>PATH=/usr/local/opt/coreutils/libexec/gnubin:$PATH
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html</span>
</span></span><span style=display:flex><span>export XDG_CACHE_HOME=$MY_HOME_CACHE
</span></span><span style=display:flex><span>export XDG_CONFIG_HOME=$MY_HOME_CONFIG
</span></span><span style=display:flex><span>export XDG_DATA_HOME=$MY_HOME_DATA
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://docs.microsoft.com/en-us/dotnet/core/tools/telemetry</span>
</span></span><span style=display:flex><span><span style=color:green># https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-tool-install</span>
</span></span><span style=display:flex><span>export DOTNET_CLI_TELEMETRY_OPTOUT=false
</span></span><span style=display:flex><span>APP_DOTNET_DIR=$MY_HOME_APP/_dotnet
</span></span><span style=display:flex><span>DOTNET_TOOLS_DIR=$HOME/.dotnet/tools
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_DOTNET_DIR:$DOTNET_TOOLS_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://adoptopenjdk.net/releases.html?variant=openjdk11&amp;jvmVariant=hotspot</span>
</span></span><span style=display:flex><span><span style=color:green># APP_JAVA_DIR=$MY_HOME_APP/_java</span>
</span></span><span style=display:flex><span><span style=color:green># APP_JAVA_BIN_DIR=$APP_JAVA_DIR/bin</span>
</span></span><span style=display:flex><span><span style=color:green># export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8</span>
</span></span><span style=display:flex><span><span style=color:green># export JAVA_HOME=$APP_JAVA_DIR</span>
</span></span><span style=display:flex><span><span style=color:green># export PATH=$PATH:$APP_JAVA_BIN_DIR</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://gradle.org/releases/</span>
</span></span><span style=display:flex><span>APP_GRADLE_DIR=$MY_HOME_APP/_gradle
</span></span><span style=display:flex><span>APP_GRADLE_BIN_DIR=$APP_GRADLE_DIR/bin
</span></span><span style=display:flex><span>CACHE_GRADLE_DIR=$MY_HOME_CACHE/_gradle
</span></span><span style=display:flex><span>export GRADLE_HOME=$APP_GRADLE_DIR
</span></span><span style=display:flex><span>export GRADLE_USER_HOME=$CACHE_GRADLE_DIR
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_GRADLE_BIN_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://maven.apache.org/</span>
</span></span><span style=display:flex><span><span style=color:green># http://maven.apache.org/configure.html</span>
</span></span><span style=display:flex><span>APP_MAVEN_DIR=$MY_HOME_APP/_maven
</span></span><span style=display:flex><span>APP_MAVEN_BIN_DIR=$APP_MAVEN_DIR/bin
</span></span><span style=display:flex><span>CACHE_MAVEN_DIR=$MY_HOME_CACHE/_maven
</span></span><span style=display:flex><span>export MAVEN_HOME=$APP_MAVEN_DIR
</span></span><span style=display:flex><span>export M2_HOME=$MAVEN_HOME
</span></span><span style=display:flex><span>export MAVEN_USER_HOME=$MAVEN_HOME
</span></span><span style=display:flex><span>export MAVEN_OPTS=<span style=color:#a31515>&#39;-Xms256m -Xmx1024m&#39;</span>
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_MAVEN_BIN_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://projects.spring.io/spring-boot/</span>
</span></span><span style=display:flex><span><span style=color:green># APP_SPRING_BOOT_CLI_DIR=$MY_HOME_APP/_spring-boot-cli</span>
</span></span><span style=display:flex><span><span style=color:green># APP_SPRING_BOOT_CLI_BIN_DIR=$APP_SPRING_BOOT_CLI_DIR/bin</span>
</span></span><span style=display:flex><span><span style=color:green># export PATH=$PATH:$APP_SPRING_BOOT_CLI_BIN_DIR</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://www.mono-project.com/</span>
</span></span><span style=display:flex><span><span style=color:green># export MONO_HOME=/Library/Frameworks/Mono.framework/Versions/5.0.1</span>
</span></span><span style=display:flex><span><span style=color:green># export MONO_HOME_BIN=$MONO_HOME/bin</span>
</span></span><span style=display:flex><span><span style=color:green># export PATH=$PATH:$MONO_HOME_BIN</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://docs.docker.com/engine/reference/commandline/cli/</span>
</span></span><span style=display:flex><span><span style=color:green># https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-socket-option</span>
</span></span><span style=display:flex><span>APP_DOCKER_DIR=$MY_HOME_APP/_docker
</span></span><span style=display:flex><span>CONFIG_DOCKER_DIR=$MY_HOME_CONFIG/_docker
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_DOCKER_DIR
</span></span><span style=display:flex><span>export DOCKER_HOST=<span style=color:#a31515>&#39;tcp://127.0.0.1:2375&#39;</span>
</span></span><span style=display:flex><span>export DOCKER_CONFIG=$CONFIG_DOCKER_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://docs.docker.com/machine/</span>
</span></span><span style=display:flex><span><span style=color:green># https://docs.docker.com/machine/drivers/virtualbox/</span>
</span></span><span style=display:flex><span><span style=color:green># DATA_DOCKER_DIR=$MY_HOME_DATA/_docker</span>
</span></span><span style=display:flex><span><span style=color:green>#export DOCKER_HOME=$APP_DOCKER_DIR</span>
</span></span><span style=display:flex><span><span style=color:green>#export MACHINE_STORAGE_PATH=$DATA_DOCKER_DIR</span>
</span></span><span style=display:flex><span><span style=color:green>#export VIRTUALBOX_BOOT2DOCKER_URL=$DOCKER_HOME/boot2docker.iso</span>
</span></span><span style=display:flex><span><span style=color:green>#export VIRTUALBOX_UI_TYPE=headless</span>
</span></span><span style=display:flex><span><span style=color:green>#export VIRTUALBOX_CPU_COUNT=1</span>
</span></span><span style=display:flex><span><span style=color:green>#export VIRTUALBOX_MEMORY_SIZE=512</span>
</span></span><span style=display:flex><span><span style=color:green>#export VIRTUALBOX_DISK_SIZE=5120</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://kubernetes.io/docs/tasks/tools/install-kubectl/</span>
</span></span><span style=display:flex><span>APP_KUBECTL_DIR=$MY_HOME_APP/_kubectl
</span></span><span style=display:flex><span>CONFIG_KUBECTL_DIR=$MY_HOME_CONFIG/_kubectl
</span></span><span style=display:flex><span>CONFIG_KUBECTL_CONFIG_FILE=$CONFIG_KUBECTL_DIR/config.yml
</span></span><span style=display:flex><span>export KUBECONFIG=$CONFIG_KUBECTL_CONFIG_FILE
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_KUBECTL_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://kubernetes.io/docs/tasks/tools/install-minikube/</span>
</span></span><span style=display:flex><span><span style=color:green># APP_MINIKUBE_DIR=$MY_HOME_APP/_minikube</span>
</span></span><span style=display:flex><span><span style=color:green># DATA_MINIKUBE_DIR=$MY_HOME_DATA/_minikube</span>
</span></span><span style=display:flex><span><span style=color:green># export MINIKUBE_HOME=$DATA_MINIKUBE_DIR</span>
</span></span><span style=display:flex><span><span style=color:green># export MINIKUBE_WANTUPDATENOTIFICATION=false</span>
</span></span><span style=display:flex><span><span style=color:green># export MINIKUBE_WANTREPORTERRORPROMPT=false</span>
</span></span><span style=display:flex><span><span style=color:green># export CHANGE_MINIKUBE_NONE_USER=true</span>
</span></span><span style=display:flex><span><span style=color:green># export PATH=$PATH:$APP_MINIKUBE_DIR</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://helm.sh/docs</span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/helm/helm-www</span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/helm/helm/releases</span>
</span></span><span style=display:flex><span>APP_HELM_DIR=$MY_HOME_APP/_helm
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_HELM_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/mholt/caddy</span>
</span></span><span style=display:flex><span><span style=color:green># https://caddyserver.com/docs/cli</span>
</span></span><span style=display:flex><span><span style=color:green># APP_CADDY_DIR=$MY_HOME_APP/_caddy</span>
</span></span><span style=display:flex><span><span style=color:green># export PATH=$PATH:$APP_CADDY_DIR</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/v2ray/v2ray-core</span>
</span></span><span style=display:flex><span>APP_V2RAY_DIR=$MY_HOME_APP/_v2ray
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_V2RAY_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://www.rust-lang.org/</span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/rust-lang/rustup.rs#environment-variables</span>
</span></span><span style=display:flex><span>APP_RUSTUP_DIR=$MY_HOME_APP/_rustup
</span></span><span style=display:flex><span>export RUSTUP_HOME=$APP_RUSTUP_DIR
</span></span><span style=display:flex><span>export RUSTUP_DIST_SERVER=http://mirrors.ustc.edu.cn/rust-static
</span></span><span style=display:flex><span>export RUSTUP_UPDATE_ROOT=http://mirrors.ustc.edu.cn/rust-static/rustup
</span></span><span style=display:flex><span><span style=color:green># https://github.com/rust-lang/cargo/blob/master/src/doc/src/reference/environment-variables.md</span>
</span></span><span style=display:flex><span>APP_CARGO_DIR=$MY_HOME_APP/_cargo
</span></span><span style=display:flex><span>APP_CARGO_BIN_DIR=$APP_CARGO_DIR/bin
</span></span><span style=display:flex><span>export CARGO_HOME=$APP_CARGO_DIR
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_CARGO_BIN_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/gohugoio/hugo</span>
</span></span><span style=display:flex><span>APP_HUGO_DIR=$MY_HOME_APP/_hugo
</span></span><span style=display:flex><span>CACHE_HUGO_DIR=$MY_HOME_CACHE/_hugo
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_HUGO_DIR
</span></span><span style=display:flex><span>export HUGO_CACHEDIR=$CACHE_HUGO_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://nodejs.org/en/download/</span>
</span></span><span style=display:flex><span>APP_NODE_DIR=$MY_HOME_APP/_node
</span></span><span style=display:flex><span>APP_NODE_BIN_DIR=$APP_NODE_DIR/bin
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_NODE_BIN_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://brew.sh</span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/Homebrew/brew</span>
</span></span><span style=display:flex><span><span style=color:green># https://developer.aliyun.com/mirror/homebrew</span>
</span></span><span style=display:flex><span><span style=color:green># /bin/bash -c &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&#34;</span>
</span></span><span style=display:flex><span>export HOMEBREW_API_DOMAIN=https://mirrors.aliyun.com/homebrew-bottles/api
</span></span><span style=display:flex><span>export HOMEBREW_BREW_GIT_REMOTE=https://mirrors.aliyun.com/homebrew/brew.git
</span></span><span style=display:flex><span>export HOMEBREW_CORE_GIT_REMOTE=https://mirrors.aliyun.com/homebrew/homebrew-core.git
</span></span><span style=display:flex><span>export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://www.db.com/download-center/community</span>
</span></span><span style=display:flex><span>APP_MONGO_DIR=$MY_HOME_APP/_mongo
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_MONGO_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://linianhui.github.io/redis/00-install</span>
</span></span><span style=display:flex><span>APP_REDIS_DIR=$MY_HOME_APP/_redis
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_REDIS_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://dev.mysql.com/downloads/mysql/</span>
</span></span><span style=display:flex><span><span style=color:green># https://dev.mysql.com/doc/refman/8.0/en/environment-variables.html</span>
</span></span><span style=display:flex><span>APP_MYSQL_DIR=$MY_HOME_APP/_mysql
</span></span><span style=display:flex><span>CACHE_MYSQL_MY_HOME_CONFIG=$XDG_CACHE_HOME/_mysql
</span></span><span style=display:flex><span>export MYSQL_HOME=$APP_MYSQL_DIR
</span></span><span style=display:flex><span>APP_MYSQL_BIN_DIR=$MYSQL_HOME/bin
</span></span><span style=display:flex><span>export MYSQL_HISTFILE=$CACHE_MYSQL_MY_HOME_CONFIG/.history
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_MYSQL_BIN_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/svenstaro/miniserve</span>
</span></span><span style=display:flex><span>APP_MINISERVE_DIR=$MY_HOME_APP/_miniserve
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_MINISERVE_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># http://www.rinetd.com/</span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/samhocevar/rinetd</span>
</span></span><span style=display:flex><span>APP_RINETD_DIR=$MY_HOME_APP/_rinetd
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_RINETD_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/wagoodman/dive</span>
</span></span><span style=display:flex><span>APP_DIVE_DIR=$MY_HOME_APP/_dive
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_DIVE_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://jmeter.apache.org/download_jmeter.cgi</span>
</span></span><span style=display:flex><span>APP_JMETER_DIR=$MY_HOME_APP/_jmeter
</span></span><span style=display:flex><span>APP_JMETER_BIN_DIR=$APP_JMETER_DIR/bin
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_JMETER_BIN_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># iperf2 https://sourceforge.net/projects/iperf2/</span>
</span></span><span style=display:flex><span><span style=color:green># iperf3 https://iperf.fr/</span>
</span></span><span style=display:flex><span>APP_IPERF_DIR=$MY_HOME_APP/_iperf
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_IPERF_DIR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># 杂项工具</span>
</span></span><span style=display:flex><span>APP_OTHER_DIR=$MY_HOME_APP/_other
</span></span><span style=display:flex><span>export PATH=$PATH:$APP_OTHER_DIR
</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-0c94694190878711eb097bc5bbd8d2b4><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-0c94694190878711eb097bc5bbd8d2b4","highlight-file_opened")'>function-byte.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function-byte.sh title="下载 function-byte.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function-byte.sh title="源码 function-byte.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#00f></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __byte_unit(){
</span></span><span style=display:flex><span>    originNumber=<span style=color:#00f>$(</span>echo $1 | sed <span style=color:#a31515>&#39;s/[^0-9]//g&#39;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    originUnit=<span style=color:#00f>$(</span>echo $1 | sed <span style=color:#a31515>&#39;s/[^a-z]//g&#39;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    unitIndex=<span style=color:#00f>$(</span>__byte_1024_index $originUnit<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    byte=<span style=color:#00f>$(</span>__byte_multiply_1024 $originNumber $unitIndex<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>byte<span style=color:#a31515>}</span><span style=color:#a31515> byte&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>__byte_divided_1024 $byte 1<span style=color:#00f>)</span><span style=color:#a31515> kb&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>__byte_divided_1024 $byte 2<span style=color:#00f>)</span><span style=color:#a31515> mb&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>__byte_divided_1024 $byte 3<span style=color:#00f>)</span><span style=color:#a31515> gb&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>__byte_divided_1024 $byte 4<span style=color:#00f>)</span><span style=color:#a31515> tb&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>__byte_divided_1024 $byte 5<span style=color:#00f>)</span><span style=color:#a31515> pb&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __byte_multiply_1024(){
</span></span><span style=display:flex><span>    number=<span style=color:#a31515>${</span>1<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    count=<span style=color:#a31515>${</span>2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ <span style=color:#a31515>&#34;</span>$count<span style=color:#a31515>&#34;</span> == <span style=color:#a31515>&#34;0&#34;</span> ]
</span></span><span style=display:flex><span>    <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo $number
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        byte1024=<span style=color:#00f>$((</span>1024**$count<span style=color:#00f>))</span>
</span></span><span style=display:flex><span>        echo <span style=color:#00f>$((</span>$number*byte1024<span style=color:#00f>))</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __byte_divided_1024(){
</span></span><span style=display:flex><span>    number=<span style=color:#a31515>${</span>1<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    count=<span style=color:#a31515>${</span>2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ <span style=color:#a31515>&#34;</span>$count<span style=color:#a31515>&#34;</span> == <span style=color:#a31515>&#34;0&#34;</span> ]
</span></span><span style=display:flex><span>    <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo $number
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        byte1024=<span style=color:#00f>$((</span>1024**$count<span style=color:#00f>))</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;scale=2; </span>$number<span style=color:#a31515> / </span>$byte1024<span style=color:#a31515>&#34;</span> | bc
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __byte_1024_index(){
</span></span><span style=display:flex><span>    fullUnit=<span style=color:#a31515>${</span>1,,<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    unit=<span style=color:#a31515>${</span>fullUnit:0:1<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> $unit in
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;b&#34;</span>)
</span></span><span style=display:flex><span>            echo 0
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;k&#34;</span>)
</span></span><span style=display:flex><span>            echo 1
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;m&#34;</span>)
</span></span><span style=display:flex><span>            echo 2
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;g&#34;</span>)
</span></span><span style=display:flex><span>            echo 3
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;t&#34;</span>)
</span></span><span style=display:flex><span>            echo 4
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>        <span style=color:#a31515>&#34;p&#34;</span>)
</span></span><span style=display:flex><span>            echo 5
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>        *)
</span></span><span style=display:flex><span>            echo <span style=color:#a31515>&#34;not support&#34;</span>
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-55148c33b4d259e140e55fb5a77b6295><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-55148c33b4d259e140e55fb5a77b6295","highlight-file_opened")'>function-date.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function-date.sh title="下载 function-date.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function-date.sh title="源码 function-date.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#00f></span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __timestamp(){
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [[ $# == 2 ]]
</span></span><span style=display:flex><span>    <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        __iso8601_2_timestamp $1
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        __timestamp_2_iso8601 $1
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __timestamp_2_iso8601(){
</span></span><span style=display:flex><span>    timestampSecond=<span style=color:#a31515>${</span>1:0:10<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    millisecond=<span style=color:#00f>$(</span>printf <span style=color:#a31515>&#34;.%03d&#34;</span> <span style=color:#a31515>${</span>1:10:3<span style=color:#a31515>}</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    date --date=<span style=color:#a31515>&#34;@</span>$timestampSecond<span style=color:#a31515>&#34;</span> <span style=color:#a31515>&#34;+%FT%T</span><span style=color:#a31515>${</span>millisecond<span style=color:#a31515>}</span><span style=color:#a31515>Z%:z&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __iso8601_2_timestamp(){
</span></span><span style=display:flex><span>    dateTimeString=<span style=color:#00f>$(</span>echo $1 | sed <span style=color:#a31515>&#39;s/[^0-9]//g&#39;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    year=<span style=color:#a31515>${</span>dateTimeString:0:4<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    month=<span style=color:#a31515>${</span>dateTimeString:4:2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    day=<span style=color:#a31515>${</span>dateTimeString:6:2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    hour=<span style=color:#a31515>${</span>dateTimeString:8:2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    minute=<span style=color:#a31515>${</span>dateTimeString:10:2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    second=<span style=color:#a31515>${</span>dateTimeString:12:2<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    millisecond=<span style=color:#a31515>${</span>dateTimeString:14:3<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    timezone=<span style=color:#a31515>&#34;+08:00&#34;</span>
</span></span><span style=display:flex><span>    iso8601=<span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>year<span style=color:#a31515>}</span><span style=color:#a31515>-</span><span style=color:#a31515>${</span>month<span style=color:#a31515>}</span><span style=color:#a31515>-</span><span style=color:#a31515>${</span>day<span style=color:#a31515>}</span><span style=color:#a31515>T</span><span style=color:#a31515>${</span>hour<span style=color:#00f>:-</span>00<span style=color:#a31515>}</span><span style=color:#a31515>:</span><span style=color:#a31515>${</span>minute<span style=color:#00f>:-</span>00<span style=color:#a31515>}</span><span style=color:#a31515>:</span><span style=color:#a31515>${</span>second<span style=color:#00f>:-</span>00<span style=color:#a31515>}</span><span style=color:#a31515>Z</span><span style=color:#a31515>${</span>timezone<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    date --date <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>iso8601<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> <span style=color:#a31515>&#34;+%s</span><span style=color:#a31515>${</span>millisecond<span style=color:#00f>:-</span>000<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-5c9c6f50e82ee8b2ba20c0390c8f1403><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-5c9c6f50e82ee8b2ba20c0390c8f1403","highlight-file_opened")'>function-directory.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function-directory.sh title="下载 function-directory.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function-directory.sh title="源码 function-directory.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>declare -a __QUICK_ACCESS_DIRECTORY=()
</span></span><span style=display:flex><span>__DELIMITER=<span style=color:#a31515>&#39;.-_ ()&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_get_dir_name {
</span></span><span style=display:flex><span>    path=<span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>:t&#34;</span>
</span></span><span style=display:flex><span>    echo $path
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_get_parent_dir_name {
</span></span><span style=display:flex><span>    dir=<span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    __directory_get_dir_name <span style=color:#00f>$(</span>dirname <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515>&#34;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_add_quick_access {
</span></span><span style=display:flex><span>    dir=<span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    delimiter=<span style=color:#a31515>&#34;.-_ ()&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -f <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515> is a file.&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -d <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>for</span> subDir in $dir/*; <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> [ -d <span style=color:#a31515>&#34;</span>$subDir<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>                subDirLowerCase=<span style=color:#a31515>${</span>subDir:l<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>                name=<span style=color:#00f>$(</span>__directory_get_dir_name $subDirLowerCase<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>                parent=<span style=color:#00f>$(</span>__directory_get_parent_dir_name $subDirLowerCase<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>                nameAbbr=<span style=color:#00f>$(</span>__string_abbr $name $__DELIMITER<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>                parentAbbr=<span style=color:#00f>$(</span>__string_abbr $parent $__DELIMITER<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>                __QUICK_ACCESS_DIRECTORY+=<span style=color:#a31515>&#34;</span>$nameAbbr<span style=color:#a31515> </span>$parentAbbr$nameAbbr<span style=color:#a31515> </span>$subDirLowerCase<span style=color:#a31515> </span>$subDir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>done</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515> is not exist.&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_list_quick_access {
</span></span><span style=display:flex><span>    print -l $__QUICK_ACCESS_DIRECTORY
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_search_quick_access {
</span></span><span style=display:flex><span>    result=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    __directory_search_quick_access_core <span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span> | sort -k1nr | <span style=color:#00f>while</span> read line
</span></span><span style=display:flex><span>    <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>        result=<span style=color:#a31515>&#34;</span>$result<span style=color:#a31515>${</span>line:2<span style=color:#a31515>}</span><span style=color:#a31515> &#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>done</span>
</span></span><span style=display:flex><span>    echo $result
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_search_quick_access_core {
</span></span><span style=display:flex><span>    search=<span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>for</span> line in $__QUICK_ACCESS_DIRECTORY; <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>        result=<span style=color:#00f>$(</span>__directory_search_quick_access_core_line $line $search<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> [[ <span style=color:#a31515>&#34;</span>$result<span style=color:#a31515>&#34;</span> != <span style=color:#a31515>&#34;&#34;</span> ]]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            echo <span style=color:#a31515>&#34;</span>$result<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>done</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_search_quick_access_core_line {
</span></span><span style=display:flex><span>    line=<span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    search=<span style=color:#a31515>&#34;</span>$2<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    cols=(<span style=color:#00f>$(</span>echo $line<span style=color:#00f>)</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    contains=<span style=color:#00f>$(</span>__string_contains $cols[1] $search<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> (( $contains == 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;9 </span>$cols<span style=color:#a31515>[4]&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    contains=<span style=color:#00f>$(</span>__string_contains $cols[2] $search<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> (( $contains == 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;8 </span>$cols<span style=color:#a31515>[4]&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    contains=<span style=color:#00f>$(</span>__string_contains $cols[3] $search<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> (( $contains == 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;7 </span>$cols<span style=color:#a31515>[4]&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    contains=<span style=color:#00f>$(</span>__string_match $cols[3] $search<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> (( $contains == 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;6 </span>$cols<span style=color:#a31515>[4]&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_to {
</span></span><span style=display:flex><span>    dir=<span style=color:#a31515>&#34;</span>$@<span style=color:#a31515>[</span>$#<span style=color:#a31515>]&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;cd </span>$dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    cd <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __directory_search_quick_access_complete {
</span></span><span style=display:flex><span>    cols=(<span style=color:#00f>$(</span>__directory_search_quick_access $words[2]<span style=color:#00f>)</span>)
</span></span><span style=display:flex><span>    _alternative <span style=color:#a31515>&#34;dir:dir:(</span>$cols<span style=color:#a31515>)&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-56b9e5e7ff3e2f8f4b3853027aa01682><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-56b9e5e7ff3e2f8f4b3853027aa01682","highlight-file_opened")'>function-git.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function-git.sh title="下载 function-git.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function-git.sh title="源码 function-git.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>function</span> __git_warn_gc () {
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;\033[32mgit reflog expire --expire=now --all \033[0m&#34;</span>
</span></span><span style=display:flex><span>    git warn-expire-reflog
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;\033[32mgit gc --prune=now --aggressive \033[0m&#34;</span>
</span></span><span style=display:flex><span>    git warn-gc-now
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;\033[32mgit count-objects -v -H \033[0m&#34;</span>
</span></span><span style=display:flex><span>    git size
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __git_proxy(){
</span></span><span style=display:flex><span>    local action=<span style=color:#a31515>${</span>1<span style=color:#00f>:-</span>get<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ $action = <span style=color:#a31515>&#39;set&#39;</span> ] ;<span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        git config --global http.proxy <span style=color:#a31515>&#39;socks5://127.0.0.1:1080&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ $action = <span style=color:#a31515>&#39;unset&#39;</span> ] ;<span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        git config --global --unset http.proxy
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    git config --global --get http.proxy
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-2136b5421b88d2c33d53ceb0af82eead><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-2136b5421b88d2c33d53ceb0af82eead","highlight-file_opened")'>function-proc.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function-proc.sh title="下载 function-proc.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function-proc.sh title="源码 function-proc.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>function</span> __proc_env(){
</span></span><span style=display:flex><span>    cat /proc/$1/environ | tr <span style=color:#a31515>&#39;\0&#39;</span> <span style=color:#a31515>&#39;\n&#39;</span> | sort
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __proc_env2(){
</span></span><span style=display:flex><span>    ps ewww -o command $1 | tr <span style=color:#a31515>&#39; &#39;</span> <span style=color:#a31515>&#39;\n&#39;</span> | sort
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-e8f501e7d14952667597cbf3f2f6a6c9><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-e8f501e7d14952667597cbf3f2f6a6c9","highlight-file_opened")'>function-string.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function-string.sh title="下载 function-string.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function-string.sh title="源码 function-string.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>#!/bin/zsh
</span></span></span><span style=display:flex><span><span style=color:#00f></span>
</span></span><span style=display:flex><span><span style=color:green># example : __string_contains abc bc</span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __string_contains {
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [[ <span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span> == *$2* ]]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo 0
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    echo 1
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># example : __string_match abc ac</span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __string_match {
</span></span><span style=display:flex><span>    str=<span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    subStr=<span style=color:#a31515>&#34;</span>$2<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    subStrLen=<span style=color:#a31515>${#</span>subStr<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>for</span> i ({1..$subStrLen}) {
</span></span><span style=display:flex><span>        char=$subStr[$i]
</span></span><span style=display:flex><span>        strLen=<span style=color:#a31515>${#</span>str<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>        strIndex=1
</span></span><span style=display:flex><span>        strIndex=$str[(i)$char]
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( $strIndex &gt; $strLen )) <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            echo 1
</span></span><span style=display:flex><span>            <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>            str=<span style=color:#a31515>${</span>str:$strIndex<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    echo 0
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># example : __string_split &#39;abc-123.456_asd&#39; &#39;-_.&#39;</span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __string_split {
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>${</span>1//[$2]/ <span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># example : __string_abbr abc-def &#39;-&#39;</span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __string_abbr {
</span></span><span style=display:flex><span>    abbr=<span style=color:#a31515>&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>for</span> word in <span style=color:#00f>$(</span>echo <span style=color:#a31515>${</span>1//[$2]/ <span style=color:#a31515>}</span><span style=color:#00f>)</span>; <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>        abbr=<span style=color:#a31515>&#34;</span>$abbr<span style=color:#a31515>${</span>word:0:1<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>done</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span>$abbr<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __string_test {
</span></span><span style=display:flex><span>    actual=<span style=color:#00f>$(</span>__string_contains abc bc<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    expect=0
</span></span><span style=display:flex><span>    ok=<span style=color:#00f>$(</span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;test : __string_contains abc bc </span>$ok<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    actual=<span style=color:#00f>$(</span>__string_match abc ac<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    expect=0
</span></span><span style=display:flex><span>    ok=<span style=color:#00f>$(</span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;test : __string_match abc ac </span>$ok<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    actual=<span style=color:#00f>$(</span>__string_split abc-123.456_asd -_.<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    expect=<span style=color:#a31515>&#39;abc 123 456 asd&#39;</span>
</span></span><span style=display:flex><span>    ok=<span style=color:#00f>$(</span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;test : __string_split abc-123.456_asd -_. </span>$ok<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    actual=<span style=color:#00f>$(</span>__string_abbr abc-def -<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    expect=ad
</span></span><span style=display:flex><span>    ok=<span style=color:#00f>$(</span>__if_then_else $actual $expect $__TEST_OK_STRING $__TEST_FAIL_STRING<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    echo -e <span style=color:#a31515>&#34;test : __string_abbr abc-def - </span>$ok<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-7478f2c0798109441f4091874d2ac254><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-7478f2c0798109441f4091874d2ac254","highlight-file_opened")'>function.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/function.sh title="下载 function.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/function.sh title="源码 function.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>#!/bin/zsh
</span></span></span><span style=display:flex><span><span style=color:#00f></span>
</span></span><span style=display:flex><span>__TEST_OK_STRING=<span style=color:#a31515>&#39;\033[32mok\033[0m&#39;</span>
</span></span><span style=display:flex><span>__TEST_FAIL_STRING=<span style=color:#a31515>&#39;\033[31mfail\033[0m&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __if_then_else {
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [[ <span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span> == <span style=color:#a31515>&#34;</span>$2<span style=color:#a31515>&#34;</span> ]]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;</span>$3<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;</span>$4<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>function</span> __port(){
</span></span><span style=display:flex><span>    lsof <span style=color:#a31515>&#34;-i:</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-05c29747c48997d0dd69526a246543b7><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-05c29747c48997d0dd69526a246543b7","highlight-file_opened")'>git-prompt.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/git-prompt.sh title="下载 git-prompt.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/git-prompt.sh title="源码 git-prompt.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># bash/zsh git prompt support</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Copyright (C) 2018 David Xu</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Based on the earlier work by Shawn O. Pearce &lt;spearce@spearce.org&gt;</span>
</span></span><span style=display:flex><span><span style=color:green># Distributed under the GNU General Public License, version 2.0.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># This script allows you to see the current branch in your prompt,</span>
</span></span><span style=display:flex><span><span style=color:green># posh-git style.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># You will most likely want to make use of either `__posh_git_ps1` or</span>
</span></span><span style=display:flex><span><span style=color:green># `__posh_git_echo`. Refer to the documentation of the functions for additional</span>
</span></span><span style=display:flex><span><span style=color:green># information.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># CONFIG OPTIONS</span>
</span></span><span style=display:flex><span><span style=color:green># ==============</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># This script should work out of the box. Available options are set through</span>
</span></span><span style=display:flex><span><span style=color:green># your git configuration files. This allows you to control the prompt display on a</span>
</span></span><span style=display:flex><span><span style=color:green># per-repository basis.</span>
</span></span><span style=display:flex><span><span style=color:green># ```</span>
</span></span><span style=display:flex><span><span style=color:green># bash.describeStyle</span>
</span></span><span style=display:flex><span><span style=color:green># bash.enableFileStatus</span>
</span></span><span style=display:flex><span><span style=color:green># bash.enableGitStatus</span>
</span></span><span style=display:flex><span><span style=color:green># bash.showStatusWhenZero</span>
</span></span><span style=display:flex><span><span style=color:green># bash.showUpstream</span>
</span></span><span style=display:flex><span><span style=color:green># ```</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.describeStyle</span>
</span></span><span style=display:flex><span><span style=color:green># ------------------</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># This option controls if you would like to see more information about the</span>
</span></span><span style=display:flex><span><span style=color:green># identity of commits checked out as a detached `HEAD`. This is also controlled</span>
</span></span><span style=display:flex><span><span style=color:green># by the legacy environment variable `GIT_PS1_DESCRIBESTYLE`.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Option   | Description</span>
</span></span><span style=display:flex><span><span style=color:green># -------- | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># contains | relative to newer annotated tag `(v1.6.3.2~35)`</span>
</span></span><span style=display:flex><span><span style=color:green># branch   | relative to newer tag or branch `(master~4)`</span>
</span></span><span style=display:flex><span><span style=color:green># describe | relative to older annotated tag `(v1.6.3.1-13-gdd42c2f)`</span>
</span></span><span style=display:flex><span><span style=color:green># default  | exactly matching tag</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.enableFileStatus</span>
</span></span><span style=display:flex><span><span style=color:green># ---------------------</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Option | Description</span>
</span></span><span style=display:flex><span><span style=color:green># ------ | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># true   | _Default_. The script will query for all file indicators every time.</span>
</span></span><span style=display:flex><span><span style=color:green># false  | No file indicators will be displayed. The script will not query</span>
</span></span><span style=display:flex><span><span style=color:green>#          upstream for differences. Branch color-coding information is still</span>
</span></span><span style=display:flex><span><span style=color:green>#          displayed.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.enableGitStatus</span>
</span></span><span style=display:flex><span><span style=color:green># --------------------</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Option | Description</span>
</span></span><span style=display:flex><span><span style=color:green># ------ | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># true   | _Default_. Color coding and indicators will be shown.</span>
</span></span><span style=display:flex><span><span style=color:green># false  | The script will not run.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.showStashState</span>
</span></span><span style=display:flex><span><span style=color:green># -------------------</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Option | Description</span>
</span></span><span style=display:flex><span><span style=color:green># ------ | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># true   | _Default_. An indicator will display if the stash is not empty.</span>
</span></span><span style=display:flex><span><span style=color:green># false  | An indicator will not display the stash status.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.showStatusWhenZero</span>
</span></span><span style=display:flex><span><span style=color:green># -----------------------</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Option | Description</span>
</span></span><span style=display:flex><span><span style=color:green># ------ | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># true   | Indicators will be shown even if there are no updates to the index or</span>
</span></span><span style=display:flex><span><span style=color:green>#          working tree.</span>
</span></span><span style=display:flex><span><span style=color:green># false  | _Default_. No file change indicators will be shown if there are no</span>
</span></span><span style=display:flex><span><span style=color:green>#          changes to the index or working tree.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.showUpstream</span>
</span></span><span style=display:flex><span><span style=color:green># -----------------</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># By default, `__posh_git_ps1` will compare `HEAD` to your `SVN` upstream if it can</span>
</span></span><span style=display:flex><span><span style=color:green># find one, or `@{upstream}` otherwise. This is also controlled by the legacy</span>
</span></span><span style=display:flex><span><span style=color:green># environment variable `GIT_PS1_SHOWUPSTREAM`.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># Option | Description</span>
</span></span><span style=display:flex><span><span style=color:green># ------ | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># legacy | Does not use the `--count` option available in recent versions of</span>
</span></span><span style=display:flex><span><span style=color:green>#          `git-rev-list`</span>
</span></span><span style=display:flex><span><span style=color:green># git    | _Default_. Always compares `HEAD` to `@{upstream}`</span>
</span></span><span style=display:flex><span><span style=color:green># svn    | Always compares `HEAD` to `SVN` upstream</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># bash.enableStatusSymbol</span>
</span></span><span style=display:flex><span><span style=color:green># -----------------------</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Option | Description</span>
</span></span><span style=display:flex><span><span style=color:green># ------ | -----------</span>
</span></span><span style=display:flex><span><span style=color:green># true   | _Default_. Status symbols (`≡` `↑` `↓` `↕`) will be shown.</span>
</span></span><span style=display:flex><span><span style=color:green># false  | No status symbol will be shown, saving some prompt length.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green>###############################################################################</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Convenience function to set PS1 to show git status. Must supply two</span>
</span></span><span style=display:flex><span><span style=color:green># arguments that specify the prefix and suffix of the git status string.</span>
</span></span><span style=display:flex><span><span style=color:green>#</span>
</span></span><span style=display:flex><span><span style=color:green># This function should be called in PROMPT_COMMAND or similar.</span>
</span></span><span style=display:flex><span>__posh_git_ps1 ()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    local ps1pc_prefix=
</span></span><span style=display:flex><span>    local ps1pc_suffix=
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$#<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        2)
</span></span><span style=display:flex><span>            ps1pc_prefix=$1
</span></span><span style=display:flex><span>            ps1pc_suffix=$2
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>        *)
</span></span><span style=display:flex><span>            echo __posh_git_ps1: bad number of arguments &gt;&amp;2
</span></span><span style=display:flex><span>            <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>    local gitstring=<span style=color:#00f>$(</span>__posh_git_echo<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    PS1=$ps1pc_prefix$gitstring$ps1pc_suffix
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>__posh_color () {
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -n <span style=color:#a31515>&#34;</span>$ZSH_VERSION<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo %{$1%}
</span></span><span style=display:flex><span>    <span style=color:#00f>elif</span> [ -n <span style=color:#a31515>&#34;</span>$BASH_VERSION<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>\\</span>[$1<span style=color:#a31515>\\</span>]
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        <span style=color:green># assume Bash anyway</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>\\</span>[$1<span style=color:#a31515>\\</span>]
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Echoes the git status string.</span>
</span></span><span style=display:flex><span>__posh_git_echo () {
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>git config --bool bash.enableGitStatus<span style=color:#00f>)</span><span style=color:#a31515>&#34;</span> = <span style=color:#a31515>&#39;false&#39;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span>;
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local DefaultForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Default no color</span>
</span></span><span style=display:flex><span>    local DefaultBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local BeforeText=<span style=color:#a31515>&#39;[&#39;</span>
</span></span><span style=display:flex><span>    local BeforeForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;33m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Yellow</span>
</span></span><span style=display:flex><span>    local BeforeBackgroundColor=
</span></span><span style=display:flex><span>    local DelimText=<span style=color:#a31515>&#39; |&#39;</span>
</span></span><span style=display:flex><span>    local DelimForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;33m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Yellow</span>
</span></span><span style=display:flex><span>    local DelimBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local AfterText=<span style=color:#a31515>&#39;]&#39;</span>
</span></span><span style=display:flex><span>    local AfterForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;33m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Yellow</span>
</span></span><span style=display:flex><span>    local AfterBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local BranchForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;36m&#39;</span><span style=color:#00f>)</span>  <span style=color:green># Cyan</span>
</span></span><span style=display:flex><span>    local BranchBackgroundColor=
</span></span><span style=display:flex><span>    local BranchAheadForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;32m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Green</span>
</span></span><span style=display:flex><span>    local BranchAheadBackgroundColor=
</span></span><span style=display:flex><span>    local BranchBehindForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[0;31m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Red</span>
</span></span><span style=display:flex><span>    local BranchBehindBackgroundColor=
</span></span><span style=display:flex><span>    local BranchBehindAndAheadForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;33m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Yellow</span>
</span></span><span style=display:flex><span>    local BranchBehindAndAheadBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local BeforeIndexText=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local BeforeIndexForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;32m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Dark green</span>
</span></span><span style=display:flex><span>    local BeforeIndexBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local IndexForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[1;32m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Dark green</span>
</span></span><span style=display:flex><span>    local IndexBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local WorkingForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[0;31m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Dark red</span>
</span></span><span style=display:flex><span>    local WorkingBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local StashForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[0;34m&#39;</span><span style=color:#00f>)</span> <span style=color:green># Darker blue</span>
</span></span><span style=display:flex><span>    local StashBackgroundColor=
</span></span><span style=display:flex><span>    local StashText=<span style=color:#a31515>&#39;$&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local RebaseForegroundColor=<span style=color:#00f>$(</span>__posh_color <span style=color:#a31515>&#39;\e[0m&#39;</span><span style=color:#00f>)</span> <span style=color:green># reset</span>
</span></span><span style=display:flex><span>    local RebaseBackgroundColor=
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local EnableFileStatus=<span style=color:#a31515>`</span>git config --bool bash.enableFileStatus<span style=color:#a31515>`</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$EnableFileStatus<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        true)  EnableFileStatus=true ;;
</span></span><span style=display:flex><span>        false) EnableFileStatus=false ;;
</span></span><span style=display:flex><span>        *)     EnableFileStatus=true ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>    local ShowStatusWhenZero=<span style=color:#a31515>`</span>git config --bool bash.showStatusWhenZero<span style=color:#a31515>`</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$ShowStatusWhenZero<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        true)  ShowStatusWhenZero=true ;;
</span></span><span style=display:flex><span>        false) ShowStatusWhenZero=false ;;
</span></span><span style=display:flex><span>        *)     ShowStatusWhenZero=false ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>    local ShowStashState=<span style=color:#a31515>`</span>git config --bool bash.showStashState<span style=color:#a31515>`</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$ShowStashState<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        true)  ShowStashState=true ;;
</span></span><span style=display:flex><span>        false) ShowStashState=false ;;
</span></span><span style=display:flex><span>        *)     ShowStashState=true ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>    local EnableStatusSymbol=<span style=color:#a31515>`</span>git config --bool bash.enableStatusSymbol<span style=color:#a31515>`</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$EnableStatusSymbol<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        true)  EnableStatusSymbol=true ;;
</span></span><span style=display:flex><span>        false) EnableStatusSymbol=false ;;
</span></span><span style=display:flex><span>        *)     EnableStatusSymbol=true ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local BranchIdenticalStatusSymbol=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local BranchAheadStatusSymbol=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local BranchBehindStatusSymbol=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local BranchBehindAndAheadStatusSymbol=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local BranchWarningStatusSymbol=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> $EnableStatusSymbol; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>      BranchIdenticalStatusSymbol=<span style=color:#a31515>$&#39; \xE2\x89\xA1&#39;</span> <span style=color:green># Three horizontal lines</span>
</span></span><span style=display:flex><span>      BranchAheadStatusSymbol=<span style=color:#a31515>$&#39; \xE2\x86\x91&#39;</span> <span style=color:green># Up Arrow</span>
</span></span><span style=display:flex><span>      BranchBehindStatusSymbol=<span style=color:#a31515>$&#39; \xE2\x86\x93&#39;</span> <span style=color:green># Down Arrow</span>
</span></span><span style=display:flex><span>      BranchBehindAndAheadStatusSymbol=<span style=color:#a31515>$&#39; \xE2\x86\x95&#39;</span> <span style=color:green># Up and Down Arrow</span>
</span></span><span style=display:flex><span>      BranchWarningStatusSymbol=<span style=color:#a31515>&#39; ?&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># these globals are updated by __posh_git_ps1_upstream_divergence</span>
</span></span><span style=display:flex><span>    __POSH_BRANCH_AHEAD_BY=0
</span></span><span style=display:flex><span>    __POSH_BRANCH_BEHIND_BY=0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local is_detached=false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local g=<span style=color:#00f>$(</span>__posh_gitdir<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -z <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>return</span> <span style=color:green># not a git directory</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    local rebase=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local b=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local step=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    local total=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -d <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-merge&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        b=<span style=color:#00f>$(</span>cat <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-merge/head-name&#34;</span> 2&gt;/dev/null<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>        step=<span style=color:#00f>$(</span>cat <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-merge/msgnum&#34;</span> 2&gt;/dev/null<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>        total=<span style=color:#00f>$(</span>cat <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-merge/end&#34;</span> 2&gt;/dev/null<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-merge/interactive&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            rebase=<span style=color:#a31515>&#39;|REBASE-i&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>            rebase=<span style=color:#a31515>&#39;|REBASE-m&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> [ -d <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-apply&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            step=<span style=color:#00f>$(</span>cat <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-apply/next&#34;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>            total=<span style=color:#00f>$(</span>cat <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-apply/last&#34;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-apply/rebasing&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>                rebase=<span style=color:#a31515>&#39;|REBASE&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>elif</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/rebase-apply/applying&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>                rebase=<span style=color:#a31515>&#39;|AM&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>                rebase=<span style=color:#a31515>&#39;|AM/REBASE&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/MERGE_HEAD&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            rebase=<span style=color:#a31515>&#39;|MERGING&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/CHERRY_PICK_HEAD&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            rebase=<span style=color:#a31515>&#39;|CHERRY-PICKING&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/REVERT_HEAD&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            rebase=<span style=color:#a31515>&#39;|REVERTING&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ -f <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/BISECT_LOG&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            rebase=<span style=color:#a31515>&#39;|BISECTING&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        b=<span style=color:#00f>$(</span>git symbolic-ref HEAD 2&gt;/dev/null<span style=color:#00f>)</span> || {
</span></span><span style=display:flex><span>            is_detached=true
</span></span><span style=display:flex><span>            local output=<span style=color:#00f>$(</span>git config -z --get bash.describeStyle<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> [ -n <span style=color:#a31515>&#34;</span>$output<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>                GIT_PS1_DESCRIBESTYLE=$output
</span></span><span style=display:flex><span>            <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>            b=<span style=color:#00f>$(</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>GIT_PS1_DESCRIBESTYLE-<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>            (contains<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>                git describe --contains HEAD ;;
</span></span><span style=display:flex><span>            (branch)
</span></span><span style=display:flex><span>                git describe --contains --all HEAD ;;
</span></span><span style=display:flex><span>            (describe)
</span></span><span style=display:flex><span>                git describe HEAD ;;
</span></span><span style=display:flex><span>            (* | default)
</span></span><span style=display:flex><span>                git describe --tags --exact-match HEAD ;;
</span></span><span style=display:flex><span>            <span style=color:#00f>esac</span> 2&gt;/dev/null) ||
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            b=<span style=color:#00f>$(</span>cut -c1-7 <span style=color:#a31515>&#34;</span>$g<span style=color:#a31515>/HEAD&#34;</span> 2&gt;/dev/null<span style=color:#00f>)</span>... ||
</span></span><span style=display:flex><span>            b=<span style=color:#a31515>&#39;unknown&#39;</span>
</span></span><span style=display:flex><span>            b=<span style=color:#a31515>&#34;(</span>$b<span style=color:#a31515>)&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -n <span style=color:#a31515>&#34;</span>$step<span style=color:#a31515>&#34;</span> ] &amp;&amp; [ -n <span style=color:#a31515>&#34;</span>$total<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        rebase=<span style=color:#a31515>&#34;</span>$rebase<span style=color:#a31515> </span>$step<span style=color:#a31515>/</span>$total<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local hasStash=false
</span></span><span style=display:flex><span>    local isBare=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ <span style=color:#a31515>&#39;true&#39;</span> = <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>git rev-parse --is-inside-git-dir 2&gt;/dev/null<span style=color:#00f>)</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> [ <span style=color:#a31515>&#39;true&#39;</span> = <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>git rev-parse --is-bare-repository 2&gt;/dev/null<span style=color:#00f>)</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            isBare=<span style=color:#a31515>&#39;BARE:&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>            b=<span style=color:#a31515>&#39;GIT_DIR!&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>elif</span> [ <span style=color:#a31515>&#39;true&#39;</span> = <span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>git rev-parse --is-inside-work-tree 2&gt;/dev/null<span style=color:#00f>)</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> $ShowStashState; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            git rev-parse --verify refs/stash &gt;/dev/null 2&gt;&amp;1 &amp;&amp; hasStash=true
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        __posh_git_ps1_upstream_divergence
</span></span><span style=display:flex><span>        local divergence_return_code=$?
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># show index status and working directory status</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> $EnableFileStatus; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        local indexAdded=0
</span></span><span style=display:flex><span>        local indexModified=0
</span></span><span style=display:flex><span>        local indexDeleted=0
</span></span><span style=display:flex><span>        local indexUnmerged=0
</span></span><span style=display:flex><span>        local filesAdded=0
</span></span><span style=display:flex><span>        local filesModified=0
</span></span><span style=display:flex><span>        local filesDeleted=0
</span></span><span style=display:flex><span>        local filesUnmerged=0
</span></span><span style=display:flex><span>        <span style=color:#00f>while</span> IFS=<span style=color:#a31515>&#34;\n&#34;</span> read -r tag rest
</span></span><span style=display:flex><span>        <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>tag:0:1<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>                A )
</span></span><span style=display:flex><span>                    (( indexAdded++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                M )
</span></span><span style=display:flex><span>                    (( indexModified++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                R )
</span></span><span style=display:flex><span>                    (( indexModified++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                C )
</span></span><span style=display:flex><span>                    (( indexModified++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                D )
</span></span><span style=display:flex><span>                    (( indexDeleted++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                U )
</span></span><span style=display:flex><span>                    (( indexUnmerged++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>            <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>tag:1:1<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>                <span style=color:#a31515>\?</span> )
</span></span><span style=display:flex><span>                    (( filesAdded++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                A )
</span></span><span style=display:flex><span>                    (( filesAdded++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                M )
</span></span><span style=display:flex><span>                    (( filesModified++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                D )
</span></span><span style=display:flex><span>                    (( filesDeleted++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>                U )
</span></span><span style=display:flex><span>                    (( filesUnmerged++ ))
</span></span><span style=display:flex><span>                    ;;
</span></span><span style=display:flex><span>            <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>done</span> &lt;&lt;&lt; <span style=color:#a31515>&#34;`git status --porcelain 2&gt;/dev/null`&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local gitstring=
</span></span><span style=display:flex><span>    local branchstring=<span style=color:#a31515>&#34;</span>$isBare<span style=color:#a31515>${</span>b##refs/heads/<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># before-branch text</span>
</span></span><span style=display:flex><span>    gitstring=<span style=color:#a31515>&#34;</span>$BeforeBackgroundColor$BeforeForegroundColor$BeforeText<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># branch</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> (( $__POSH_BRANCH_BEHIND_BY &gt; 0 &amp;&amp; $__POSH_BRANCH_AHEAD_BY &gt; 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        gitstring+=<span style=color:#a31515>&#34;</span>$BranchBehindAndAheadBackgroundColor$BranchBehindAndAheadForegroundColor$branchstring$BranchBehindAndAheadStatusSymbol<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>elif</span> (( $__POSH_BRANCH_BEHIND_BY &gt; 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        gitstring+=<span style=color:#a31515>&#34;</span>$BranchBehindBackgroundColor$BranchBehindForegroundColor$branchstring$BranchBehindStatusSymbol<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>elif</span> (( $__POSH_BRANCH_AHEAD_BY &gt; 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        gitstring+=<span style=color:#a31515>&#34;</span>$BranchAheadBackgroundColor$BranchAheadForegroundColor$branchstring$BranchAheadStatusSymbol<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>elif</span> (( $divergence_return_code )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:green># ahead and behind are both 0, but there was some problem while executing the command.</span>
</span></span><span style=display:flex><span>        gitstring+=<span style=color:#a31515>&#34;</span>$BranchBackgroundColor$BranchForegroundColor$branchstring$BranchWarningStatusSymbol<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        <span style=color:green># ahead and behind are both 0, and the divergence was determined successfully</span>
</span></span><span style=display:flex><span>        gitstring+=<span style=color:#a31515>&#34;</span>$BranchBackgroundColor$BranchForegroundColor$branchstring$BranchIdenticalStatusSymbol<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># index status</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> $EnableFileStatus; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        local indexCount=<span style=color:#a31515>&#34;</span><span style=color:#00f>$((</span> $indexAdded + $indexModified + $indexDeleted + $indexUnmerged <span style=color:#00f>))</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        local workingCount=<span style=color:#a31515>&#34;</span><span style=color:#00f>$((</span> $filesAdded + $filesModified + $filesDeleted + $filesUnmerged <span style=color:#00f>))</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( $indexCount != 0 )) || $ShowStatusWhenZero; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            gitstring+=<span style=color:#a31515>&#34;</span>$IndexBackgroundColor$IndexForegroundColor<span style=color:#a31515> +</span>$indexAdded<span style=color:#a31515> ~</span>$indexModified<span style=color:#a31515> -</span>$indexDeleted<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( $indexUnmerged != 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            gitstring+=<span style=color:#a31515>&#34; </span>$IndexBackgroundColor$IndexForegroundColor<span style=color:#a31515>!</span>$indexUnmerged<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( $indexCount != 0 &amp;&amp; ($workingCount != 0 || $ShowStatusWhenZero) )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            gitstring+=<span style=color:#a31515>&#34;</span>$DelimBackgroundColor$DelimForegroundColor$DelimText<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( $workingCount != 0 )) || $ShowStatusWhenZero; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            gitstring+=<span style=color:#a31515>&#34;</span>$WorkingBackgroundColor$WorkingForegroundColor<span style=color:#a31515> +</span>$filesAdded<span style=color:#a31515> ~</span>$filesModified<span style=color:#a31515> -</span>$filesDeleted<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( $filesUnmerged != 0 )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            gitstring+=<span style=color:#a31515>&#34; </span>$WorkingBackgroundColor$WorkingForegroundColor<span style=color:#a31515>!</span>$filesUnmerged<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    gitstring+=<span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>rebase:+$RebaseForegroundColor$RebaseBackgroundColor$rebase<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># after-branch text</span>
</span></span><span style=display:flex><span>    gitstring+=<span style=color:#a31515>&#34;</span>$AfterBackgroundColor$AfterForegroundColor$AfterText<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> $ShowStashState &amp;&amp; $hasStash; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        gitstring+=<span style=color:#a31515>&#34;</span>$StashBackgroundColor$StashForegroundColor<span style=color:#a31515>&#34;</span>$StashText
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    gitstring+=<span style=color:#a31515>&#34;</span>$DefaultBackgroundColor$DefaultForegroundColor<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;</span>$gitstring<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Returns the location of the .git/ directory.</span>
</span></span><span style=display:flex><span>__posh_gitdir ()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:green># Note: this function is duplicated in git-completion.bash</span>
</span></span><span style=display:flex><span>    <span style=color:green># When updating it, make sure you update the other one to match.</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -z <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>1-<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> [ -n <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>__posh_git_dir-<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            echo <span style=color:#a31515>&#34;</span>$__posh_git_dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ -n <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>GIT_DIR-<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            test -d <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>GIT_DIR-<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> || <span style=color:#00f>return</span> 1
</span></span><span style=display:flex><span>            echo <span style=color:#a31515>&#34;</span>$GIT_DIR<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ -d .git ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            echo .git
</span></span><span style=display:flex><span>        <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>            git rev-parse --git-dir 2&gt;/dev/null
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>elif</span> [ -d <span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>/.git&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>/.git&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        echo <span style=color:#a31515>&#34;</span>$1<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># Updates the global variables `__POSH_BRANCH_AHEAD_BY` and `__POSH_BRANCH_BEHIND_BY`.</span>
</span></span><span style=display:flex><span>__posh_git_ps1_upstream_divergence ()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    local key value
</span></span><span style=display:flex><span>    local svn_remote svn_url_pattern
</span></span><span style=display:flex><span>    local upstream=git          <span style=color:green># default</span>
</span></span><span style=display:flex><span>    local legacy=<span style=color:#a31515>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    svn_remote=()
</span></span><span style=display:flex><span>    <span style=color:green># get some config options from git-config</span>
</span></span><span style=display:flex><span>    local output=<span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>git config -z --get-regexp <span style=color:#a31515>&#39;^(svn-remote\..*\.url|bash\.showUpstream)$&#39;</span> 2&gt;/dev/null | tr <span style=color:#a31515>&#39;\0\n&#39;</span> <span style=color:#a31515>&#39;\n &#39;</span><span style=color:#00f>)</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>while</span> read -r key value; <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$key<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        bash.showUpstream)
</span></span><span style=display:flex><span>            GIT_PS1_SHOWUPSTREAM=<span style=color:#a31515>&#34;</span>$value<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> [ -z <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>GIT_PS1_SHOWUPSTREAM<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>                <span style=color:#00f>return</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>        svn-remote.*.url)
</span></span><span style=display:flex><span>            svn_remote[ <span style=color:#00f>$((</span><span style=color:#a31515>${#</span>svn_remote[@]<span style=color:#a31515>}</span> + 1<span style=color:#00f>))</span> ]=<span style=color:#a31515>&#34;</span>$value<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>            svn_url_pattern+=<span style=color:#a31515>&#34;\\|</span>$value<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>            upstream=svn+git <span style=color:green># default upstream is SVN if available, else git</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>        <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>done</span> &lt;&lt;&lt; <span style=color:#a31515>&#34;</span>$output<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># parse configuration values</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>for</span> option in <span style=color:#a31515>${</span>GIT_PS1_SHOWUPSTREAM<span style=color:#a31515>}</span>; <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$option<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>        git|svn) upstream=<span style=color:#a31515>&#34;</span>$option<span style=color:#a31515>&#34;</span> ;;
</span></span><span style=display:flex><span>        legacy)  legacy=1  ;;
</span></span><span style=display:flex><span>        <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green># Find our upstream</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$upstream<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>    git)    upstream=<span style=color:#a31515>&#39;@{upstream}&#39;</span> ;;
</span></span><span style=display:flex><span>    svn*)
</span></span><span style=display:flex><span>        <span style=color:green># get the upstream from the &#34;git-svn-id: ...&#34; in a commit message</span>
</span></span><span style=display:flex><span>        <span style=color:green># (git-svn uses essentially the same procedure internally)</span>
</span></span><span style=display:flex><span>        local svn_upstream=(<span style=color:#00f>$(</span>git log --first-parent -1 <span style=color:#a31515>\
</span></span></span><span style=display:flex><span><span style=color:#a31515></span>                    --grep=<span style=color:#a31515>&#34;^git-svn-id: \(</span><span style=color:#a31515>${</span>svn_url_pattern#??<span style=color:#a31515>}</span><span style=color:#a31515>\)&#34;</span> 2&gt;/dev/null<span style=color:#00f>)</span>)
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> (( 0 != <span style=color:#a31515>${#</span>svn_upstream[@]<span style=color:#a31515>}</span> )); <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            svn_upstream=<span style=color:#a31515>${</span>svn_upstream[ <span style=color:#a31515>${#</span>svn_upstream[@]<span style=color:#a31515>}</span> - 2 ]<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>            svn_upstream=<span style=color:#a31515>${</span>svn_upstream%@*<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>            local n_stop=<span style=color:#a31515>&#34;</span><span style=color:#a31515>${#</span>svn_remote[@]<span style=color:#a31515>}</span><span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>            local n
</span></span><span style=display:flex><span>            <span style=color:#00f>for</span> ((n=1; n &lt;= n_stop; n++)); <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>                svn_upstream=<span style=color:#a31515>${</span>svn_upstream#<span style=color:#a31515>${</span>svn_remote[$n]<span style=color:#a31515>}}</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#00f>if</span> [ -z <span style=color:#a31515>&#34;</span>$svn_upstream<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>                <span style=color:green># default branch name for checkouts with no layout:</span>
</span></span><span style=display:flex><span>                upstream=<span style=color:#a31515>${</span>GIT_SVN_ID<span style=color:#00f>:-</span>git-svn<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>                upstream=<span style=color:#a31515>${</span>svn_upstream#/<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>elif</span> [ <span style=color:#a31515>&#39;svn+git&#39;</span> = <span style=color:#a31515>&#34;</span>$upstream<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>            upstream=<span style=color:#a31515>&#39;@{upstream}&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>        ;;
</span></span><span style=display:flex><span>    <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local return_code=
</span></span><span style=display:flex><span>    __POSH_BRANCH_AHEAD_BY=0
</span></span><span style=display:flex><span>    __POSH_BRANCH_BEHIND_BY=0
</span></span><span style=display:flex><span>    <span style=color:green># Find how many commits we are ahead/behind our upstream</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>if</span> [ -z <span style=color:#a31515>&#34;</span>$legacy<span style=color:#a31515>&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>        local output=
</span></span><span style=display:flex><span>        output=<span style=color:#00f>$(</span>git rev-list --count --left-right $upstream...HEAD 2&gt;/dev/null<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>        return_code=$?
</span></span><span style=display:flex><span>        IFS=<span style=color:#a31515>$&#39; \t\n&#39;</span> read -r __POSH_BRANCH_BEHIND_BY __POSH_BRANCH_AHEAD_BY &lt;&lt;&lt; $output
</span></span><span style=display:flex><span>    <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>        local output
</span></span><span style=display:flex><span>        output=<span style=color:#00f>$(</span>git rev-list --left-right $upstream...HEAD 2&gt;/dev/null<span style=color:#00f>)</span>
</span></span><span style=display:flex><span>        return_code=$?
</span></span><span style=display:flex><span>        <span style=color:green># produce equivalent output to --count for older versions of git</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>while</span> IFS=<span style=color:#a31515>$&#39; \t\n&#39;</span> read -r commit; <span style=color:#00f>do</span>
</span></span><span style=display:flex><span>            <span style=color:#00f>case</span> <span style=color:#a31515>&#34;</span>$commit<span style=color:#a31515>&#34;</span> in
</span></span><span style=display:flex><span>            <span style=color:#a31515>&#34;&lt;*&#34;</span>) (( __POSH_BRANCH_BEHIND_BY++ )) ;;
</span></span><span style=display:flex><span>            <span style=color:#a31515>&#34;&gt;*&#34;</span>) (( __POSH_BRANCH_AHEAD_BY++ ))  ;;
</span></span><span style=display:flex><span>            <span style=color:#00f>esac</span>
</span></span><span style=display:flex><span>        <span style=color:#00f>done</span> &lt;&lt;&lt; $output
</span></span><span style=display:flex><span>    <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>    : <span style=color:#a31515>${</span>__POSH_BRANCH_AHEAD_BY:=0<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    : <span style=color:#a31515>${</span>__POSH_BRANCH_BEHIND_BY:=0<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>    <span style=color:#00f>return</span> $return_code
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-5031ca221e07b7b75505d712cf89d822><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-5031ca221e07b7b75505d712cf89d822","highlight-file_opened")'>idea.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/idea.sh title="下载 idea.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/idea.sh title="源码 idea.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>function</span> __idea_open {
</span></span><span style=display:flex><span>    dir=<span style=color:#a31515>&#34;</span>$@<span style=color:#a31515>[</span>$#<span style=color:#a31515>]&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;idea </span>$dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    idea <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-80caa0ff2627a8a7a2c19a5f9997618e><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-80caa0ff2627a8a7a2c19a5f9997618e","highlight-file_opened")'>mac.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/mac.sh title="下载 mac.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/mac.sh title="源码 mac.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>autoload -Uz compinit &amp;&amp; compinit
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>source <span style=color:#00f>$(</span>dirname $0<span style=color:#00f>)</span>/a.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://adoptium.net/temurin/releases?version=11</span>
</span></span><span style=display:flex><span><span style=color:green># tar xvf openjdk.tar.gz ${MY_HOME_APP}/_java11</span>
</span></span><span style=display:flex><span><span style=color:green># export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8</span>
</span></span><span style=display:flex><span><span style=color:green># /usr/libexec/java_home -v 1.8</span>
</span></span><span style=display:flex><span>export JAVA_8_HOME=<span style=color:#a31515>${</span>MY_HOME_APP<span style=color:#a31515>}</span>/_java8/Contents/Home
</span></span><span style=display:flex><span>export JAVA_11_HOME=<span style=color:#a31515>${</span>MY_HOME_APP<span style=color:#a31515>}</span>/_java11/Contents/Home
</span></span><span style=display:flex><span>export JAVA_17_HOME=<span style=color:#a31515>${</span>MY_HOME_APP<span style=color:#a31515>}</span>/_java17/Contents/Home
</span></span><span style=display:flex><span>export JAVA_21_HOME=<span style=color:#a31515>${</span>MY_HOME_APP<span style=color:#a31515>}</span>/_java21/Contents/Home
</span></span><span style=display:flex><span>export JAVA_HOME=$JAVA_8_HOME
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>launchctl setenv JAVA_HOME $JAVA_HOME
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>launchctl setenv M2_HOME $M2_HOME
</span></span><span style=display:flex><span>launchctl setenv MAVEN_HOME $MAVEN_HOME
</span></span><span style=display:flex><span>launchctl setenv MAVEN_OPTS $MAVEN_OPTS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>launchctl setenv GRADLE_HOME $GRADLE_HOME
</span></span><span style=display:flex><span>launchctl setenv GRADLE_USER_HOME $GRADLE_USER_HOME
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># https://github.com/ggreer/lscolors</span>
</span></span><span style=display:flex><span>export CLICOLOR=1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>__directory_add_quick_access <span style=color:#a31515>${</span>MY_HOME<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>__directory_add_quick_access <span style=color:#a31515>${</span>MY_HOME_CODE<span style=color:#a31515>}</span>
</span></span><span style=display:flex><span>__directory_add_quick_access <span style=color:#a31515>${</span>MY_HOME<span style=color:#a31515>}</span>/_github
</span></span><span style=display:flex><span><span style=color:green>#__directory_add_to_quick_access ${MY_HOME_APP}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>if</span> [ -f <span style=color:#a31515>&#34;</span><span style=color:#a31515>${</span>MY_HOME<span style=color:#a31515>}</span><span style=color:#a31515>/_shell/a.sh&#34;</span> ]; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>  source <span style=color:#a31515>${</span>MY_HOME<span style=color:#a31515>}</span>/_shell/a.sh
</span></span><span style=display:flex><span><span style=color:#00f>fi</span></span></span></code></pre></div></div></div><div class=highlight-file id=hfs-df252f72ea205d948fe69db4255debbc><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-df252f72ea205d948fe69db4255debbc","highlight-file_opened")'>vscode.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/vscode.sh title="下载 vscode.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/vscode.sh title="源码 vscode.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#00f>function</span> __vscode_open {
</span></span><span style=display:flex><span>    dir=<span style=color:#a31515>&#34;</span>$@<span style=color:#a31515>[</span>$#<span style=color:#a31515>]&#34;</span>
</span></span><span style=display:flex><span>    echo <span style=color:#a31515>&#34;code </span>$dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>    code <span style=color:#a31515>&#34;</span>$dir<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-42aadfb32b7778ab48cc4965773f3cd8><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-42aadfb32b7778ab48cc4965773f3cd8","highlight-file_opened")'>zsh-compdef.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/zsh-compdef.sh title="下载 zsh-compdef.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/zsh-compdef.sh title="源码 zsh-compdef.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>setopt completealiases
</span></span><span style=display:flex><span>compdef __directory_search_quick_access_complete c
</span></span><span style=display:flex><span>compdef __directory_search_quick_access_complete d
</span></span><span style=display:flex><span>compdef __directory_search_quick_access_complete i</span></span></code></pre></div></div></div><div class=highlight-file id=hfs-aa86623e82b21d088605e5c16e506a1b><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hfs-aa86623e82b21d088605e5c16e506a1b","highlight-file_opened")'>zsh-prompt.sh</a>
<a class="fa fa-download highlight-file-download" target=_blank href=/linux/script/zsh-prompt.sh title="下载 zsh-prompt.sh" download></a><a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/linux/script/zsh-prompt.sh title="源码 zsh-prompt.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># zsh              http://www.zsh.org/</span>
</span></span><span style=display:flex><span><span style=color:green># precmd           http://zsh.sourceforge.net/Doc/Release/Functions.html#Hook-Functions</span>
</span></span><span style=display:flex><span><span style=color:green># Prompt-Expansion http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html#Prompt-Expansion</span>
</span></span><span style=display:flex><span><span style=color:green># __posh_git_echo  https://github.com/lyze/posh-git-sh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>unsetopt PROMPT_SP
</span></span><span style=display:flex><span>setopt prompt_subst
</span></span><span style=display:flex><span><span style=color:green># RPROMPT=&#34;[%(?.%F{green}%?%f.%F{red}%?%f)]&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>precmd(){
</span></span><span style=display:flex><span>  USER_TYPE=<span style=color:#a31515>&#39;%(!.#.$)&#39;</span>
</span></span><span style=display:flex><span>  NEW_LINE=<span style=color:#a31515>$&#39;\n&#39;</span>
</span></span><span style=display:flex><span>  LAST_EXIT_CODE=<span style=color:#a31515>&#34;%(?..%F{red}%?%f)&#34;</span>
</span></span><span style=display:flex><span>  TIME=<span style=color:#00f>$(</span>gdate +<span style=color:#a31515>&#39;%y-%m-%d %T %:z %s%3N w%u d%-j&#39;</span><span style=color:#00f>)</span>
</span></span><span style=display:flex><span>  COMMON_PROMPT=<span style=color:#a31515>&#39;$NEW_LINE%F{green}$USER_TYPE%f %d $TIME $LAST_EXIT_CODE&#39;</span>
</span></span><span style=display:flex><span>  INPUT_PROMPT=<span style=color:#a31515>&#39;$NEW_LINE&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>if</span> git rev-parse --git-dir &gt; /dev/null 2&gt;&amp;1; <span style=color:#00f>then</span>
</span></span><span style=display:flex><span>    GIT_USER=<span style=color:#a31515>&#34;</span><span style=color:#00f>$(</span>git config user.name<span style=color:#00f>)</span><span style=color:#a31515>@&lt;</span><span style=color:#00f>$(</span>git config user.email<span style=color:#00f>)</span><span style=color:#a31515>&gt;&#34;</span>
</span></span><span style=display:flex><span>    GIT_PROMPT=<span style=color:#a31515>&#39;$NEW_LINE%F{green}$USER_TYPE $GIT_USER%f %F{red}%1d%f $(__posh_git_echo)&#39;</span>
</span></span><span style=display:flex><span>    PROMPT=<span style=color:#a31515>&#34;</span>$COMMON_PROMPT<span style=color:#a31515> </span>$GIT_PROMPT<span style=color:#a31515> </span>$INPUT_PROMPT<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>else</span>
</span></span><span style=display:flex><span>    PROMPT=<span style=color:#a31515>&#34;</span>$COMMON_PROMPT<span style=color:#a31515> </span>$INPUT_PROMPT<span style=color:#a31515>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>fi</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div></div></div></section><section class=article-meta><section class=article-date>2017-01-01 09:42，约3259字，阅读约7分钟</section><section class=article-topics><a class=article-topic href=/linux/ title=[Linux] target=_blank><i class="fa fa-folder"></i>[Linux]</a></section><section class=article-tags><a class=article-tag href=/tag/linux target=_blank><i class="fa fa-tag"></i>Linux</a>
<a class=article-tag href=/tag/sh target=_blank><i class="fa fa-tag"></i>sh</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/d9c69b17efc053ed8acfd76b7d992a6fec64dc6d target=_blank><i class="fa fa-code-fork"></i>d9c69b1</a>
<span class=article-git-commit-subject>upgrade homebrew</span>
<span class=article-git-commit-time>2024-12-21 12:19</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/linux/script/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-page><div class=article-page-next><span>下一篇 : </span><a href=/linux/ssh/ target=_blank>[Linux] SSH</a></div></section></article><section id=article-comment class=article-comment><script src=https://utteranc.es/client.js repo=linianhui/blog issue-term=pathname label=blog-comment theme=github-light crossorigin=anonymous async></script></section></main><footer class=footer><section>Copyright © 2026 by <a href=https://github.com/linianhui/blog target=_blank>Timetombs</a></section><section><a class=article-git-commit href=https://github.com/linianhui/blog/commit/39b6c03faec1d2881596df2cd2436da10cdf9eef target=_blank><i class="fa fa-code-fork"></i>39b6c03</a>
Powered by
<a href=https://github.com/actions target=_blank>GitHub Actions</a>
,
<a href=https://github.com/gohugoio/hugo target=_blank>Hugo</a>
and
<a href=https://github.com/utterance/utterances target=_blank>utterances</a>
Hosted on <a href=https://pages.github.com/ target=_blank>GitHub Pages</a><section></footer></main><aside class=toolbar><a class="fa fa-list" href=javascript:blog.toggleToc(); title=目录></a><a class="fa fa-comments" href=#article-comment title=评论></a><a class="fa fa-arrow-up" href=javascript:scroll(0,0); title=返回顶部></a></aside><script type=text/javascript>var _hmt=_hmt||[];blog.addOnScorllEvent()</script></body></html>