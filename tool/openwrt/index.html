<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="X6gTMGCy1-_vb5i3aja3ZZyzPY3raiKRJp4VIhOAX24"><meta name=msvalidate.01 content="CDE7502649B75529BD0FCFE89B056E38"><title>[工具] openwrt - Timetombs</title>
<link rel=icon type=image/svg href=/favicon.svg><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/normalize/8.0.1/normalize.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href='/asset/blog.css?time=2026-01-25T21%3a48%3a02Z%2b08%3a00' rel=stylesheet type=text/css><script src=https://s4.zstatic.net/npm/currency.js@2.0.4/dist/currency.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://s4.zstatic.net/ajax/libs/moment.js/2.30.1/moment.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src='/asset/blog.js?time=2026-01-25T21%3a48%3a02Z%2b08%3a00' type=application/javascript></script><script type=text/javascript>blog.isMobile()&&document.write('<link href="/asset/blog.mobile.css?time=2026-01-25T21%3A48%3A02Z%2B08%3A00" rel="stylesheet">')</script></head><body><div id=horizontal-progress class=horizontal-progress></div><aside id=toc class=toc><section class=toc-header><a class=toc-page-title href=/tool/ target=_blank>[工具]</a></section><section class="toc-page selected"><span class=toc-page-title>[工具] openwrt</span><nav id=TableOfContents><ul><li><a href=#1-flush>1 flush</a><ul><li><a href=#breed>1.1 breed</a></li><li><a href=#openwrt>1.2 openwrt</a></li><li><a href=#upgrade>1.3 upgrade</a><ul><li><a href=#131-initramfs-kernel>1.3.1 initramfs-kernel</a></li><li><a href=#132-squashfs-factory>1.3.2 squashfs-factory</a></li><li><a href=#133-squashfs-sysupgrade>1.3.3 squashfs-sysupgrade</a></li></ul></li></ul></li><li><a href=#software>2 software</a><ul><li><a href=#v2ray>2.1 openwrt-v2ray</a></li><li><a href=#usb>2.2 USB</a></li><li><a href=#samba>2.3 Samba</a></li><li><a href=#stats>2.4 Stats</a></li><li><a href=#v2raya>2.5 V2rayA</a></li><li><a href=#vlmcsd>2.4 vlmcsd</a></li></ul></li><li><a href=#x86>3 x86</a></li><li><a href=#hiwifi-ssh>4 hiwifi ssh</a></li><li><a href=#reference>5 reference</a></li></ul></nav></section><section class=toc-page><a class=toc-page-title href=/tool/traefik/ target=_blank>[工具] traefik</a></section><section class=toc-page><a class=toc-page-title href=/tool/android/ target=_blank>[工具] android</a></section><section class=toc-page><a class=toc-page-title href=/tool/tax/ target=_blank>[工具] 个税计算器</a></section><section class=toc-page><a class=toc-page-title href=/tool/app/ target=_blank>[工具] app</a></section><section class=toc-page><a class=toc-page-title href=/tool/v2ray/ target=_blank>[工具] v2ray</a></section><section class=toc-page><a class=toc-page-title href=/tool/goproxy/ target=_blank>[工具] goproxy</a></section><section class=toc-page><a class=toc-page-title href=/tool/caddy/ target=_blank>[工具] caddy</a></section><section class=toc-page><a class=toc-page-title href=/tool/miniserve/ target=_blank>[工具] miniserve</a></section><section class=toc-page><a class=toc-page-title href=/tool/rinetd/ target=_blank>[工具] rinetd</a></section><section class=toc-page><a class=toc-page-title href=/tool/etc/ target=_blank>[工具] etc</a></section><section class=toc-page><a class=toc-page-title href=/tool/pc/ target=_blank>[工具] pc</a></section><section class=toc-page><a class=toc-page-title href=/tool/loan/ target=_blank>[工具] 房贷计算器</a></section><section class=toc-page><a class=toc-page-title href=/tool/vlmcsd/ target=_blank>[工具] vlmcsd</a></section><section class=toc-page><a class=toc-page-title href=/tool/rio/ target=_blank>[工具] Rio Terminal</a></section><script type=text/javascript>blog.isPC()&&blog.toggleToc()</script></aside><main class=main><header class=header><hgroup class=header-hgroup><h1 class=header-hgroup-title><a href=/>Timetombs</a></h1><h2 class=header-hgroup-subtitle>泛义的工具是文明的基础，而确指的工具却是愚人的器物</h2></hgroup><nav class=header-nav><a class=header-nav-item href=/topic/ title=专题 target=_self><i class="fa fa-folder"></i>专题</a>
<a class=header-nav-item href=/tag/ title=标签 target=_self><i class="fa fa-tags"></i>标签</a>
<a class=header-nav-item href=/archive/ title=归档 target=_self><i class="fa fa-archive"></i>归档</a>
<a class=header-nav-item href=https://linianhui.cnblogs.com title=博客园 target=_black><img src=/asset/cnblogs.favicon.svg>博客园</a>
<a class=header-nav-item href=https://github.com/linianhui/blog title=GitHub target=_black><i class="fa fa-github"></i>GitHub</a></nav><div class=header-stats><div class=stats><span>共
<i>66<sub>h</sub>
</i>/
<i>118<sub>a</sub>
</i>篇</span><div class=stats-date>，更新于 2026-01-25T21:48:02Z+08:00 by &nbsp;
<a class=git-commit href=https://github.com/linianhui/blog/commit/39b6c03faec1d2881596df2cd2436da10cdf9eef target=_blank><i class="fa fa-code-fork"></i>39b6c03</a></div></div><form class=search method=GET target=_blank action=https://www.bing.com/search><input name=q class=search-input type=search placeholder=search... results=5 onkeypress="search_param.value=search_param_site.value+this.value">
<input id=search_param_site type=hidden value="site:linianhui.github.io ">
<input name=q id=search_param type=hidden></form></div></header><main class=content><article class=article><h1 class=article-title>[工具] openwrt</h1><div class=article-copyright><span>版权声明 - </span><a href=/copyright/cc target=_blank>CC BY-NC-SA 4.0</a></div><section class=article-meta><section class=article-date>2017-03-23 23:01，约1141字，阅读约3分钟</section><section class=article-topics><a class=article-topic href=/tool/ title=[工具] target=_blank><i class="fa fa-folder"></i>[工具]</a></section><section class=article-tags><a class=article-tag href=/tag/breed target=_blank><i class="fa fa-tag"></i>breed</a>
<a class=article-tag href=/tag/mtd target=_blank><i class="fa fa-tag"></i>mtd</a>
<a class=article-tag href=/tag/openwrt target=_blank><i class="fa fa-tag"></i>openwrt</a>
<a class=article-tag href=/tag/v2ray target=_blank><i class="fa fa-tag"></i>v2ray</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/f03f89287f9b8188908cf98f6afa21e0f3b5f2b0 target=_blank><i class="fa fa-code-fork"></i>f03f892</a>
<span class=article-git-commit-subject>Update index.md</span>
<span class=article-git-commit-time>2025-06-29 00:08</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-content><h1 id=1-flush><i id=locator-1-flush class=header-locator></i>
<a href=#1-flush class=article-h-a>1 flush</a></h1><h2 id=breed><i id=locator-breed class=header-locator></i>
<a href=#breed class=article-h-a>1.1 breed</a></h2><p><code>breed</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>是一个bootloader，类似与电脑中的BIOS以及安卓手机中的recovery，用来刷机用的。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># 登陆到路由器</span>
</span></span><span style=display:flex><span>ssh root@192.168.199.1 -v -o hostKeyalgorithms=ssh-rsa
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># 复制breed.bin到路由器</span>
</span></span><span style=display:flex><span>scp breed.bin root@192.168.199.1:/root/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># 刷入breed</span>
</span></span><span style=display:flex><span>mtd -r write breed.bin u-boot
</span></span></code></pre></div><p>成功刷入后路由器会自动重启，启动后长按重置键3～6秒松开即可进入breed模式。breed的默认ip为<code>192.168.1.1</code>，故而需要网线连接路由器的LAN口到电脑网口，电脑设置IP如下：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>ip      192.168.1.2
</span></span><span style=display:flex><span>netmask 255.255.255.0
</span></span><span style=display:flex><span>dns     192.168.1.1
</span></span></code></pre></div><p>然后访问<a href=http://192.168.1.1 target=_blank rel="noopener norefferrer">http://192.168.1.1</a>即可。</p><h2 id=openwrt><i id=locator-openwrt class=header-locator></i>
<a href=#openwrt class=article-h-a>1.2 openwrt</a></h2><p><code>openwrt</code><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>直接用<code>mtd</code>刷入也可以。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># 刷路由器固件</span>
</span></span><span style=display:flex><span>mtd -r write openwrt.bin firmware
</span></span></code></pre></div><p>aliyun-mirror:<a href=https://mirrors.aliyun.com/openwrt/releases/22.03.2/targets/x86/64/ target=_blank rel="noopener norefferrer">https://mirrors.aliyun.com/openwrt/releases/22.03.2/targets/x86/64/</a></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:green># mirror</span>
</span></span><span style=display:flex><span>sed -i <span style=color:#a31515>&#39;s_downloads.openwrt.org_mirrors.aliyun.com/openwrt_&#39;</span> /etc/opkg/distfeeds.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># 安装ca-certificates</span>
</span></span><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>opkg install ca-certificates
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># 更新所有可升级的包</span>
</span></span><span style=display:flex><span>opkg list-upgradable | cut -f 1 -d <span style=color:#a31515>&#39; &#39;</span> | xargs -r opkg upgrade
</span></span></code></pre></div><h2 id=upgrade><i id=locator-upgrade class=header-locator></i>
<a href=#upgrade class=article-h-a>1.3 upgrade</a></h2><p><a href=https://firmware-selector.openwrt.org/ target=_blank rel="noopener norefferrer">https://firmware-selector.openwrt.org/</a></p><h3 id=131-initramfs-kernel><i id=locator-131-initramfs-kernel class=header-locator></i>
<a href=#131-initramfs-kernel class=article-h-a>1.3.1 initramfs-kernel</a></h3><p>测试用，不会保存任何设置。</p><p><a href=https://downloads.openwrt.org/releases/22.03.2/targets/ramips/mt7621/openwrt-22.03.2-ramips-mt7621-hiwifi_hc5962-initramfs-kernel.bin target=_blank rel="noopener norefferrer">https://downloads.openwrt.org/releases/22.03.2/targets/ramips/mt7621/openwrt-22.03.2-ramips-mt7621-hiwifi_hc5962-initramfs-kernel.bin</a></p><h3 id=132-squashfs-factory><i id=locator-132-squashfs-factory class=header-locator></i>
<a href=#132-squashfs-factory class=article-h-a>1.3.2 squashfs-factory</a></h3><p>从bootloader安装的包，会抹除当前设置，相当于重新安装。不过可以从旧版的openwrt导出 config archive文件，然后再恢复。</p><p><a href=https://downloads.openwrt.org/releases/22.03.2/targets/ramips/mt7621/openwrt-22.03.2-ramips-mt7621-hiwifi_hc5962-squashfs-factory.bin target=_blank rel="noopener norefferrer">https://downloads.openwrt.org/releases/22.03.2/targets/ramips/mt7621/openwrt-22.03.2-ramips-mt7621-hiwifi_hc5962-squashfs-factory.bin</a></p><h3 id=133-squashfs-sysupgrade><i id=locator-133-squashfs-sysupgrade class=header-locator></i>
<a href=#133-squashfs-sysupgrade class=article-h-a>1.3.3 squashfs-sysupgrade</a></h3><p>从openwrt升级openwrt的包，可以保留当前版本设置。</p><p><a href=https://downloads.openwrt.org/releases/22.03.2/targets/ramips/mt7621/openwrt-22.03.2-ramips-mt7621-hiwifi_hc5962-squashfs-sysupgrade.bin target=_blank rel="noopener norefferrer">https://downloads.openwrt.org/releases/22.03.2/targets/ramips/mt7621/openwrt-22.03.2-ramips-mt7621-hiwifi_hc5962-squashfs-sysupgrade.bin</a></p><h1 id=software><i id=locator-software class=header-locator></i>
<a href=#software class=article-h-a>2 software</a></h1><p><div class="highlight-file highlight-file_opened" id=hf-b711ac48eff803032fda843cdce02a20><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-b711ac48eff803032fda843cdce02a20","highlight-file_opened")'>config/network</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/config/network title="下载 config/network" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/config/network title="源码 config/network"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>config device
</span></span><span style=display:flex><span>	option name <span style=color:#a31515>&#39;br-lan&#39;</span>
</span></span><span style=display:flex><span>	option type <span style=color:#a31515>&#39;bridge&#39;</span>
</span></span><span style=display:flex><span>	list ports <span style=color:#a31515>&#39;eth0&#39;</span>
</span></span><span style=display:flex><span>	option ipv6 <span style=color:#a31515>&#39;0&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>config interface <span style=color:#a31515>&#39;wan&#39;</span>
</span></span><span style=display:flex><span>	option proto <span style=color:#a31515>&#39;dhcp&#39;</span>
</span></span><span style=display:flex><span>	option device <span style=color:#a31515>&#39;br-lan&#39;</span>
</span></span><span style=display:flex><span>	option hostname <span style=color:#a31515>&#39;*&#39;</span></span></span></code></pre></div></div></div><br><div class="highlight-file highlight-file_opened" id=hf-93f11234a3fc624573d285b500d09f70><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-93f11234a3fc624573d285b500d09f70","highlight-file_opened")'>app.sh</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/app.sh title="下载 app.sh" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/app.sh title="源码 app.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>#opkg install luci-app-acl</span>
</span></span><span style=display:flex><span><span style=color:green>#opkg install luci-app-commands</span>
</span></span><span style=display:flex><span>opkg install luci-app-watchcat
</span></span><span style=display:flex><span><span style=color:green>#opkg install luci-app-cshark</span>
</span></span><span style=display:flex><span>opkg install tcpdump
</span></span><span style=display:flex><span><span style=color:green>##opkg install luci-app-netdata</span>
</span></span><span style=display:flex><span><span style=color:green>#opkg install luci-app-natmap</span>
</span></span></code></pre></div></div></div></p><h2 id=v2ray><i id=locator-v2ray class=header-locator></i>
<a href=#v2ray class=article-h-a>2.1 openwrt-v2ray</a></h2><p><code>openwrt-v2ray</code><sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>安装步骤</p><ol><li><code>ca-certificates</code>：在线安装即可。</li><li><code>v2ray-core-mini_4.37.3-1_mipsel_24kc.ipk</code>：下载ipk文件，上传安装。</li></ol><p>默认的安装目录<code>/usr/bin/v2ray</code>。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green># 复制相关的配置文件</span>
</span></span><span style=display:flex><span>scp config.json geoip.dat geosite.dat root@10.1.199.1:/usr/bin/
</span></span></code></pre></div><h2 id=usb><i id=locator-usb class=header-locator></i>
<a href=#usb class=article-h-a>2.2 USB</a></h2><div class="highlight-file highlight-file_opened" id=hf-0f6c500c4132bd06d64ae8fe96ada759><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-0f6c500c4132bd06d64ae8fe96ada759","highlight-file_opened")'>usb.sh</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/usb.sh title="下载 usb.sh" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/usb.sh title="源码 usb.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install kmod-usb-core
</span></span><span style=display:flex><span>opkg install kmod-scsi-core
</span></span><span style=display:flex><span>opkg install kmod-scsi-generic
</span></span><span style=display:flex><span>opkg install kmod-usb-uhci
</span></span><span style=display:flex><span>opkg install kmod-usb-ohci
</span></span><span style=display:flex><span>opkg install kmod-usb2
</span></span><span style=display:flex><span>opkg install kmod-usb3
</span></span><span style=display:flex><span>opkg install kmod-usb-storage
</span></span><span style=display:flex><span>opkg install kmod-usb-storage-extras
</span></span><span style=display:flex><span>opkg install kmod-fs-exfat
</span></span><span style=display:flex><span>opkg install block-mount
</span></span><span style=display:flex><span>opkg install usbutils
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lsusb</span></span></code></pre></div></div></div><h2 id=samba><i id=locator-samba class=header-locator></i>
<a href=#samba class=article-h-a>2.3 Samba</a></h2><div class="highlight-file highlight-file_opened" id=hf-ab57a18311e4fa8eae26a7b9180e86e6><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-ab57a18311e4fa8eae26a7b9180e86e6","highlight-file_opened")'>samba.sh</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/samba.sh title="下载 samba.sh" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/samba.sh title="源码 samba.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>opkg install luci-app-samba4</span></span></code></pre></div></div></div><h2 id=stats><i id=locator-stats class=header-locator></i>
<a href=#stats class=article-h-a>2.4 Stats</a></h2><div class="highlight-file highlight-file_opened" id=hf-3439d74a42274ab38c42e11c67e88803><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-3439d74a42274ab38c42e11c67e88803","highlight-file_opened")'>stats.sh</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/stats.sh title="下载 stats.sh" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/stats.sh title="源码 stats.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install luci-app-statistics
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green># 查询支持的监控模块</span>
</span></span><span style=display:flex><span><span style=color:green># opkg list | grep collectd-mod | sort</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install collectd-mod-cpu
</span></span><span style=display:flex><span>opkg install collectd-mod-df
</span></span><span style=display:flex><span>opkg install collectd-mod-disk
</span></span><span style=display:flex><span>opkg install collectd-mod-load
</span></span><span style=display:flex><span>opkg install collectd-mod-ipstatistics
</span></span><span style=display:flex><span><span style=color:green>#opkg install collectd-mod-iptables</span>
</span></span><span style=display:flex><span>opkg install collectd-mod-memory
</span></span><span style=display:flex><span>opkg install collectd-mod-network
</span></span><span style=display:flex><span>opkg install collectd-mod-ping
</span></span><span style=display:flex><span><span style=color:green>#opkg install collectd-mod-protocols</span>
</span></span><span style=display:flex><span>/etc/init.d/collectd enable</span></span></code></pre></div></div></div><h2 id=v2raya><i id=locator-v2raya class=header-locator></i>
<a href=#v2raya class=article-h-a>2.5 V2rayA</a></h2><div class="highlight-file highlight-file_opened" id=hf-6a711e6846374a0892b180baaa04e54d><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-6a711e6846374a0892b180baaa04e54d","highlight-file_opened")'>v2raya.sh</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/v2raya.sh title="下载 v2raya.sh" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/v2raya.sh title="源码 v2raya.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install luci-app-v2raya
</span></span></code></pre></div></div></div><h2 id=vlmcsd><i id=locator-vlmcsd class=header-locator></i>
<a href=#vlmcsd class=article-h-a>2.4 vlmcsd</a></h2><div class="highlight-file highlight-file_opened" id=hf-3685873fb8939a5186c190516b231df1><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-3685873fb8939a5186c190516b231df1","highlight-file_opened")'>vlmcsd.sh</a><a class="fa fa-download highlight-file-download" target=_blank href=/tool/openwrt/vlmcsd.sh title="下载 vlmcsd.sh" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/vlmcsd.sh title="源码 vlmcsd.sh"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>opkg update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install luci-app-vlmcsd</span></span></code></pre></div></div></div><h1 id=x86><i id=locator-x86 class=header-locator></i>
<a href=#x86 class=article-h-a>3 x86</a></h1><p>mirror: <a href=https://developer.aliyun.com/mirror/openwrt target=_blank rel="noopener norefferrer">https://developer.aliyun.com/mirror/openwrt</a><br>x86:<a href=https://downloads.openwrt.org/releases/22.03.2/targets/x86/64/ target=_blank rel="noopener norefferrer">https://downloads.openwrt.org/releases/22.03.2/targets/x86/64/</a><br>download:<a href=https://downloads.openwrt.org/releases/22.03.5/targets/x86/64/openwrt-22.03.5-x86-64-generic-ext4-combined.img.gz target=_blank rel="noopener norefferrer">https://downloads.openwrt.org/releases/22.03.5/targets/x86/64/openwrt-22.03.5-x86-64-generic-ext4-combined.img.gz</a></p><p>各版本区别</p><ol><li>squashfs : 只读文件系统，支持重置，不支持扩容。</li><li>ext4 : 可读写，不支持重置，支持扩容。</li></ol><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>vim /etc/config/network
</span></span><span style=display:flex><span><span style=color:green># add wan</span>
</span></span><span style=display:flex><span><span style=color:green># 替换镜像</span>
</span></span><span style=display:flex><span>sed -i <span style=color:#a31515>&#39;s_downloads.openwrt.org_mirrors.aliyun.com/openwrt_&#39;</span> /etc/opkg/distfeeds.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install fdisk
</span></span><span style=display:flex><span>fdisk -l
</span></span><span style=display:flex><span><span style=color:green># F查看剩余空间 n创建新分区</span>
</span></span><span style=display:flex><span>fdisk /dev/sda
</span></span><span style=display:flex><span>fdisk -l
</span></span><span style=display:flex><span><span style=color:green># 为新创建的分区格式化文件系统为ext4</span>
</span></span><span style=display:flex><span>mkfs.ext4 /dev/sda3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opkg install block-mount
</span></span></code></pre></div><h1 id=hiwifi-ssh><i id=locator-hiwifi-ssh class=header-locator></i>
<a href=#hiwifi-ssh class=article-h-a>4 hiwifi ssh</a></h1><script src=https://cdn.bootcdn.net/ajax/libs/crypto-js/4.2.0/crypto-js.js></script><script src=/tool/openwrt/hiwifi/ssh.js></script>在浏览器中计算开启SSH，可在断网下使用。<table><tr><td><label for=hiwifiDomain>hiwifi</label></td><td><input id=hiwifiDomain type=text value=192.168.199.1 size=32 oninput=onHiwifiDomainChange()></td><td><button type=button onclick=bthAutoCalcCloudToken(this)>自动计算cloud_token</button><br></td></tr><tr><td><label for=hiwifiUuid>uuid</label></td><td><a id=aGetUuid target=_blank style=margin:0></a><br><input id=hiwifiUuid type=text size=32></td><td rowspan=2><button type=button onclick=bthCalcCloudToken(this)>手动计算cloud_token</button><br></td></tr><tr><td><label for=hiwifiLocalToken>local_token</label></td><td><a id=aGetLocalToken target=_blank style=margin:0></a><br><input id=hiwifiLocalToken type=text size=80></td></tr><tr><td><label for=hiwifiCloudToken>cloud_token</label></td><td><label id=hiwifiCloudToken></td><td><a id=aOpenSsh target=_blank>打开SSH</a>
<a id=aCloseSsh target=_blank>关闭SSH</a></td></tr></table><script type=text/javascript>function bthAutoCalcCloudToken(e){e.disabled=!0,blog.httpGetJson(aGetUuid.href,function(t){console.log("get uuid response",t),t&&(hiwifiUuid.value=t.data.uuid),blog.httpGetJson(aGetLocalToken.href,function(t){console.log("get local_token response",t),t&&(hiwifiLocalToken.value=t.data),bthCalcCloudToken(e),e.disabled=!1})})}function bthCalcCloudToken(e){e.disabled=!0;var t,n=hiwifiUuid.value,s=hiwifiLocalToken.value;try{t=calcCloudToken(n,s)}catch(e){t=null,console.error(e)}t?hiwifiCloudToken.innerHTML=t:e.innerText.startsWith("自动")?hiwifiCloudToken.innerHTML="自动计算cloud_token失败，请尝试手动计算":hiwifiCloudToken.innerHTML="手动计算cloud_token失败",aOpenSsh.href=buildOpenSshUrl(hiwifiDomain.value,t),e.disabled=!1}function onHiwifiDomainChange(){var n=buildCloseSshUrl(hiwifiDomain.value),e=buildGetUuidUrl(hiwifiDomain.value),t=buildGetLocalTokenUrl(hiwifiDomain.value);aCloseSsh.href=n,aGetUuid.href=e,aGetUuid.innerHTML=e,aGetLocalToken.href=t,aGetLocalToken.innerHTML=t}onHiwifiDomainChange()</script><h1 id=reference><i id=locator-reference class=header-locator></i>
<a href=#reference class=article-h-a>5 reference</a></h1><ol><li><code>toh-online</code> : <a href=https://toh.openwrt.org/ target=_blank rel="noopener norefferrer">https://toh.openwrt.org/</a></li><li><code>toh-online-json</code> : <a href=https://openwrt.org/toh.json target=_blank rel="noopener norefferrer">https://openwrt.org/toh.json</a></li><li><code>toh-home</code> : <a href=https://openwrt.org/toh/views/start target=_blank rel="noopener norefferrer">https://openwrt.org/toh/views/start</a></li><li><code>supported_devices</code> : <a href=https://openwrt.org/supported_devices target=_blank rel="noopener norefferrer">https://openwrt.org/supported_devices</a></li><li><code>local_token</code>: <a href=http://hiwifi.com/local-ssh target=_blank rel="noopener norefferrer">http://hiwifi.com/local-ssh</a></li><li><code>uuid</code>: <a href=http://hiwifi.com/cgi-bin/turbo/proxy/router_info target=_blank rel="noopener norefferrer">http://hiwifi.com/cgi-bin/turbo/proxy/router_info</a></li><li><code>ssh</code>: <a href=http://www.hiwifi.wtf target=_blank rel="noopener norefferrer">http://www.hiwifi.wtf</a></li><li>aliyun-mirrors :<a href=https://mirrors.aliyun.com/openwrt/releases/22.03.2/targets/ramips/mt7621 target=_blank rel="noopener norefferrer">https://mirrors.aliyun.com/openwrt/releases/22.03.2/targets/ramips/mt7621</a></li></ol><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>breed官网：<a href=https://breed.hackpascal.net target=_blank rel="noopener norefferrer">https://breed.hackpascal.net</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>openwrt：<a href=https://openwrt.org/toh/views/toh_fwdownload target=_blank rel="noopener norefferrer">https://openwrt.org/toh/views/toh_fwdownload</a> <a href=https://openwrt.org/docs/guide-user/start#installation target=_blank rel="noopener norefferrer">https://openwrt.org/docs/guide-user/start#installation</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>openwrt-v2ray项目地址：<a href=https://github.com/kuoruan/openwrt-v2ray/ target=_blank rel="noopener norefferrer">https://github.com/kuoruan/openwrt-v2ray/</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></section><section class=article-meta><section class=article-date>2017-03-23 23:01，约1141字，阅读约3分钟</section><section class=article-topics><a class=article-topic href=/tool/ title=[工具] target=_blank><i class="fa fa-folder"></i>[工具]</a></section><section class=article-tags><a class=article-tag href=/tag/breed target=_blank><i class="fa fa-tag"></i>breed</a>
<a class=article-tag href=/tag/mtd target=_blank><i class="fa fa-tag"></i>mtd</a>
<a class=article-tag href=/tag/openwrt target=_blank><i class="fa fa-tag"></i>openwrt</a>
<a class=article-tag href=/tag/v2ray target=_blank><i class="fa fa-tag"></i>v2ray</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/f03f89287f9b8188908cf98f6afa21e0f3b5f2b0 target=_blank><i class="fa fa-code-fork"></i>f03f892</a>
<span class=article-git-commit-subject>Update index.md</span>
<span class=article-git-commit-time>2025-06-29 00:08</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/tool/openwrt/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-page><div class=article-page-next><span>下一篇 : </span><a href=/tool/traefik/ target=_blank>[工具] traefik</a></div></section></article><section id=article-comment class=article-comment><script src=https://utteranc.es/client.js repo=linianhui/blog issue-term=pathname label=blog-comment theme=github-light crossorigin=anonymous async></script></section></main><footer class=footer><section>Copyright © 2026 by <a href=https://github.com/linianhui/blog target=_blank>Timetombs</a></section><section><a class=article-git-commit href=https://github.com/linianhui/blog/commit/39b6c03faec1d2881596df2cd2436da10cdf9eef target=_blank><i class="fa fa-code-fork"></i>39b6c03</a>
Powered by
<a href=https://github.com/actions target=_blank>GitHub Actions</a>
,
<a href=https://github.com/gohugoio/hugo target=_blank>Hugo</a>
and
<a href=https://github.com/utterance/utterances target=_blank>utterances</a>
Hosted on <a href=https://pages.github.com/ target=_blank>GitHub Pages</a><section></footer></main><aside class=toolbar><a class="fa fa-list" href=javascript:blog.toggleToc(); title=目录></a><a class="fa fa-comments" href=#article-comment title=评论></a><a class="fa fa-arrow-up" href=javascript:scroll(0,0); title=返回顶部></a></aside><script type=text/javascript>var _hmt=_hmt||[];blog.addOnScorllEvent()</script></body></html>