<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="X6gTMGCy1-_vb5i3aja3ZZyzPY3raiKRJp4VIhOAX24"><meta name=msvalidate.01 content="CDE7502649B75529BD0FCFE89B056E38"><title>[代码规范] HTTP APIs 设计/规范指南 - Timetombs</title>
<link rel=icon type=image/svg href=/favicon.svg><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/normalize/8.0.1/normalize.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href='/asset/blog.css?time=2025-10-26T19%3a03%3a29Z%2b08%3a00' rel=stylesheet type=text/css><script src=https://s4.zstatic.net/npm/currency.js@2.0.4/dist/currency.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://s4.zstatic.net/ajax/libs/moment.js/2.30.1/moment.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src='/asset/blog.js?time=2025-10-26T19%3a03%3a29Z%2b08%3a00' type=application/javascript></script><script type=text/javascript>blog.isMobile()&&document.write('<link href="/asset/blog.mobile.css?time=2025-10-26T19%3A03%3A29Z%2B08%3A00" rel="stylesheet">')</script></head><body><div id=horizontal-progress class=horizontal-progress></div><aside id=toc class=toc><section class=toc-header><a class=toc-page-title href=/code-guide/ target=_blank>[代码规范]</a></section><section class="toc-page selected"><span class=toc-page-title>[代码规范] HTTP APIs 设计/规范指南</span><nav id=TableOfContents><ul><li><a href=#design-guide>1 设计指南</a><ul><li><a href=#resource-based-design-api>1.1 基于<code>资源</code>设计API</a></li><li><a href=#identify-resources-based-on-url>1.2 基于<code>URL</code>标识<code>资源</code></a></li><li><a href=#operate-on-url-identified-resources-based-on-http-and-json>1.3 基于<code>HTTP</code>和<code>JSON</code>操作<code>URL</code>标识的<code>资源</code></a></li></ul></li><li><a href=#url>2 URL</a></li><li><a href=#http>3 HTTP</a><ul><li><a href=#http-method>3.1 HTTP Method</a><ul><li><a href=#http-method-names>3.1.1 Names</a></li><li><a href=#http-method-semantics>3.1.2 Semantics</a></li></ul></li><li><a href=#http-header>3.2 HTTP Header</a></li><li><a href=#http-status-code>3.3 HTTP Status Code</a></li><li><a href=#http-error-response>3.4 HTTP Error Response</a></li></ul></li><li><a href=#json>4 JSON</a></li><li><a href=#versioning>5 版本化</a></li><li><a href=#name-case>6 命名规则</a><ul><li><a href=#name-case-url>6.1 URL</a></li><li><a href=#name-case-json>6.2 JSON</a></li></ul></li><li><a href=#date-time>7 Date Time</a></li><li><a href=#i18n>8 i18n</a></li><li><a href=#other>9 其他</a><ul><li><a href=#http-request-common-param>9.1 HTTP Request 公共查询参数</a></li><li><a href=#http-response-page>9.2 HTTP Response 分页数据结构</a></li></ul></li><li><a href=#example>10 示例</a></li><li><a href=#reference>11 参考资料</a></li></ul></nav></section><section class=toc-page><a class=toc-page-title href=/code-guide/csharp/ target=_blank>[代码规范] C#规范指南</a></section><script type=text/javascript>blog.isPC()&&blog.toggleToc()</script></aside><main class=main><header class=header><hgroup class=header-hgroup><h1 class=header-hgroup-title><a href=/>Timetombs</a></h1><h2 class=header-hgroup-subtitle>泛义的工具是文明的基础，而确指的工具却是愚人的器物</h2></hgroup><nav class=header-nav><a class=header-nav-item href=/topic/ title=专题 target=_self><i class="fa fa-folder"></i>专题</a>
<a class=header-nav-item href=/tag/ title=标签 target=_self><i class="fa fa-tags"></i>标签</a>
<a class=header-nav-item href=/archive/ title=归档 target=_self><i class="fa fa-archive"></i>归档</a>
<a class=header-nav-item href=https://linianhui.cnblogs.com title=博客园 target=_black><img src=/asset/cnblogs.favicon.svg>博客园</a>
<a class=header-nav-item href=https://github.com/linianhui/blog title=GitHub target=_black><i class="fa fa-github"></i>GitHub</a></nav><div class=header-stats><div class=stats><span>共
<i>66<sub>h</sub>
</i>/
<i>118<sub>a</sub>
</i>篇</span><div class=stats-date>，更新于 2025-10-26T19:03:29Z+08:00 by &nbsp;
<a class=git-commit href=https://github.com/linianhui/blog/commit/2fac07e818d6d4ad6b78781efea82c28769c8c02 target=_blank><i class="fa fa-code-fork"></i>2fac07e</a></div></div><form class=search method=GET target=_blank action=https://www.bing.com/search><input name=q class=search-input type=search placeholder=search... results=5 onkeypress="search_param.value=search_param_site.value+this.value">
<input id=search_param_site type=hidden value="site:linianhui.github.io ">
<input name=q id=search_param type=hidden></form></div></header><main class=content><article class=article><h1 class=article-title>[代码规范] HTTP APIs 设计/规范指南
<i class="fa fa-fire article-title-weight" aria-hidden=true title=顶置></i></h1><div class=article-copyright><span>版权声明 - </span><a href=/copyright/cc target=_blank>CC BY-NC-SA 4.0</a></div><section class=article-meta><section class=article-date>2018-03-31 09:02，约4980字，阅读约10分钟</section><section class=article-topics><a class=article-topic href=/code-guide/ title=[代码规范] target=_blank><i class="fa fa-folder"></i>[代码规范]</a></section><section class=article-tags><a class=article-tag href=/tag/api target=_blank><i class="fa fa-tag"></i>API</a>
<a class=article-tag href=/tag/http target=_blank><i class="fa fa-tag"></i>HTTP</a>
<a class=article-tag href=/tag/i18n target=_blank><i class="fa fa-tag"></i>i18n</a>
<a class=article-tag href=/tag/json target=_blank><i class="fa fa-tag"></i>JSON</a>
<a class=article-tag href=/tag/rest target=_blank><i class="fa fa-tag"></i>REST</a>
<a class=article-tag href=/tag/url target=_blank><i class="fa fa-tag"></i>URL</a>
<a class=article-tag href=/tag/%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99 target=_blank><i class="fa fa-tag"></i>命名规则</a>
<a class=article-tag href=/tag/%E8%A1%A8%E8%BF%B0 target=_blank><i class="fa fa-tag"></i>表述</a>
<a class=article-tag href=/tag/%E8%AE%BE%E8%AE%A1%E6%8C%87%E5%8D%97 target=_blank><i class="fa fa-tag"></i>设计指南</a>
<a class=article-tag href=/tag/%E8%B5%84%E6%BA%90 target=_blank><i class="fa fa-tag"></i>资源</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/c9d8568dc5b4d70175dd82a4072b242560a041f7 target=_blank><i class="fa fa-code-fork"></i>c9d8568</a>
<span class=article-git-commit-subject>fix typo</span>
<span class=article-git-commit-time>2024-12-29 22:26</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/code-guide/http-api/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-content><p>根据REST APIs的成熟度模型 ，此规范关注的是<code>Level 2</code>的APIs。<br><img src=richardson-maturity-model.png loading=lazy decoding=auto alt="REST APIs 成熟度模型" title="REST APIs 成熟度模型"></p><h1 id=design-guide><i id=locator-design-guide class=header-locator></i>
<a href=#design-guide class=article-h-a>1 设计指南</a></h1><p>HTTP APIs主要由四部分组成 : <a href=#http>#HTTP</a>, <a href=#url>#URL</a>, <code>资源</code>，<code>资源的表述</code>。</p><blockquote><p>资源的表述通常都采用<a href=#json>#JSON</a>格式，故而下文使用<a href=#json>#JSON</a>代指<code>资源的表述</code>。</p></blockquote><p>根据这些组成部分，按照以下<strong>3</strong>个步骤设计APIs。</p><h2 id=resource-based-design-api><i id=locator-resource-based-design-api class=header-locator></i>
<a href=#resource-based-design-api class=article-h-a>1.1 基于<code>资源</code>设计API</a></h2><p>设计HTTP APIs的首要任务是识别出业务领域中的资源。资源是对服务端提供的服务进行分解、组合后的一个被命名的抽象概念。</p><blockquote><p>有很重要一点需要明确 : 资源<code>≠</code>数据表，它们两个之间并没有直接的映射关系。如果直接把数据存储结构映射为资源，则只会让资源无法有效的表达业务需要，也会造成资源本身和底层存储的紧耦合。</p></blockquote><p>资源的设计是以<code>名词</code>为中心的。比如<code>今天的天气</code>是一个资源; 而<strong>获取今天的天气</strong>则不是，它代表的是对<code>今天的天气</code>资源的一个读取操作。基于此我们可以抽象出来一个<code>天气</code>的资源。</p><h2 id=identify-resources-based-on-url><i id=locator-identify-resources-based-on-url class=header-locator></i>
<a href=#identify-resources-based-on-url class=article-h-a>1.2 基于<code>URL</code>标识<code>资源</code></a></h2><p>识别出<code>资源</code>后，则需要为其分配一个<a href=#url>#URL</a>进行标识。</p><ol><li>一个<code>资源</code>可以有多个<a href=#url>#URL</a>。</li><li>一个<a href=#url>#URL</a>只能标识一个<code>资源</code>。</li></ol><blockquote><p>总结来说就是<code>资源 : URL</code>的关系就是<code>1 : N</code>的关系。</p></blockquote><p>比如上面提到的<code>天气</code>和<code>今天的天气</code>这两个资源，可以用如下的<a href=#url>#URL</a>进行标识。</p><table><thead><tr><th>资源</th><th>URL</th></tr></thead><tbody><tr><td>天气</td><td><code>/weather</code></td></tr><tr><td>今天的天气</td><td><code>/weather/today</code></td></tr><tr><td>今天的天气</td><td><code>/weather/2018-04-01</code>，今天是2018-04-01</td></tr></tbody></table><p><code>资源名</code>(资源的名字)体现在<a href=#url>#URL</a>中的<code>Path</code>部分。</p><blockquote><p>关于<code>资源名</code>采用单数还是复数的问题，这里统一为单数（即使代表的是一个集合资源）。原因有 <strong>3</strong> :</p><ol><li>一致性 : 中文中并无复数的概念，可保持一致。</li><li>无二义性 : 比如news，既是单数也是复数。所以就不必追求它们的单数或者复数形式形式；基于同样的原则，那么原本就是单数的名词，也无需刻意追求复数形式。</li><li>简单性 : 英文名词的复数形式并不统一（比如order > orders, history > histories）,使用单数可以避免团队成员对于这些差异的不同理解与争执。</li></ol></blockquote><p><code>资源</code>存在子资源的情况下，可以把子资源提升为顶层的资源。比如有一个订单资源<code>/order/{order_id}</code>，订单中包含2件物品。</p><pre tabindex=0><code># 不推荐 单个子资源
/order/{order_id}/item/{item_id}

# 推荐 单个子资源
/order-item/{order_item_id}

# 推荐 子资源集合
/order/{order_id}/item
</code></pre><h2 id=operate-on-url-identified-resources-based-on-http-and-json><i id=locator-operate-on-url-identified-resources-based-on-http-and-json class=header-locator></i>
<a href=#operate-on-url-identified-resources-based-on-http-and-json class=article-h-a>1.3 基于<code>HTTP</code>和<code>JSON</code>操作<code>URL</code>标识的<code>资源</code></a></h2><p>在标识出<code>资源</code>以后，就可以使用<a href=#http>#HTTP</a>通过<a href=#json>#JSON</a>来操作资源了。</p><ol><li>使用<a href=#http-method>#HTTP Method</a>来映射对资源的操作请求（CRUD或者其他）。</li><li>使用<a href=#http-header>#HTTP Header</a>携带请求/响应所需的元数据信息。</li><li>使用<a href=#http-status-code>#HTTP Stauts Code</a>表示<strong>HTTP协议层面</strong>的响应状态。</li><li>使用<a href=#json>#JSON</a>作为数据交换格式。</li></ol><h1 id=url><i id=locator-url class=header-locator></i>
<a href=#url class=article-h-a>2 URL</a></h1><p>URL遵循<a href=https://tools.ietf.org/html/rfc3986 target=_blank rel="noopener norefferrer">RFC3986</a>规范，由以下几部分组成。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span>  https://api.linianhui.test:8080/user/disabled?first_name=li#title
</span></span></span><span style=display:flex><span><span>  \___/  \______________________/\_____________/\___________/\____/
</span></span></span><span style=display:flex><span><span>    |               |                   |             |          |
</span></span></span><span style=display:flex><span><span>  scheme        authority              path         query    fragment
</span></span></span></code></pre></div><p>URL的命名规则<a href=#name-case-url>#URL命名规则</a>。</p><p>参考资料 :</p><ol><li><a href=https://tools.ietf.org/html/rfc3986 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc3986</a></li></ol><h1 id=http><i id=locator-http class=header-locator></i>
<a href=#http class=article-h-a>3 HTTP</a></h1><h2 id=http-method><i id=locator-http-method class=header-locator></i>
<a href=#http-method class=article-h-a>3.1 HTTP Method</a></h2><p>面向资源设计的HTTP APIs中，绝大部分的操作都是<code>CRUD(Create,Read,Update,Delete)</code>，都可以映射为某一个<a href=https://tools.ietf.org/html/rfc7231#section-4 target=_blank rel="noopener norefferrer">HTTP Method</a>。其余的无法映射的操作一般存在两种解决方案 :</p><ol><li>抽象出新的资源，比如<strong>禁用用户</strong>的操作。假设用户的资源是<code>/user</code>，那么可以抽象出来一个被锁定的用户的资源<code>/user/disabled</code>。如此以来，<ol><li>禁用用户 : <code>POST /user/disabled</code>或者<code>PUT /user/disabled/{user_id}</code>。</li><li>取消禁用 : <code>DELETE /user/disabled/{user_id}</code>。</li><li>获取被禁用的用户列表 : <code>GET /user/disabled</code>。</li></ol></li><li>如果上面的方式无法满足需要，则可以采用<code>POST</code>和<code>URL/动词</code>的组合。还拿上面的举例 :<ol><li>禁用用户 : <code>POST /user/{user_id}/disable</code>或者<code>PUT /user/{user_id}/disable</code>。</li><li>取消禁用 : <code>DELETE /user/{user_id}/disable</code>。</li><li>获取被禁用的用户列表 : <code>GET /user?status=DISABLED</code>。</li></ol></li></ol><h3 id=http-method-names><i id=locator-http-method-names class=header-locator></i>
<a href=#http-method-names class=article-h-a>3.1.1 Names</a></h3><table><thead><tr><th>HTTP Method Name</th><th style=text-align:left>Safe</th><th>Idempotent</th><th>描述说明</th></tr></thead><tbody><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.3.1 target=_blank rel="noopener norefferrer">GET</a></td><td style=text-align:left>✔</td><td>✔</td><td>获取一个资源</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.3.4 target=_blank rel="noopener norefferrer">PUT</a></td><td style=text-align:left>✘</td><td>✔</td><td>更新或创建一个资源（完整替换）</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc5789 target=_blank rel="noopener norefferrer">PATCH</a></td><td style=text-align:left>✘</td><td>✘</td><td>更新一个资源（部分更新）</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.3.5 target=_blank rel="noopener norefferrer">DELETE</a></td><td style=text-align:left>✘</td><td>✔</td><td>删除一个资源</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.3.3 target=_blank rel="noopener norefferrer">POST</a></td><td style=text-align:left>✘</td><td>✘</td><td>创建，或者不满足以上四个Method语义的所有操作</td></tr></tbody></table><p><a href=https://tools.ietf.org/html/rfc5789 target=_blank rel="noopener norefferrer">PATCH</a>和<a href=https://tools.ietf.org/html/rfc7231#section-4.3.3 target=_blank rel="noopener norefferrer">POST</a>都是<code>不安全</code>且<code>不幂等</code>的，差异在于<a href=https://tools.ietf.org/html/rfc5789 target=_blank rel="noopener norefferrer">PATCH</a>仅是用于部分更新资源, 而且是一个可选支持的<a href=https://tools.ietf.org/html/rfc7231#section-4 target=_blank rel="noopener norefferrer">HTTP Method</a>，可能会存在一些代理、网关等组件不支持的情况，所以推荐用<a href=https://tools.ietf.org/html/rfc7231#section-4.3.3 target=_blank rel="noopener norefferrer">POST</a>来代替它。</p><h3 id=http-method-semantics><i id=locator-http-method-semantics class=header-locator></i>
<a href=#http-method-semantics class=article-h-a>3.1.2 Semantics</a></h3><p>每一个<a href=https://tools.ietf.org/html/rfc7231#section-4 target=_blank rel="noopener norefferrer">HTTP Method</a>都具有一下3个HTTP协议层面的语义。</p><table><thead><tr><th>HTTP Method Semantics</th><th>含义</th></tr></thead><tbody><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.2.1 target=_blank rel="noopener norefferrer">Safe</a></td><td>操作不会对资源产生副作用，不会修改资源。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.2.2 target=_blank rel="noopener norefferrer">Idempotent</a></td><td>执行一次和重复执行N次，结果是一样的。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-4.2.3 target=_blank rel="noopener norefferrer">Cacheable</a></td><td>可以被缓存。</td></tr></tbody></table><p>参考资料 :</p><ol><li><a href=https://tools.ietf.org/html/rfc7231#section-4 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7231#section-4</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods target=_blank rel="noopener norefferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods</a></li></ol><h2 id=http-header><i id=locator-http-header class=header-locator></i>
<a href=#http-header class=article-h-a>3.2 HTTP Header</a></h2><p>Http Header的用途在于携带<code>HTTP Request</code>和<code>HTTP Response</code>的元数据信息。</p><p>格式为<code>Name:Value</code> : Name不区分大小写，通常都采用首字母大写，<code>-</code>分隔的写法，比如<code>Content-Type</code>。按其用途可以分为如下4类 :</p><ol><li>通用类 : 描述请求和响应的。</li><li>请求类 : 描述请求的。</li><li>响应类 : 描述响应的。</li><li>表述类 : 描述请求和响应的<code>Body</code>部分的。</li></ol><p>HTTP APIs中常用到的Headers :</p><table><thead><tr><th>HTTP Header Name</th><th>描述说明</th><th>示例</th></tr></thead><tbody><tr><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept target=_blank rel="noopener norefferrer">Accept</a></td><td>客户端期望服务器返回的数据格式。</td><td><code>Accept:application/json</code></td></tr><tr><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Charset target=_blank rel="noopener norefferrer">Accept-Charset</a></td><td>客户端期望服务器返回的数据的字符集。</td><td><code>Accept-Charset:utf-8</code></td></tr><tr><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type target=_blank rel="noopener norefferrer">Content-Type</a></td><td>描述<code>Body</code>的数据类型。</td><td><code>Content-Type:application/json</code></td></tr><tr><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding target=_blank rel="noopener norefferrer">Content-Encoding</a></td><td>描述<code>Body</code>的编码方式。</td><td><code>Content-Encoding: gzip</code></td></tr><tr><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Length target=_blank rel="noopener norefferrer">Content-Length</a></td><td>描述<code>Body</code>的长度。</td><td><code>Content-Length: 1234</code></td></tr><tr><td><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location target=_blank rel="noopener norefferrer">Location</a></td><td><code>Response</code>中提供给客户端的连接</td><td><code>Location: /user/1</code></td></tr></tbody></table><p>HTTP Request:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span>POST /xxx <span style=color:#00f>HTTP</span>/1.1
</span></span><span style=display:flex><span>Accept: application/json;
</span></span><span style=display:flex><span>Accept-Charset: utf-8
</span></span><span style=display:flex><span>Content-Type: application/json;charset=utf-8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;x&#34;:1,
</span></span><span style=display:flex><span>  &#34;y&#34;:2
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>HTTP Response:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#00f>HTTP</span>/1.1 201 Created
</span></span><span style=display:flex><span>Content-Type: application/json;charset=utf-8
</span></span><span style=display:flex><span>Content-Encoding: gzip
</span></span><span style=display:flex><span>Location: /xxx/1
</span></span><span style=display:flex><span>Request-Id: {id}
</span></span></code></pre></div><p><code>Request-Id</code>可以由<code>Http Request</code>传入，也可以由服务端生成，追加此信息到<code>log</code>中，便于服务端追踪请求。</p><p>参考资料 :</p><ol><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers target=_blank rel="noopener norefferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers</a></li><li><a href=https://tools.ietf.org/html/rfc7231#section-5 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7231#section-5</a></li><li><a href=https://tools.ietf.org/html/rfc7231#section-7 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7231#section-7</a></li></ol><h2 id=http-status-code><i id=locator-http-status-code class=header-locator></i>
<a href=#http-status-code class=article-h-a>3.3 HTTP Status Code</a></h2><p><a href=https://tools.ietf.org/html/rfc7231#section-6 target=_blank rel="noopener norefferrer">HTTP Status Code</a>用来指示<code>HTTP协议层面的请求状态</code>。它由一个数字和一个描述消息构成，比如<code>200 OK</code>。有以下几类状态码 :</p><ol><li><code>2xx</code> : 执行成功。</li><li><code>4xx</code> : 客户端的错误，通常情况下客户端需要修改请求然后再次发送请求。</li><li><code>5xx</code> : 服务端的错误。</li></ol><table><thead><tr><th>HTTP Status Code</th><th>描述说明</th></tr></thead><tbody><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.3.1 target=_blank rel="noopener norefferrer">200 OK</a></td><td>执行成功。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.3.2 target=_blank rel="noopener norefferrer">201 Created</a></td><td>资源创建成功，应该在<code>HTTP Response Header</code>中返回<code>Location</code>来提供新创建资源的URL地址。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.3.3 target=_blank rel="noopener norefferrer">202 Accepted</a></td><td>服务端已经接受了请求，但是并未处理完成，适用于一些异步操作。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.3.5 target=_blank rel="noopener norefferrer">204 No Content</a></td><td>执行成功，但是不会在<code>HTTP Response Body</code>中放置数据。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.1 target=_blank rel="noopener norefferrer">400 Bad Request</a></td><td>客户端请求错误，客户端应该根据<code>HTTP Response Body</code>中的错误描述来修改请求，然后才能再次发送。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7235#section-3.1 target=_blank rel="noopener norefferrer">401 Unauthorized</a></td><td>客户端未提供授权信息。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.3 target=_blank rel="noopener norefferrer">403 Forbidden</a></td><td>客户端无权访问（客户端可能已经提供了授权信息，但是权限不够）。如果出于信息隐藏的目的，也可以使用<code>404 Not Found</code>来替代。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.4 target=_blank rel="noopener norefferrer">404 Not Found</a></td><td>客户端请求的资源不存在。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.5 target=_blank rel="noopener norefferrer">405 Method Not Allowed</a></td><td>客户端使用了不被允许的HTTP Method。比如某一个URL只允许<code>POST</code>,但是客户端采用了<code>GET</code>。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.5 target=_blank rel="noopener norefferrer">406 Not Acceptable</a></td><td>客户端发送的<code>Accept</code>不被支持。比如客户端发送了<code>Accept:application/xml</code>，但是服务器只支持<code>Accept:application/json</code>。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.8 target=_blank rel="noopener norefferrer">409 Conflict</a></td><td>客户端提交的数据过于陈旧，和服务端的存在冲突，需要客户端重新获取最新的资源再发起请求。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.5.13 target=_blank rel="noopener norefferrer">415 Unsupported Media Type</a></td><td>客户端发送的<code>Content-Type</code>不被支持。比如客户端发送了<code>Content-Type:application/xml</code>，但是服务器只支持<code>Content-Type:application/json</code>。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc6585#section-4 target=_blank rel="noopener norefferrer">429 Too Many Requests</a></td><td>客户端在指定的时间内发送了太多次数的请求。用于限速，比如只允许客户端在1分钟内发送100次请求，客户端在发送101次请求的时候，会得到这样的响应。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.6.1 target=_blank rel="noopener norefferrer">500 Internal Server Error</a></td><td>服务器遇见了未知的内部错误。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.6.2 target=_blank rel="noopener norefferrer">501 Not Implemented</a></td><td>服务器还未实现次功能。</td></tr><tr><td><a href=https://tools.ietf.org/html/rfc7231#section-6.6.4 target=_blank rel="noopener norefferrer">503 Service Unavailable</a></td><td>服务器繁忙，暂时无法处理客户端的请求。</td></tr></tbody></table><p>参考资料 :</p><ol><li><a href=https://tools.ietf.org/html/rfc7231#section-6 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7231#section-6</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status target=_blank rel="noopener norefferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</a></li><li><a href=https://httpstatuses.com/ target=_blank rel="noopener norefferrer">https://httpstatuses.com/</a></li></ol><h2 id=http-error-response><i id=locator-http-error-response class=header-locator></i>
<a href=#http-error-response class=article-h-a>3.4 HTTP Error Response</a></h2><p>虽然<a href=#http-status-code>#HTTP Stauts Code</a>有<code>4xx</code>和<code>5xx</code>的状态码来表示哪里出错了，但是其代表的只是<code>HTTP协议层面</code>的错误描述，它无法提供和业务相关的更具体错误描述。基于此种情况，我们需要设计一套描述业务层面错误的数据结构 :</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;method&#34;: <span style=color:#a31515>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>  &#34;url&#34;: <span style=color:#a31515>&#34;/book&#34;</span>,
</span></span><span style=display:flex><span>  &#34;statusCode&#34;: 400,
</span></span><span style=display:flex><span>  &#34;errors&#34;: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      &#34;code&#34;: <span style=color:#a31515>&#34;name&#34;</span>,
</span></span><span style=display:flex><span>      &#34;value&#34;: <span style=color:#00f>null</span>,
</span></span><span style=display:flex><span>      &#34;message&#34;: <span style=color:#a31515>&#34;书名不能为空。&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      &#34;code&#34;: <span style=color:#a31515>&#34;price&#34;</span>,
</span></span><span style=display:flex><span>      &#34;value&#34;: -1,
</span></span><span style=display:flex><span>      &#34;message&#34;: <span style=color:#a31515>&#34;价格不能为负数&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  &#34;extra&#34;: <span style=color:#00f>null</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>以上这个数据结构仅在状态码为<code>4xx</code>和<code>5xx</code>出现的时候才会使用；<code>2xx</code>的时候则不包含此数据结构。</strong></p><p><code>code</code>字段可以是一些出错的字段名、某一错误类别（比如<code>NO_PERMISSION</code>这种全局唯一的常量字符串）等等。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;method&#34;: <span style=color:#a31515>&#34;DELETE&#34;</span>,
</span></span><span style=display:flex><span>  &#34;url&#34;: <span style=color:#a31515>&#34;/book/1&#34;</span>,
</span></span><span style=display:flex><span>  &#34;statusCode&#34;: 403,
</span></span><span style=display:flex><span>  &#34;errors&#34;: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      &#34;code&#34;: <span style=color:#a31515>&#34;NO_PERMISSION&#34;</span>,
</span></span><span style=display:flex><span>      &#34;value&#34;: <span style=color:#a31515>&#34;BOOK:DELETE&#34;</span>,
</span></span><span style=display:flex><span>      &#34;message&#34;: <span style=color:#a31515>&#34;没有BOOK:DELETE的权限&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  &#34;extra&#34;: <span style=color:#00f>null</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>参考资料 :</p><ol><li>Problem Details for HTTP APIs : <a href=https://tools.ietf.org/html/rfc7807 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7807</a></li></ol><h1 id=json><i id=locator-json class=header-locator></i>
<a href=#json class=article-h-a>4 JSON</a></h1><p><a href=http://json.org/ target=_blank rel="noopener norefferrer">JSON</a>是一种应用非常广泛的数据交换格式。其包含6种基本的数据类型。</p><table><thead><tr><th>JSON数据类型</th><th>示例</th></tr></thead><tbody><tr><td><code>string</code></td><td>"lnh"</td></tr><tr><td><code>number</code></td><td>1.23</td></tr><tr><td><code>array</code></td><td>[...]</td></tr><tr><td><code>object</code></td><td>{...}</td></tr><tr><td><code>bool</code></td><td>true/false</td></tr><tr><td><code>null</code></td><td>null</td></tr></tbody></table><ol><li>JSON的命名规则<a href=#name-case-json>#JSON命名规则</a>。</li><li>JSON中没有原生的日期和时间类型，应该遵循<a href=#date-time>#Date Time</a>的要求，使用<code>string</code>类型表示。</li><li>JSON中出现的和国际化相关的数据遵循<a href=#i18n>#i18n</a>中的要求。</li><li><code>null</code>值的字段不能忽略掉，应该显式的表示为<code>"field_name":null</code>。</li></ol><p>JSON示例 :</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;first_name&#34;: <span style=color:#a31515>&#34;li&#34;</span>,
</span></span><span style=display:flex><span>  &#34;lase_name&#34;: <span style=color:#a31515>&#34;nianhui&#34;</span>,
</span></span><span style=display:flex><span>  &#34;gender&#34;: <span style=color:#a31515>&#34;MALE&#34;</span>,
</span></span><span style=display:flex><span>  &#34;age&#34;: 123,
</span></span><span style=display:flex><span>  &#34;tags&#34;: [<span style=color:#a31515>&#34;coder&#34;</span>],
</span></span><span style=display:flex><span>  &#34;is_admin&#34;: <span style=color:#00f>true</span>,
</span></span><span style=display:flex><span>  &#34;address&#34;: <span style=color:#00f>null</span>,
</span></span><span style=display:flex><span>  &#34;country_code&#34;:<span style=color:#a31515>&#34;CN&#34;</span>,
</span></span><span style=display:flex><span>  &#34;currency_code&#34;:<span style=color:#a31515>&#34;CNY&#34;</span>,
</span></span><span style=display:flex><span>  &#34;language_code&#34;:<span style=color:#a31515>&#34;zh&#34;</span>,
</span></span><span style=display:flex><span>  &#34;locale_code&#34;:<span style=color:#a31515>&#34;zh-CN&#34;</span>,
</span></span><span style=display:flex><span>  &#34;created_at&#34;:<span style=color:#a31515>&#34;2018-01-02T03:04:05.128Z+08:00&#34;</span>,
</span></span><span style=display:flex><span>  &#34;time_zone&#34;:<span style=color:#a31515>&#34;+08:00&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>参考资料 :</p><ol><li><a href=http://json.org/ target=_blank rel="noopener norefferrer">http://json.org/</a></li><li><a href=https://tools.ietf.org/html/rfc7159 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7159</a></li></ol><h1 id=versioning><i id=locator-versioning class=header-locator></i>
<a href=#versioning class=article-h-a>5 版本化</a></h1><p>在<code>Level 2</code>的HTTP APIs中，虽然我们推荐也努力使得我们的APIs不做不兼容的改动，但是依然无法彻底的避免不兼容的升级。这就使得我们不得不对APIs进行版本化管理。通常有以下 <strong>3</strong> 种方案 :</p><ol><li>URL<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span>GET http://api.linianhui.com/v1/weather <span style=color:#00f>HTTP</span>/1.1
</span></span></code></pre></div></li><li>Request Header<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span>GET http://api.linianhui.com/weather <span style=color:#00f>HTTP</span>/1.1
</span></span><span style=display:flex><span>Api-Version: v1
</span></span></code></pre></div></li><li>Request Header (Accept Header)<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span>GET http://api.linianhui.com/weather <span style=color:#00f>HTTP</span>/1.1
</span></span><span style=display:flex><span>Accept: application/vnd.v1+json
</span></span></code></pre></div></li></ol><p><strong>在<code>Level 2</code>的API中优先推荐使用方案1(<code>URL</code>)</strong>。理由是其更直观，便于实现，便于日志追踪。</p><h1 id=name-case><i id=locator-name-case class=header-locator></i>
<a href=#name-case class=article-h-a>6 命名规则</a></h1><table><thead><tr><th>规则名称</th><th>说明</th><th>取值范围</th></tr></thead><tbody><tr><td><code>all-lower-hyphen-case</code></td><td>采用<code>-</code>分隔符的全小写</td><td><code>a-z 0-9 -</code></td></tr><tr><td><code>all_lower_underscore_case</code></td><td>采用<code>_</code>分隔符的全小写</td><td><code>a-z 0-9 _</code></td></tr><tr><td><code>ALL_UPPER_UNDERSCORE_CASE</code></td><td>采用<code>_</code>分隔符的全大写</td><td><code>A-Z 0-9 _</code></td></tr></tbody></table><h2 id=name-case-url><i id=locator-name-case-url class=header-locator></i>
<a href=#name-case-url class=article-h-a>6.1 URL</a></h2><table><thead><tr><th>URL组件</th><th>命名规则</th></tr></thead><tbody><tr><td>scheme</td><td><code>all-lower-hyphen-case</code></td></tr><tr><td>authority</td><td><code>all-lower-hyphen-case</code></td></tr><tr><td>path</td><td><code>all-lower-hyphen-case</code></td></tr><tr><td>query</td><td><code>all_lower_underscore_case</code></td></tr><tr><td>fragment</td><td><code>all-lower-hyphen-case</code></td></tr></tbody></table><p>URL的query部分是<code>name=value</code>而不是<code>key=value</code>，URL支持name重复存在，Web服务端框架绝大部分都支持直接映射为数组。</p><p>此外命名规则约束的是<code>name</code>部分，而不关心<code>value</code>部分，<code>value</code>部分应该采用<code>urlencode</code>进行编码。示例 :</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span>https://api.my-server.com/v1/user-stories?dipplay_names=abc&amp;display_names=efg
</span></span></span></code></pre></div><p>服务端会得到一个类型为数组的<code>dispaly_names</code>参数。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span>display_names</span> <span>=</span> [
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;abc&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a31515>&#34;efg&#34;</span>
</span></span><span style=display:flex><span>]<span>;</span>
</span></span></code></pre></div><h2 id=name-case-json><i id=locator-name-case-json class=header-locator></i>
<a href=#name-case-json class=article-h-a>6.2 JSON</a></h2><table><thead><tr><th>JSON</th><th>命名规则</th></tr></thead><tbody><tr><td>filed_name</td><td><code>all_lower_underscore_case</code></td></tr><tr><td>filed_value</td><td>无要求</td></tr><tr><td>ENUM_FILED_VALUE</td><td><code>ALL_UPPER_UNDERSCORE_CASE</code></td></tr></tbody></table><p><code>ENUM_FILED_VALUE</code>用于表示枚举字段，用全大写和<code>_</code>分隔符，以示和普通的字符串进行区分。示例 :</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;first_name&#34;:<span style=color:#a31515>&#34;li&#34;</span>,
</span></span><span style=display:flex><span>  &#34;lase_name&#34;:<span style=color:#a31515>&#34;nianhui&#34;</span>,
</span></span><span style=display:flex><span>  &#34;gender&#34;:<span style=color:#a31515>&#34;MALE&#34;</span>,
</span></span><span style=display:flex><span>  &#34;remark&#34;:<span style=color:#a31515>&#34;描述信息&#34;</span>,
</span></span><span style=display:flex><span>  &#34;age&#34;:1234
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>参考资料 :</p><ol><li><a href=https://support.google.com/webmasters/answer/76329 target=_blank rel="noopener norefferrer">https://support.google.com/webmasters/answer/76329</a></li><li><a href=https://stackoverflow.com/questions/5543490/json-naming-convention target=_blank rel="noopener norefferrer">https://stackoverflow.com/questions/5543490/json-naming-convention</a></li><li><a href=https://tools.ietf.org/html/rfc3986#section-2.4 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc3986#section-2.4</a></li></ol><h1 id=date-time><i id=locator-date-time class=header-locator></i>
<a href=#date-time class=article-h-a>7 Date Time</a></h1><p>日期和时间采用<a href=https://tools.ietf.org/html/rfc3339 target=_blank rel="noopener norefferrer">RFC3339</a>中定义的通用的格式。表示方法如下 :</p><table><thead><tr><th>格式</th><th>组成部分</th><th>示例</th></tr></thead><tbody><tr><td><code>date-fullyear</code></td><td>4位数的年份</td><td>2018</td></tr><tr><td><code>date-month</code></td><td>2位数的月份</td><td>04</td></tr><tr><td><code>date-mday</code></td><td>2位数的日期</td><td>01</td></tr><tr><td><code>time-hour</code></td><td>2位数的小时</td><td>02</td></tr><tr><td><code>time-minute</code></td><td>2位数的分钟</td><td>08</td></tr><tr><td><code>time-second</code></td><td>2位数的秒数</td><td>59</td></tr><tr><td><code>time-secfrac</code></td><td>秒的分数部分</td><td>.256</td></tr><tr><td><code>time-numoffset</code></td><td><code>+</code>/<code>-</code> <code>time-hour</code>:<code>time-minute</code></td><td>+08:00</td></tr><tr><td><code>time-offset</code></td><td><code>Z</code>/<code>time-numoffset</code></td><td>Z+08:00</td></tr><tr><td><code>partial-time</code></td><td><code>time-hour</code>:<code>time-minute</code>:<code>time-second time-secfrac</code></td><td>02:08:59.256</td></tr><tr><td><code>full-date</code></td><td><code>date-fullyear</code>-<code>date-month</code>-<code>date-mday</code></td><td>2018-04-01</td></tr><tr><td><code>full-time</code></td><td><code>partial-time time-offset</code></td><td>02:08:59.256+08:00</td></tr><tr><td><code>date-time</code></td><td><code>full-date</code>T<code>full-time</code></td><td>2018-04-01T02:08:59.256Z+08:00</td></tr></tbody></table><p>扩展 : <code>date-fullyear-month</code>(年月)可表示为<code>date-fullyear</code>-<code>date-month</code>，比如<code>2018-04</code>。</p><ol><li>日期和时间应该满足上面表格中定义的格式。</li><li>优先采用UTC时间（即Z+00:00）。即使没有跨时区的要求，也必须携带时区偏移信息，比如<code>2018-04-01T02:08:59.256Z+08:00</code>。</li></ol><p>参考资料 :</p><ol><li>Date and Time Formats - ISO 8601 : <a href=https://www.w3.org/TR/NOTE-datetime target=_blank rel="noopener norefferrer">https://www.w3.org/TR/NOTE-datetime</a></li><li>Date and Time on the Internet: Timestamps ( RFC 3339 ) : <a href=https://tools.ietf.org/html/rfc3339#section-5.6 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc3339#section-5.6</a></li></ol><h1 id=i18n><i id=locator-i18n class=header-locator></i>
<a href=#i18n class=article-h-a>8 i18n</a></h1><p>国家代码 : 采用<a href=https://www.iso.org/iso-3166-country-codes.html target=_blank rel="noopener norefferrer">Country Code</a><code>ISO 3166 alpha-2</code>版本（2个字母）。示例 :</p><ol><li>中国 : <code>CN</code></li><li>美国 : <code>US</code></li><li>其他 : <a href=https://en.wikipedia.org/wiki/ISO_3166-2#Current_codes target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/ISO_3166-2#Current_codes</a></li></ol><p>货币代码 : 采用<a href=https://www.iso.org/iso-4217-currency-codes.html target=_blank rel="noopener norefferrer">Currency Code</a><code>ISO 4217:2015</code>版本（3个字母）。示例 :</p><ol><li>人民币 : <code>CNY</code></li><li>美元 : <code>USD</code></li><li>其他 : <a href=https://en.wikipedia.org/wiki/ISO_4217#Active_codes target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/ISO_4217#Active_codes</a></li></ol><p>语言代码 : 采用<a href=https://www.iso.org/iso-639-language-codes.html target=_blank rel="noopener norefferrer">Language Code</a><code>ISO 639-1:2002</code>版本（2个字母）。示例 :</p><ol><li>中文 : <code>zh</code></li><li>英文 : <code>en</code></li><li>其他 : <a href=https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes</a></li></ol><p>区域代码 : 由<a href=https://www.iso.org/iso-639-language-codes.html target=_blank rel="noopener norefferrer">Language Code</a>和<a href=https://www.iso.org/iso-3166-country-codes.html target=_blank rel="noopener norefferrer">Country Code</a>组合而成。示例 :</p><ol><li><code>zh-CN</code></li><li><code>en-US</code></li></ol><p>参考资料 :</p><ol><li><a href=https://www.iso.org/iso-3166-country-codes.html target=_blank rel="noopener norefferrer">https://www.iso.org/iso-3166-country-codes.html</a></li><li><a href=https://www.iso.org/iso-4217-currency-codes.html target=_blank rel="noopener norefferrer">https://www.iso.org/iso-4217-currency-codes.html</a></li><li><a href=https://www.iso.org/iso-639-language-codes.html target=_blank rel="noopener norefferrer">https://www.iso.org/iso-639-language-codes.html</a></li></ol><h1 id=other><i id=locator-other class=header-locator></i>
<a href=#other class=article-h-a>9 其他</a></h1><p>待完善...</p><h2 id=http-request-common-param><i id=locator-http-request-common-param class=header-locator></i>
<a href=#http-request-common-param class=article-h-a>9.1 HTTP Request 公共查询参数</a></h2><table><thead><tr><th>参数用途</th><th>参数名</th><th>取值范围</th></tr></thead><tbody><tr><td>分页</td><td><code>page</code><br><code>page_size</code></td><td>>=1</td></tr><tr><td>排序</td><td><code>sort</code></td><td><code>{field_name} {asc\desc},{field_name} {asc\desc}</code></td></tr><tr><td>区间</td><td><code>{field_name}_begin</code><br><code>{field_name}_end</code></td><td>无要求</td></tr><tr><td>时间</td><td><code>{field_name}_at</code></td><td>无要求</td></tr></tbody></table><p>示例:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span>GET /user
</span></span></span><span style=display:flex><span><span>    ?page=2
</span></span></span><span style=display:flex><span><span>    &amp;page_size=10
</span></span></span><span style=display:flex><span><span>    &amp;sort=name,age desc
</span></span></span><span style=display:flex><span><span>    &amp;created_at_begin=2018-01-01
</span></span></span><span style=display:flex><span><span>    &amp;created_at_end=2018-06-01
</span></span></span></code></pre></div><p>上面的查询代表的含义 : 按照<code>name</code>升序和<code>age</code>倒序的排序方式；获取<code>created_at</code>时间位于<code>2018-01-01</code>和<code>2018-06-01</code>区间内；按照每页<code>10</code>条数据，获取第<code>2</code>页的数据。</p><h2 id=http-response-page><i id=locator-http-response-page class=header-locator></i>
<a href=#http-response-page class=article-h-a>9.2 HTTP Response 分页数据结构</a></h2><p>在分页请求的时候，API会返回分页后的数据和分页的信息。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;page&#34;: 2,
</span></span><span style=display:flex><span>  &#34;page_size&#34;: 10,
</span></span><span style=display:flex><span>  &#34;total_count&#34;: 100,
</span></span><span style=display:flex><span>  &#34;items&#34;:[
</span></span><span style=display:flex><span>    {<span>...</span>},
</span></span><span style=display:flex><span>    {<span>...</span>},
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=example><i id=locator-example class=header-locator></i>
<a href=#example class=article-h-a>10 示例</a></h1><p>... 待补充</p><h1 id=reference><i id=locator-reference class=header-locator></i>
<a href=#reference class=article-h-a>11 参考资料</a></h1><p>本人的解读REST系列博客 : <a href=/understand-rest/ target=_blank rel="noopener norefferrer">理解REST</a></p><p>REST APIs 成熟度模型 : <a href=https://martinfowler.com/articles/richardsonMaturityModel.html target=_blank rel="noopener norefferrer">https://martinfowler.com/articles/richardsonMaturityModel.html</a></p><p>PayPal的API设计指南 : <a href=https://github.com/paypal/api-standards target=_blank rel="noopener norefferrer">https://github.com/paypal/api-standards</a></p><p>REST架构风格的出处 : 架构风格与基于网络的软件架构设计(by <a href=http://www.ics.uci.edu/~fielding/ target=_blank rel="noopener norefferrer">Roy Thomas Fielding</a>)论文。</p><ol><li>英文版 : <a href=https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm target=_blank rel="noopener norefferrer">https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm</a></li><li>中文版 : <a href=https://www.infoq.cn/article/web-based-apps-archit-design/ target=_blank rel="noopener norefferrer">https://www.infoq.cn/article/web-based-apps-archit-design/</a></li></ol><p>HTTP APIs 四大组成部分（HTTP, URI, MIME, JSON）</p><ol><li>HTTP/1.1 ( RFC7230-7235 ) : <a href=https://tools.ietf.org/html/rfc7230 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc7230</a></li><li>URI ( RFC 3986 ) : <a href=https://tools.ietf.org/html/rfc3986 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc3986</a></li><li>MIME ( RFC 2387 ) : <a href=https://tools.ietf.org/html/rfc2387 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc2387</a></li><li>JSON : <a href=http://json.org/ target=_blank rel="noopener norefferrer">http://json.org/</a></li></ol><p>Hypermedia</p><ol><li>JSON Schema: <a href=http://json-schema.org/ target=_blank rel="noopener norefferrer">http://json-schema.org/</a></li></ol><p>URL模板</p><ol><li>URI Template ( RFC6570 ) : <a href=https://tools.ietf.org/html/rfc6570 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc6570</a></li></ol><p>彩蛋：NO SOAP!</p><img src=soap.jpg loading=lazy decoding=auto alt="NO SOAP!" title="NO SOAP!"></section><section class=article-meta><section class=article-date>2018-03-31 09:02，约4980字，阅读约10分钟</section><section class=article-topics><a class=article-topic href=/code-guide/ title=[代码规范] target=_blank><i class="fa fa-folder"></i>[代码规范]</a></section><section class=article-tags><a class=article-tag href=/tag/api target=_blank><i class="fa fa-tag"></i>API</a>
<a class=article-tag href=/tag/http target=_blank><i class="fa fa-tag"></i>HTTP</a>
<a class=article-tag href=/tag/i18n target=_blank><i class="fa fa-tag"></i>i18n</a>
<a class=article-tag href=/tag/json target=_blank><i class="fa fa-tag"></i>JSON</a>
<a class=article-tag href=/tag/rest target=_blank><i class="fa fa-tag"></i>REST</a>
<a class=article-tag href=/tag/url target=_blank><i class="fa fa-tag"></i>URL</a>
<a class=article-tag href=/tag/%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99 target=_blank><i class="fa fa-tag"></i>命名规则</a>
<a class=article-tag href=/tag/%E8%A1%A8%E8%BF%B0 target=_blank><i class="fa fa-tag"></i>表述</a>
<a class=article-tag href=/tag/%E8%AE%BE%E8%AE%A1%E6%8C%87%E5%8D%97 target=_blank><i class="fa fa-tag"></i>设计指南</a>
<a class=article-tag href=/tag/%E8%B5%84%E6%BA%90 target=_blank><i class="fa fa-tag"></i>资源</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/c9d8568dc5b4d70175dd82a4072b242560a041f7 target=_blank><i class="fa fa-code-fork"></i>c9d8568</a>
<span class=article-git-commit-subject>fix typo</span>
<span class=article-git-commit-time>2024-12-29 22:26</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/code-guide/http-api/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-page><div class=article-page-prev><span>上一篇 : </span><a href=/code-guide/csharp/ target=_blank>[代码规范] C#规范指南</a></div></section></article><section id=article-comment class=article-comment><script src=https://utteranc.es/client.js repo=linianhui/blog issue-term=pathname label=blog-comment theme=github-light crossorigin=anonymous async></script></section></main><footer class=footer><section>Copyright © 2025 by <a href=https://github.com/linianhui/blog target=_blank>Timetombs</a></section><section><a class=article-git-commit href=https://github.com/linianhui/blog/commit/2fac07e818d6d4ad6b78781efea82c28769c8c02 target=_blank><i class="fa fa-code-fork"></i>2fac07e</a>
Powered by
<a href=https://github.com/actions target=_blank>GitHub Actions</a>
,
<a href=https://github.com/gohugoio/hugo target=_blank>Hugo</a>
and
<a href=https://github.com/utterance/utterances target=_blank>utterances</a>
Hosted on <a href=https://pages.github.com/ target=_blank>GitHub Pages</a><section></footer></main><aside class=toolbar><a class="fa fa-list" href=javascript:blog.toggleToc(); title=目录></a><a class="fa fa-comments" href=#article-comment title=评论></a><a class="fa fa-arrow-up" href=javascript:scroll(0,0); title=返回顶部></a></aside><script type=text/javascript>var _hmt=_hmt||[];blog.addOnScorllEvent()</script><script src=https://hm.baidu.com/hm.js?b2cc3cea316e1f7a8def1bab8dc98fad async></script></body></html>