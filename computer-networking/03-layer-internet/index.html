<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content="X6gTMGCy1-_vb5i3aja3ZZyzPY3raiKRJp4VIhOAX24"><meta name=msvalidate.01 content="CDE7502649B75529BD0FCFE89B056E38"><title>[计算机网络] 03 [Layer] Internet - Timetombs</title>
<link rel=icon type=image/svg href=/favicon.svg><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/normalize/8.0.1/normalize.min.css crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://s4.zstatic.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css crossorigin=anonymous referrerpolicy=no-referrer><link href='/asset/blog.css?time=2025-10-26T19%3a03%3a29Z%2b08%3a00' rel=stylesheet type=text/css><script src=https://s4.zstatic.net/npm/currency.js@2.0.4/dist/currency.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://s4.zstatic.net/ajax/libs/moment.js/2.30.1/moment.min.js crossorigin=anonymous referrerpolicy=no-referrer></script><script src='/asset/blog.js?time=2025-10-26T19%3a03%3a29Z%2b08%3a00' type=application/javascript></script><script type=text/javascript>blog.isMobile()&&document.write('<link href="/asset/blog.mobile.css?time=2025-10-26T19%3A03%3A29Z%2B08%3A00" rel="stylesheet">')</script></head><body><div id=horizontal-progress class=horizontal-progress></div><aside id=toc class=toc><section class=toc-header><a class=toc-page-title href=/computer-networking/ target=_blank>[计算机网络]</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/00-overview/ target=_blank>[计算机网络] 00 概述</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/01-layer-physical/ target=_blank>[计算机网络] 01 [Layer] Physical</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/02-layer-data-link/ target=_blank>[计算机网络] 02 [Layer] Data Link</a></section><section class="toc-page selected"><span class=toc-page-title>[计算机网络] 03 [Layer] Internet</span><nav id=TableOfContents><ul><li><a href=#internet-purpose>1 网络层的用途</a></li><li><a href=#internet-protocol>2 IP(Internet Protocol)</a><ul><li><a href=#ipv4-packet>2.1 IPv4 Packet</a><ul><li><a href=#ipv4-packet-ttl-field>2.1.1 TTL Field</a></li><li><a href=#ipve-packet-protocol-field>2.1.2 Protocol Field</a></li></ul></li><li><a href=#ipv6-packet>2.2 IPv6 Packet</a></li></ul></li><li><a href=#ip-address>3 IP Address</a><ul><li><a href=#ipv4-address>3.1 IPv4 Address</a><ul><li><a href=#private-ipv4-addtess>3.1.1 Private IPv4 Addtess</a></li></ul></li><li><a href=#cidr>3.2 CIDR</a></li><li><a href=#ipv6-address>3.3 IPv6 Address</a></li><li><a href=#special-address>3.4 特殊的IP Address</a><ul><li><a href=#loopback-adress>3.4.1 Loopback Address</a></li><li><a href=#host-address>3.4.2 Host Address</a></li></ul></li></ul></li><li><a href=#reference>4 Referance</a></li></ul></nav></section><section class=toc-page><a class=toc-page-title href=/computer-networking/tcp/ target=_blank>[计算机网络] TCP</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/nat/ target=_blank>[计算机网络] NAT</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/io-model/ target=_blank>[计算机网络] IO 模型</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/tool/ target=_blank>[计算机网络] Tool</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/dns/ target=_blank>[计算机网络] DNS(Domain Name System)</a></section><section class=toc-page><a class=toc-page-title href=/computer-networking/doh/ target=_blank>[计算机网络] DoH(DNS over HTTPS)</a></section><script type=text/javascript>blog.isPC()&&blog.toggleToc()</script></aside><main class=main><header class=header><hgroup class=header-hgroup><h1 class=header-hgroup-title><a href=/>Timetombs</a></h1><h2 class=header-hgroup-subtitle>泛义的工具是文明的基础，而确指的工具却是愚人的器物</h2></hgroup><nav class=header-nav><a class=header-nav-item href=/topic/ title=专题 target=_self><i class="fa fa-folder"></i>专题</a>
<a class=header-nav-item href=/tag/ title=标签 target=_self><i class="fa fa-tags"></i>标签</a>
<a class=header-nav-item href=/archive/ title=归档 target=_self><i class="fa fa-archive"></i>归档</a>
<a class=header-nav-item href=https://linianhui.cnblogs.com title=博客园 target=_black><img src=/asset/cnblogs.favicon.svg>博客园</a>
<a class=header-nav-item href=https://github.com/linianhui/blog title=GitHub target=_black><i class="fa fa-github"></i>GitHub</a></nav><div class=header-stats><div class=stats><span>共
<i>66<sub>h</sub>
</i>/
<i>118<sub>a</sub>
</i>篇</span><div class=stats-date>，更新于 2025-10-26T19:03:29Z+08:00 by &nbsp;
<a class=git-commit href=https://github.com/linianhui/blog/commit/2fac07e818d6d4ad6b78781efea82c28769c8c02 target=_blank><i class="fa fa-code-fork"></i>2fac07e</a></div></div><form class=search method=GET target=_blank action=https://www.bing.com/search><input name=q class=search-input type=search placeholder=search... results=5 onkeypress="search_param.value=search_param_site.value+this.value">
<input id=search_param_site type=hidden value="site:linianhui.github.io ">
<input name=q id=search_param type=hidden></form></div></header><main class=content><article class=article><h1 class=article-title>[计算机网络] 03 [Layer] Internet</h1><div class=article-copyright><span>版权声明 - </span><a href=/copyright/cc target=_blank>CC BY-NC-SA 4.0</a></div><section class=article-meta><section class=article-date>2019-09-22 08:13，约3314字，阅读约7分钟</section><section class=article-topics><a class=article-topic href=/computer-networking/ title=[计算机网络] target=_blank><i class="fa fa-folder"></i>[计算机网络]</a></section><section class=article-tags><a class=article-tag href=/tag/ip target=_blank><i class="fa fa-tag"></i>IP</a>
<a class=article-tag href=/tag/ipv4 target=_blank><i class="fa fa-tag"></i>IPv4</a>
<a class=article-tag href=/tag/ipv6 target=_blank><i class="fa fa-tag"></i>IPv6</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/03e0cc08866458647d96951c1817c624518149d6 target=_blank><i class="fa fa-code-fork"></i>03e0cc0</a>
<span class=article-git-commit-subject>fix add displayed_on_home</span>
<span class=article-git-commit-time>2022-11-20 14:49</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/computer-networking/03-layer-internet/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-content><h1 id=internet-purpose><i id=locator-internet-purpose class=header-locator></i>
<a href=#internet-purpose class=article-h-a>1 网络层的用途</a></h1><p>上一篇中遗留了一部分问题 : <code>Frame</code>的丢失、乱序和重复等等，在网络层这里其实也无能为力😂😂😂。因为网络层解决的问题重点是<strong>分组&交换</strong>中的<strong>交换</strong>问题。虽然在数据链路层有交换机这样的设备负责<code>Frame</code>的转发和交换，但是它其实并无法满足我们的需要，那么为什么呢？我们来看一下基于<code>Frame</code>的转发交换存在哪些问题先：</p><ol><li><code>Frame</code>的<code>MAC</code>不是真正含以上的地址 : 虽然<code>MAC</code>也叫做<strong>物理地址</strong>，不过它其实并不是真正的地址。我们通常意义上的地址是什么呢？比如你要给故宫博物院的院长写一封信，那么信封上的信息大致是这样的:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>邮编     : 100009 
</span></span><span style=display:flex><span>收件人地址 : 北京市 东城区 景山前街4号 故宫博物院
</span></span><span style=display:flex><span>收件人    : 院长
</span></span><span style=display:flex><span>寄件人地址 : xxx yyy zzz
</span></span><span style=display:flex><span>寄件人    : abc 
</span></span></code></pre></div>其中<code>北京市 东城区 景山前街4号 故宫博物院</code>这部分是真正意义上的地址，这部分信息是包含层级信息的，其目的是便于快速的定位。留意下邮编<code>100009</code>，这个其实也是地址，它也是层级的。</li><li><code>MAC</code>是固化到硬件中的，不便于控制和管理。</li></ol><p>基于以上两个核心的问题，二层的交换机如果想要完成我们想要的转发和交换，那么它的<code>MAC Address Table</code>将会多么的巨大（<code>MAC</code>地址有2<sup>48</sup>个，因为<code>MAC</code>没有层级，所以就无法分层处理转发和交换）。当然还有其他的原因，这里只是笔者的理解的一部分。</p><p>所以我们需要一个像邮编一样的<strong>包含位置信息的并且分层的地址</strong>来处理数据的转发和交换。<strong>那么网络层的用途就是实现转发和交换，向上层提供无连接的、尽最大努力交付的分组数据报服务</strong>。</p><h1 id=internet-protocol><i id=locator-internet-protocol class=header-locator></i>
<a href=#internet-protocol class=article-h-a>2 IP(Internet Protocol)</a></h1><p><code>IP</code>(Internet Protocol)<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>是网络层定义的为了实现转发和交换的协议。通常我们也把<code>IP Address</code>称为<code>IP</code>，从设计之初<code>IP</code>就是一个<strong>包含位置信息的并且分层的地址</strong>。<br>网络层的<code>PDU</code>称之为<code>Packet</code>(包)，IP数据包或者IP数据报。目前<code>IP</code>有两个版本:</p><ol><li>IPv4<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> : 长度<code>4 octet = 32 bit</code>，可容纳2<sup>32</sup>=<code>4,294,967,296</code>个地址，42亿+。</li><li>IPv6<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> : 长度<code>16 octet = 128 bit</code>，可容纳2<sup>128</sup>=<code>340,282,366,920,938,463,463,374,607,431,768,211,456</code>个地址，我数不过来了。。。</li></ol><h2 id=ipv4-packet><i id=locator-ipv4-packet class=header-locator></i>
<a href=#ipv4-packet class=article-h-a>2.1 IPv4 Packet</a></h2><p>IPv4的Packet<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>:</p><div class="highlight-file highlight-file_opened" id=hf-f1213e65f6fa80828cadfb0235ebfb72><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-f1213e65f6fa80828cadfb0235ebfb72","highlight-file_opened")'>ipv4-packet.txt</a><a class="fa fa-download highlight-file-download" target=_blank href=/computer-networking/03-layer-internet/ipv4-packet.txt title="下载 ipv4-packet.txt" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/computer-networking/03-layer-internet/ipv4-packet.txt title="源码 ipv4-packet.txt"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>|                          IPv4 Packet                          |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - 32 bit(4 octet)- - - - -+- - - - - - - - |
</span></span><span style=display:flex><span>|0 1 2 3 4 5 6 7+0 1 2 3 4 5 6 7+0 1 2 3 4 5 6 7+0 1 2 3 4 5 6 7|
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|Version|  IHL  |   DSCP    |ECN|     Total Length              |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|      Identification           | |D|M|    Fragment Offset      |
</span></span><span style=display:flex><span>|      (2 octet)                | |F|F|    (13 bit)             |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|      TTL      |   Protocol    |          Checksum             |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|           Source IP Address (4 octet)                         |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|           Destination IP Address (4 octet)                    |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|                   Options (if IHL &gt; 5)                        |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|                   Payload                                     |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|</span></span></code></pre></div></div></div><p>看起来很复杂的样子(其实就是很复杂...)，我们这里只关注几个重点的就可以了。</p><ol><li>Total Length : 长度</li><li>TTL : Time To Live, Packet的生存时间，每经过一跳就减一，减到0就丢弃。</li><li>Protocol : 上层协议的类型。</li><li>Source IP Address : 源IP地址</li><li>Destination IP Address : 目标IP地址</li><li>Payload : 有效的负载数据部分。</li></ol><h3 id=ipv4-packet-ttl-field><i id=locator-ipv4-packet-ttl-field class=header-locator></i>
<a href=#ipv4-packet-ttl-field class=article-h-a>2.1.1 TTL Field</a></h3><p>为了防止<code>Packet</code>在转发过程中出现死循环回路，设置的一个值，一般默认是64，转发一次就减1，直到为0就丢弃掉。</p><h3 id=ipve-packet-protocol-field><i id=locator-ipve-packet-protocol-field class=header-locator></i>
<a href=#ipve-packet-protocol-field class=article-h-a>2.1.2 Protocol Field</a></h3><p>常见到的几个Protocol的值如下:</p><table><thead><tr><th style=text-align:left>Value</th><th style=text-align:left>Protocol</th></tr></thead><tbody><tr><td style=text-align:left>1</td><td style=text-align:left>ICMP Internet Control Message Protocol</td></tr><tr><td style=text-align:left>2</td><td style=text-align:left>IGMP Internet Group Management Protocol</td></tr><tr><td style=text-align:left>6</td><td style=text-align:left>TCP Transmission Control Protocol</td></tr><tr><td style=text-align:left>17</td><td style=text-align:left>UDP User Datagram Protocol</td></tr></tbody></table><h2 id=ipv6-packet><i id=locator-ipv6-packet class=header-locator></i>
<a href=#ipv6-packet class=article-h-a>2.2 IPv6 Packet</a></h2><p>随着互联网的迅猛发展，<code>IPv4</code>的2<sup>32</sup>=<code>4,294,967,296</code>个地址(42亿+)是远远不够的，期间开发出了<a href=../nat target=_blank rel="noopener norefferrer">NAT</a>来缓解IPv4的问题，但是始终不是彻底解决问题的办法。故而早在1992年IEEE就着手开发下一代的<code>IP</code>了，于1996年发布了<code>IPv6</code><sup id=fnref1:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>，把地址长度从32bit扩充到了128bit。同时也改进了一些之前<code>IPv4</code>协议族相关的一些不足之处。比如固定了协议的Header部分的长度(便于转发交换<code>Packet</code>)等等。</p><p>IPv6的Packet<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>:</p><div class="highlight-file highlight-file_opened" id=hf-78083b091494080f4f25ef75b8bb8ca5><div class=highlight-file-header><a class="fa fa-plus highlight-file-switch" onclick='blog.toggleClassName("hf-78083b091494080f4f25ef75b8bb8ca5","highlight-file_opened")'>ipv6-packet.txt</a><a class="fa fa-download highlight-file-download" target=_blank href=/computer-networking/03-layer-internet/ipv6-packet.txt title="下载 ipv6-packet.txt" download></a>
<a class="fa fa-github" target=_blank href=https://github.com/linianhui/blog/blob/main/src/computer-networking/03-layer-internet/ipv6-packet.txt title="源码 ipv6-packet.txt"></a></div><div class=highlight-file-content><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>|                          IPv6 Packet                          |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - 32 bit(4 octet) - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|0 1 2 3 4 5 6 7+0 1 2 3 4 5 6 7+0 1 2 3 4 5 6 7+0 1 2 3 4 5 6 7|
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|Version| Traffic Class |            Flow Label                 |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|      Payload Length           | Next Header   | Hop Limit     |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|           Source IP Address (16 octet)                        |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|           Destination IP Address (16 octet)                   |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|
</span></span><span style=display:flex><span>|                   Payload                                     |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|                                                               |
</span></span><span style=display:flex><span>|- - - - - - - -+- - - - - - - -+- - - - - - - -+- - - - - - - -|</span></span></code></pre></div></div></div><h1 id=ip-address><i id=locator-ip-address class=header-locator></i>
<a href=#ip-address class=article-h-a>3 IP Address</a></h1><p>IP Address由<code>Network Id</code>(网络号)和<code>Host Id</code>(主机号)两部分组成，所以IP不仅仅是一个唯一标识一台主机，也包含其所在的网络。这就是开篇所提到的分层的地址，这样划分有2个重要的意义：</p><ol><li>IP的分组数据报只根据<code>Network Id</code>进行路由转发，而且<code>Network Id</code>也是分层级处理的，这就使得路由可以不必处理所有的IP。不然现实世界是无法实现这样的路由转发设备的。</li><li>IP地址的分配机构只管分配<code>Network Id</code>部分即可。</li></ol><h2 id=ipv4-address><i id=locator-ipv4-address class=header-locator></i>
<a href=#ipv4-address class=article-h-a>3.1 IPv4 Address</a></h2><p>IPv4长度为4octet=32bit。按照传统的网络分类<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>方式把IP分为了ABCDE五类。划分方式:</p><div style=overflow-x:auto><table style=text-align:center><tr><th rowspan=3>Class</th><th colspan=32>4 Octets(32bits)</th></tr><tr><td colspan=8>Octet 1</td><td colspan=8>Octet 2</td><td colspan=8>Octet 3</td><td colspan=8>Octet 4</td></tr><tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td></tr><tr><th>A</th><td style=color:red>0</td><td colspan=7><font color=#F00>8bits</font> Network Id</td><td colspan=24><font color=#F00>24bits</font> Host Id</td></tr><tr><th>B</th><td style=color:red>1</td><td style=color:red>0</td><td colspan=14><font color=#F00>16bits</font> Network Id</td><td colspan=16><font color=#F00>16bits</font>Host Id</td></tr><tr><th>C</th><td style=color:red>1</td><td style=color:red>1</td><td style=color:red>0</td><td colspan=21><font color=#F00>24bits</font> Network Id</td><td colspan=8><font color=#F00>8bits</font> Host Id</td></tr><tr><th>D</th><td style=color:red>1</td><td style=color:red>1</td><td style=color:red>1</td><td style=color:red>0</td><td colspan=28>Multicast</td></tr><tr><th>E</th><td style=color:red>1</td><td style=color:red>1</td><td style=color:red>1</td><td style=color:red>1</td><td colspan=28>Reserved</td></tr></table></div><p>地址数量和范围:</p><table><thead><tr><th style=text-align:left>Class</th><th style=text-align:left>Network Count</th><th style=text-align:left>One Network IP Count</th><th style=text-align:left>IP Range</th><th style=text-align:left>Default Subnet Mask</th></tr></thead><tbody><tr><td style=text-align:left>A</td><td style=text-align:left>128=2<sup>7</sup></td><td style=text-align:left>16,777,216=2<sup>24</sup></td><td style=text-align:left>0.0.0.0~127.255.255.255</td><td style=text-align:left>255.0.0.0</td></tr><tr><td style=text-align:left>B</td><td style=text-align:left>16,384=2<sup>14</sup></td><td style=text-align:left>65,536=2<sup>16</sup></td><td style=text-align:left>128.0.0.0~191.255.255.255</td><td style=text-align:left>255.255.0.0</td></tr><tr><td style=text-align:left>C</td><td style=text-align:left>2,097,152=2<sup>21</sup></td><td style=text-align:left>256=2<sup>8</sup></td><td style=text-align:left>192.0.0.0~223.255.255.255</td><td style=text-align:left>255.255.255.0</td></tr><tr><td style=text-align:left>D</td><td style=text-align:left>N/A</td><td style=text-align:left>N/A</td><td style=text-align:left>224.0.0.0~239.255.255.255</td><td style=text-align:left>N/A</td></tr><tr><td style=text-align:left>E</td><td style=text-align:left>N/A</td><td style=text-align:left>N/A</td><td style=text-align:left>240.0.0.0~255.255.255.255</td><td style=text-align:left>N/A</td></tr></tbody></table><h3 id=private-ipv4-addtess><i id=locator-private-ipv4-addtess class=header-locator></i>
<a href=#private-ipv4-addtess class=article-h-a>3.1.1 Private IPv4 Addtess</a></h3><p>IP地址中保留了一部分私有网络地址<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup>，可以不用申请就可以直接使用:</p><table><thead><tr><th style=text-align:left>CIDR</th><th style=text-align:left>Network Count</th><th style=text-align:left>IP Range</th><th style=text-align:left>Default Subnet Mask</th><th style=text-align:left>Total IP Count</th><th style=text-align:left>Class</th></tr></thead><tbody><tr><td style=text-align:left>10.0.0.0/8</td><td style=text-align:left>1</td><td style=text-align:left>10.0.0.0~10.255.255.255</td><td style=text-align:left>255.0.0.0</td><td style=text-align:left>16,777,216=2<sup>24</sup></td><td style=text-align:left>A</td></tr><tr><td style=text-align:left>172.16.0.0/12</td><td style=text-align:left>16</td><td style=text-align:left>172.16.0.0~172.31.255.255</td><td style=text-align:left>255.240.0.0</td><td style=text-align:left>1,048,576=2<sup>20</sup></td><td style=text-align:left>B</td></tr><tr><td style=text-align:left>192.168.0.0/16</td><td style=text-align:left>256</td><td style=text-align:left>192.168.0.0~192.168.255.255</td><td style=text-align:left>255.255.0.0</td><td style=text-align:left>65,536=2<sup>16</sup></td><td style=text-align:left>C</td></tr></tbody></table><h2 id=cidr><i id=locator-cidr class=header-locator></i>
<a href=#cidr class=article-h-a>3.2 CIDR</a></h2><p>在IPv4 Addres的ABCEDE分类方式过于死板，网络号只能是8、16、24位，无法有效的对IP地址进行分类和路由。故而在1993年推出了CIDR(Classless Inter-Domain Routing)<sup id=fnref:8><a href=#fn:8 class=footnote-ref role=doc-noteref>8</a></sup>，中文含义是<strong>无类别域间路由</strong>。CIDR使用VLSM(可变长度子网掩码)来进行子网划分，可以按照IP的每一个bit来分割子网，比传统的ABCDE的方式灵活太多了。而且可以方便的进行网络的聚合。比如:</p><ol><li><code>192.168.1.0/29</code>: 子网掩码是<code>255.255.255.248</code>）, 包含2<sup>32-29=3</sup>=8个IP(<code>192.168.1.0</code>~<code>192.168.1.7</code>)。</li><li><code>192.168.1.8/29</code>: 子网掩码是<code>255.255.255.248</code>）, 包含2<sup>32-29=3</sup>=8个IP(<code>192.168.1.8</code>~<code>192.168.1.15</code>)。</li></ol><p><code>192.168.1.0/29</code>和<code>192.168.1.8/29</code>可以聚合为<code>192.168.1.0/28</code>，聚合后的子网掩码是<code>255.255.255.240</code>, 包含2<sup>32-28=4</sup>=16个IP(<code>192.168.1.1</code>~<code>192.168.1.15</code>)</p><h2 id=ipv6-address><i id=locator-ipv6-address class=header-locator></i>
<a href=#ipv6-address class=article-h-a>3.3 IPv6 Address</a></h2><p>待补充...</p><h2 id=special-address><i id=locator-special-address class=header-locator></i>
<a href=#special-address class=article-h-a>3.4 特殊的IP Address</a></h2><p>RFC5735<sup id=fnref:9><a href=#fn:9 class=footnote-ref role=doc-noteref>9</a></sup>定义了一些特殊的IP地址。常用的一些如下。</p><h3 id=loopback-adress><i id=locator-loopback-adress class=header-locator></i>
<a href=#loopback-adress class=article-h-a>3.4.1 Loopback Address</a></h3><p>中文称为<strong>回环地址</strong><sup id=fnref:10><a href=#fn:10 class=footnote-ref role=doc-noteref>10</a></sup>。回环的意思是说任何发往这个地址的数据，都不会被路由到网络上，而只会再次回到这个地址上来。</p><ol><li><code>IPv4</code>: <code>127.0.0.1/8</code>。</li><li><code>IPv6</code>: <code>::1/128</code>。</li></ol><blockquote><p>这里指的是一个<mark>地址块</mark>，并不是一个地址，比如<code>127.1.2.3</code>也是回环地址，只是通常我们只用<code>127.0.0.1</code>就足够了。</p></blockquote><h3 id=host-address><i id=locator-host-address class=header-locator></i>
<a href=#host-address class=article-h-a>3.4.2 Host Address</a></h3><p>中文称为<strong>主机地址</strong><sup id=fnref:11><a href=#fn:11 class=footnote-ref role=doc-noteref>11</a></sup>。代表的是本机上所有的网络接口的IP地址。比如本机有一个外部IP<code>1.2.3.4</code>，一个私有IP<code>192.168.1.2</code>，还有一个默认的回环地址<code>127.0.0.1</code>，那么<strong>主机地址</strong>代表的是上述3个IP。不同于<code>127.0.0.1</code>的是，当我们的应用监听<code>0.0.0.0</code>时，意味着使用上述例子中的3个地址都可以访问。</p><ol><li><code>IPv4</code>: <code>0.0.0.0</code>。</li><li><code>IPv6</code>: 简写<code>::</code>, 完整<code>0000:0000:0000:0000:0000:0000:0000:0000</code>。</li></ol><h1 id=reference><i id=locator-reference class=header-locator></i>
<a href=#reference class=article-h-a>4 Referance</a></h1><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Internet Protocol: <a href=https://en.wikipedia.org/wiki/Internet_Protocol target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/Internet_Protocol</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>IPv4 : <a href=https://en.wikipedia.org/wiki/IPv4 target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/IPv4</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>IPv6 : <a href=https://en.wikipedia.org/wiki/IPv6 target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/IPv6</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>IPv4 Packet : <a href=https://github.com/linianhui/networking/blob/master/1-src/networking.model/Internet/IPv4Packet.Layout.cs target=_blank rel="noopener norefferrer">https://github.com/linianhui/networking/blob/master/1-src/networking.model/Internet/IPv4Packet.Layout.cs</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>IPv6 Packet : <a href=https://github.com/linianhui/networking/blob/master/1-src/networking.model/Internet/IPv6Packet.Layout.cs target=_blank rel="noopener norefferrer">https://github.com/linianhui/networking/blob/master/1-src/networking.model/Internet/IPv6Packet.Layout.cs</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>Classful Network : <a href=https://en.wikipedia.org/wiki/Classful_network target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/Classful_network</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p>Private Network : <a href=https://en.wikipedia.org/wiki/Private_network target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/Private_network</a>&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:8><p>Classless Internet Domain Routing : <a href=https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing</a>&#160;<a href=#fnref:8 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:9><p>Special Use IPv4 Addresses : <a href=https://tools.ietf.org/html/rfc5735 target=_blank rel="noopener norefferrer">https://tools.ietf.org/html/rfc5735</a>&#160;<a href=#fnref:9 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:10><p>Loopback Address : <a href=https://en.wikipedia.org/wiki/Loopback#Virtual_loopback_interface target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/Loopback#Virtual_loopback_interface</a>&#160;<a href=#fnref:10 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:11><p>0.0.0.0 : <a href=https://en.wikipedia.org/wiki/0.0.0.0 target=_blank rel="noopener norefferrer">https://en.wikipedia.org/wiki/0.0.0.0</a>&#160;<a href=#fnref:11 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></section><section class=article-meta><section class=article-date>2019-09-22 08:13，约3314字，阅读约7分钟</section><section class=article-topics><a class=article-topic href=/computer-networking/ title=[计算机网络] target=_blank><i class="fa fa-folder"></i>[计算机网络]</a></section><section class=article-tags><a class=article-tag href=/tag/ip target=_blank><i class="fa fa-tag"></i>IP</a>
<a class=article-tag href=/tag/ipv4 target=_blank><i class="fa fa-tag"></i>IPv4</a>
<a class=article-tag href=/tag/ipv6 target=_blank><i class="fa fa-tag"></i>IPv6</a></section><section class=article-git><a class=article-git-commit href=https://github.com/linianhui/blog/commit/03e0cc08866458647d96951c1817c624518149d6 target=_blank><i class="fa fa-code-fork"></i>03e0cc0</a>
<span class=article-git-commit-subject>fix add displayed_on_home</span>
<span class=article-git-commit-time>2022-11-20 14:49</span>
<a class=article-git-source href=https://github.com/linianhui/blog/blob/main/src/computer-networking/03-layer-internet/index.md target=_blank><i class="fa fa-github"></i>源码</a></section></section><section class=article-page><div class=article-page-prev><span>上一篇 : </span><a href=/computer-networking/02-layer-data-link/ target=_blank>[计算机网络] 02 [Layer] Data Link</a></div><div class=article-page-next><span>下一篇 : </span><a href=/computer-networking/tcp/ target=_blank>[计算机网络] TCP</a></div></section></article><section id=article-comment class=article-comment><script src=https://utteranc.es/client.js repo=linianhui/blog issue-term=pathname label=blog-comment theme=github-light crossorigin=anonymous async></script></section></main><footer class=footer><section>Copyright © 2025 by <a href=https://github.com/linianhui/blog target=_blank>Timetombs</a></section><section><a class=article-git-commit href=https://github.com/linianhui/blog/commit/2fac07e818d6d4ad6b78781efea82c28769c8c02 target=_blank><i class="fa fa-code-fork"></i>2fac07e</a>
Powered by
<a href=https://github.com/actions target=_blank>GitHub Actions</a>
,
<a href=https://github.com/gohugoio/hugo target=_blank>Hugo</a>
and
<a href=https://github.com/utterance/utterances target=_blank>utterances</a>
Hosted on <a href=https://pages.github.com/ target=_blank>GitHub Pages</a><section></footer></main><aside class=toolbar><a class="fa fa-list" href=javascript:blog.toggleToc(); title=目录></a><a class="fa fa-comments" href=#article-comment title=评论></a><a class="fa fa-arrow-up" href=javascript:scroll(0,0); title=返回顶部></a></aside><script type=text/javascript>var _hmt=_hmt||[];blog.addOnScorllEvent()</script><script src=https://hm.baidu.com/hm.js?b2cc3cea316e1f7a8def1bab8dc98fad async></script></body></html>